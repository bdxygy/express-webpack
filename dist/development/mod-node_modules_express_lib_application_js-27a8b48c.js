"use strict";exports.id="mod-node_modules_express_lib_application_js-27a8b48c",exports.ids=["mod-node_modules_express_lib_application_js-27a8b48c"],exports.modules={"./node_modules/express/lib/application.js":(e,t,s)=>{var r=s("./node_modules/finalhandler/index.js"),i=s("./node_modules/express/lib/router/index.js"),n=s("./node_modules/methods/index.js"),o=s("./node_modules/express/lib/middleware/init.js"),a=s("./node_modules/express/lib/middleware/query.js"),u=s("./node_modules/debug/src/index.js")("express:application"),l=s("./node_modules/express/lib/view.js"),h=s("http"),c=s("./node_modules/express/lib/utils.js").compileETag,d=s("./node_modules/express/lib/utils.js").compileQueryParser,p=s("./node_modules/express/lib/utils.js").compileTrust,f=s("./node_modules/depd/index.js")("express"),g=s("./node_modules/array-flatten/array-flatten.js"),y=s("./node_modules/utils-merge/index.js"),m=s("path").resolve,b=s("./node_modules/setprototypeof/index.js"),v=Object.prototype.hasOwnProperty,_=Array.prototype.slice,x=e.exports={},w="@@symbol:trust_proxy_default";function j(e){"test"!==this.get("env")&&console.error(e.stack||e.toString())}x.init=function(){this.cache={},this.engines={},this.settings={},this.defaultConfiguration()},x.defaultConfiguration=function(){var e="development";this.enable("x-powered-by"),this.set("etag","weak"),this.set("env",e),this.set("query parser","extended"),this.set("subdomain offset",2),this.set("trust proxy",!1),Object.defineProperty(this.settings,w,{configurable:!0,value:!0}),u("booting in %s mode",e),this.on("mount",(function(e){!0===this.settings[w]&&"function"==typeof e.settings["trust proxy fn"]&&(delete this.settings["trust proxy"],delete this.settings["trust proxy fn"]),b(this.request,e.request),b(this.response,e.response),b(this.engines,e.engines),b(this.settings,e.settings)})),this.locals=Object.create(null),this.mountpath="/",this.locals.settings=this.settings,this.set("view",l),this.set("views",m("views")),this.set("jsonp callback name","callback"),Object.defineProperty(this,"router",{get:function(){throw new Error("'app.router' is deprecated!\nPlease see the 3.x to 4.x migration guide for details on how to update your app.")}})},x.lazyrouter=function(){this._router||(this._router=new i({caseSensitive:this.enabled("case sensitive routing"),strict:this.enabled("strict routing")}),this._router.use(a(this.get("query parser fn"))),this._router.use(o.init(this)))},x.handle=function(e,t,s){var i=this._router,n=s||r(e,t,{env:this.get("env"),onerror:j.bind(this)});if(!i)return u("no routes defined on app"),void n();i.handle(e,t,n)},x.use=function(e){var t=0,s="/";if("function"!=typeof e){for(var r=e;Array.isArray(r)&&0!==r.length;)r=r[0];"function"!=typeof r&&(t=1,s=e)}var i=g(_.call(arguments,t));if(0===i.length)throw new TypeError("app.use() requires a middleware function");this.lazyrouter();var n=this._router;return i.forEach((function(e){if(!e||!e.handle||!e.set)return n.use(s,e);u(".use app under %s",s),e.mountpath=s,e.parent=this,n.use(s,(function(t,s,r){var i=t.app;e.handle(t,s,(function(e){b(t,i.request),b(s,i.response),r(e)}))})),e.emit("mount",this)}),this),this},x.route=function(e){return this.lazyrouter(),this._router.route(e)},x.engine=function(e,t){if("function"!=typeof t)throw new Error("callback function required");var s="."!==e[0]?"."+e:e;return this.engines[s]=t,this},x.param=function(e,t){if(this.lazyrouter(),Array.isArray(e)){for(var s=0;s<e.length;s++)this.param(e[s],t);return this}return this._router.param(e,t),this},x.set=function(e,t){if(1!==arguments.length){switch(u('set "%s" to %o',e,t),this.settings[e]=t,e){case"etag":this.set("etag fn",c(t));break;case"query parser":this.set("query parser fn",d(t));break;case"trust proxy":this.set("trust proxy fn",p(t)),Object.defineProperty(this.settings,w,{configurable:!0,value:!1})}return this}for(var s=this.settings;s&&s!==Object.prototype;){if(v.call(s,e))return s[e];s=Object.getPrototypeOf(s)}},x.path=function(){return this.parent?this.parent.path()+this.mountpath:""},x.enabled=function(e){return Boolean(this.set(e))},x.disabled=function(e){return!this.set(e)},x.enable=function(e){return this.set(e,!0)},x.disable=function(e){return this.set(e,!1)},n.forEach((function(e){x[e]=function(t){if("get"===e&&1===arguments.length)return this.set(t);this.lazyrouter();var s=this._router.route(t);return s[e].apply(s,_.call(arguments,1)),this}})),x.all=function(e){this.lazyrouter();for(var t=this._router.route(e),s=_.call(arguments,1),r=0;r<n.length;r++)t[n[r]].apply(t,s);return this},x.del=f.function(x.delete,"app.del: Use app.delete instead"),x.render=function(e,t,s){var r,i=this.cache,n=s,o=this.engines,a=t,u={};if("function"==typeof t&&(n=t,a={}),y(u,this.locals),a._locals&&y(u,a._locals),y(u,a),null==u.cache&&(u.cache=this.enabled("view cache")),u.cache&&(r=i[e]),!r){if(!(r=new(this.get("view"))(e,{defaultEngine:this.get("view engine"),root:this.get("views"),engines:o})).path){var l=Array.isArray(r.root)&&r.root.length>1?'directories "'+r.root.slice(0,-1).join('", "')+'" or "'+r.root[r.root.length-1]+'"':'directory "'+r.root+'"',h=new Error('Failed to lookup view "'+e+'" in views '+l);return h.view=r,n(h)}u.cache&&(i[e]=r)}!function(e,t,s){try{e.render(t,s)}catch(e){s(e)}}(r,u,n)},x.listen=function(){var e=h.createServer(this);return e.listen.apply(e,arguments)}}};
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoibW9kLW5vZGVfbW9kdWxlc19leHByZXNzX2xpYl9hcHBsaWNhdGlvbl9qcy0yN2E4YjQ4Yy5qcyIsIm1hcHBpbmdzIjoiMk5BZUEsSUFBSUEsRUFBZSxFQUFRLHdDQUN2QkMsRUFBUyxFQUFRLDhDQUNqQkMsRUFBVSxFQUFRLG1DQUNsQkMsRUFBYSxFQUFRLGlEQUNyQkMsRUFBUSxFQUFRLGtEQUNoQkMsRUFBUSxFQUFRLG9DQUFSLENBQWlCLHVCQUN6QkMsRUFBTyxFQUFRLHNDQUNmQyxFQUFPLEVBQVEsUUFDZkMsRUFBYyxxREFDZEMsRUFBcUIsNERBQ3JCQyxFQUFlLHNEQUNmQyxFQUFZLEVBQVEsK0JBQVIsQ0FBZ0IsV0FDNUJDLEVBQVUsRUFBUSxpREFDbEJDLEVBQVEsRUFBUSx1Q0FDaEJDLEVBQVUsa0JBQ1ZDLEVBQWlCLEVBQVEsMENBT3pCQyxFQUFpQkMsT0FBT0MsVUFBVUYsZUFDbENHLEVBQVFDLE1BQU1GLFVBQVVDLE1BTXhCRSxFQUFnQkMsRUFBT0MsUUFBVSxDQUFDLEVBT2xDQyxFQUEwQiwrQkFpbEI5QixTQUFTQyxFQUFTQyxHQUVRLFNBQXBCQyxLQUFLQyxJQUFJLFFBQW1CQyxRQUFRQyxNQUFNSixFQUFJSyxPQUFTTCxFQUFJTSxXQUNqRSxDQXhrQkFYLEVBQUlZLEtBQU8sV0FDVE4sS0FBS08sTUFBUSxDQUFDLEVBQ2RQLEtBQUtRLFFBQVUsQ0FBQyxFQUNoQlIsS0FBS1MsU0FBVyxDQUFDLEVBRWpCVCxLQUFLVSxzQkFDUCxFQU9BaEIsRUFBSWdCLHFCQUF1QixXQUN6QixJQUFJQyxFQUFNLGNBR1ZYLEtBQUtZLE9BQU8sZ0JBQ1paLEtBQUthLElBQUksT0FBUSxRQUNqQmIsS0FBS2EsSUFBSSxNQUFPRixHQUNoQlgsS0FBS2EsSUFBSSxlQUFnQixZQUN6QmIsS0FBS2EsSUFBSSxtQkFBb0IsR0FDN0JiLEtBQUthLElBQUksZUFBZSxHQUd4QnZCLE9BQU93QixlQUFlZCxLQUFLUyxTQUFVWixFQUF5QixDQUM1RGtCLGNBQWMsRUFDZEMs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MEcsYUFBYXRGLE1BQy9CLE9BQU9xRixFQUFPRCxPQUFPakIsTUFBTWtCLEVBQVF0QyxVQUNyQyxDIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vQGJkeHlneS9leHByZXNzLXdlYnBhY2svLi9ub2RlX21vZHVsZXMvZXhwcmVzcy9saWIvYXBwbGljYXRpb24uanMiXSwic291cmNlc0NvbnRlbnQiOlsiLyohXG4gKiBleHByZXNzXG4gKiBDb3B5cmlnaHQoYykgMjAwOS0yMDEzIFRKIEhvbG93YXljaHVrXG4gKiBDb3B5cmlnaHQoYykgMjAxMyBSb21hbiBTaHR5bG1hblxuICogQ29weXJpZ2h0KGMpIDIwMTQtMjAxNSBEb3VnbGFzIENocmlzdG9waGVyIFdpbHNvblxuICogTUlUIExpY2Vuc2VkXG4gKi9cblxuJ3VzZSBzdHJpY3QnO1xuXG4vKipcbiAqIE1vZHVsZSBkZXBlbmRlbmNpZXMuXG4gKiBAcHJpdmF0ZVxuICovXG5cbnZhciBmaW5hbGhhbmRsZXIgPSByZXF1aXJlKCdmaW5hbGhhbmRsZXInKTtcbnZhciBSb3V0ZXIgPSByZXF1aXJlKCcuL3JvdXRlcicpO1xudmFyIG1ldGhvZHMgPSByZXF1aXJlKCdtZXRob2RzJyk7XG52YXIgbWlkZGxld2FyZSA9IHJlcXVpcmUoJy4vbWlkZGxld2FyZS9pbml0Jyk7XG52YXIgcXVlcnkgPSByZXF1aXJlKCcuL21pZGRsZXdhcmUvcXVlcnknKTtcbnZhciBkZWJ1ZyA9IHJlcXVpcmUoJ2RlYnVnJykoJ2V4cHJlc3M6YXBwbGljYXRpb24nKTtcbnZhciBWaWV3ID0gcmVxdWlyZSgnLi92aWV3Jyk7XG52YXIgaHR0cCA9IHJlcXVpcmUoJ2h0dHAnKTtcbnZhciBjb21waWxlRVRhZyA9IHJlcXVpcmUoJy4vdXRpbHMnKS5jb21waWxlRVRhZztcbnZhciBjb21waWxlUXVlcnlQYXJzZXIgPSByZXF1aXJlKCcuL3V0aWxzJykuY29tcGlsZVF1ZXJ5UGFyc2VyO1xudmFyIGNvbXBpbGVUcnVzdCA9IHJlcXVpcmUoJy4vdXRpbHMnKS5jb21waWxlVHJ1c3Q7XG52YXIgZGVwcmVjYXRlID0gcmVxdWlyZSgnZGVwZCcpKCdleHByZXNzJyk7XG52YXIgZmxhdHRlbiA9IHJlcXVpcmUoJ2FycmF5LWZsYXR0ZW4nKTtcbnZhciBtZXJnZSA9IHJlcXVpcmUoJ3V0aWxzLW1lcmdlJyk7XG52YXIgcmVzb2x2ZSA9IHJlcXVpcmUoJ3BhdGgnKS5yZXNvbHZlO1xudmFyIHNldFByb3RvdHlwZU9mID0gcmVxdWlyZSgnc2V0cHJvdG90eXBlb2YnKVxuXG4vKipcbiAqIE1vZHVsZSB2YXJpYWJsZXMuXG4gKiBAcHJpdmF0ZVxuICovXG5cbnZhciBoYXNPd25Qcm9wZXJ0eSA9IE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHlcbnZhciBzbGljZSA9IEFycmF5LnByb3RvdHlwZS5zbGljZTtcblxuLyoqXG4gKiBBcHBsaWNhdGlvbiBwcm90b3R5cGUuXG4gKi9cblxudmFyIGFwcCA9IGV4cG9ydHMgPSBtb2R1bGUuZXhwb3J0cyA9IHt9O1xuXG4vKipcbiAqIFZhcmlhYmxlIGZvciB0cnVzdCBwcm94eSBpbmhlcml0YW5jZSBiYWNrLWNvbXBhdFxuICogQHByaXZhdGVcbiAqL1xuXG52YXIgdHJ1c3RQcm94eURlZmF1bHRTeW1ib2wgPSAnQEBzeW1ib2w6dHJ1c3RfcHJveHlfZGVmYXVsdCc7XG5cbi8qKlxuICogSW5pdGlhbGl6ZSB0aGUgc2VydmVyLlxuICpcbiAqICAgLSBzZXR1cCBkZWZhdWx0IGNvbmZpZ3VyYXRpb25cbiAqICAgLSBzZXR1cCBkZWZhdWx0IG1pZGRsZXdhcmVcbiAqICAgLSBzZXR1cCByb3V0ZSByZWZsZWN0aW9uIG1ldGhvZHNcbiAqXG4gKiBAcHJpdmF0ZVxuICovXG5cbmFwcC5pbml0ID0gZnVuY3Rpb24gaW5pdCgpIHtcbiAgdGhpcy5jYWNoZSA9IHt9O1xuICB0aGlzLmVuZ2luZXMgPSB7fTtcbiAgdGhpcy5zZXR0aW5ncyA9IHt9O1xuXG4gIHRoaXMuZGVmYXVsdENvbmZpZ3VyYXRpb24oKTtcbn07XG5cbi8qKlxuICogSW5pdGlhbGl6ZSBhcHBsaWNhdGlvbiBjb25maWd1cmF0aW9uLlxuICogQHByaXZhdGVcbiAqL1xuXG5hcHAuZGVmYXVsdENvbmZpZ3VyYXRpb24gPSBmdW5jdGlvbiBkZWZhdWx0Q29uZmlndXJhdGlvbigpIHtcbiAgdmFyIGVudiA9IHByb2Nlc3MuZW52Lk5PREVfRU5WIHx8ICdkZXZlbG9wbWVudCc7XG5cbiAgLy8gZGVmYXVsdCBzZXR0aW5nc1xuICB0aGlzLmVuYWJsZSgneC1wb3dlcmVkLWJ5Jyk7XG4gIHRoaXMuc2V0KCdldGFnJywgJ3dlYWsnKTtcbiAgdGhpcy5zZXQoJ2VudicsIGVudik7XG4gIHRoaXMuc2V0KCdxdWVyeSBwYXJzZXInLCAnZXh0ZW5kZWQnKTtcbiAgdGhpcy5zZXQoJ3N1YmRvbWFpbiBvZmZzZXQnLCAyKTtcbiAgdGhpcy5zZXQoJ3RydXN0IHByb3h5JywgZmFsc2UpO1xuXG4gIC8vIHRydXN0IHByb3h5IGluaGVyaXQgYmFjay1jb21wYXRcbiAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRoaXMuc2V0dGluZ3MsIHRydXN0UHJveHlEZWZhdWx0U3ltYm9sLCB7XG4gICAgY29uZmlndXJhYmxlOiB0cnVlLFxuICAgIHZhbHVlOiB0cnVlXG4gIH0pO1xuXG4gIGRlYnVnKCdib290aW5nIGluICVzIG1vZGUnLCBlbnYpO1xuXG4gIHRoaXMub24oJ21vdW50JywgZnVuY3Rpb24gb25tb3VudChwYXJlbnQpIHtcbiAgICAvLyBpbmhlcml0IHRydXN0IHByb3h5XG4gICAgaWYgKHRoaXMuc2V0dGluZ3NbdHJ1c3RQcm94eURlZmF1bHRTeW1ib2xdID09PSB0cnVlXG4gICAgICAmJiB0eXBlb2YgcGFyZW50LnNldHRpbmdzWyd0cnVzdCBwcm94eSBmbiddID09PSAnZnVuY3Rpb24nKSB7XG4gICAgICBkZWxldGUgdGhpcy5zZXR0aW5nc1sndHJ1c3QgcHJveHknXTtcbiAgICAgIGRlbGV0ZSB0aGlzLnNldHRpbmdzWyd0cnVzdCBwcm94eSBmbiddO1xuICAgIH1cblxuICAgIC8vIGluaGVyaXQgcHJvdG9zXG4gICAgc2V0UHJvdG90eXBlT2YodGhpcy5yZXF1ZXN0LCBwYXJlbnQucmVxdWVzdClcbiAgICBzZXRQcm90b3R5cGVPZih0aGlzLnJlc3BvbnNlLCBwYXJlbnQucmVzcG9uc2UpXG4gICAgc2V0UHJvdG90eXBlT2YodGhpcy5lbmdpbmVzLCBwYXJlbnQuZW5naW5lcylcbiAgICBzZXRQcm90b3R5cGVPZih0aGlzLnNldHRpbmdzLCBwYXJlbnQuc2V0dGluZ3MpXG4gIH0pO1xuXG4gIC8vIHNldHVwIGxvY2Fsc1xuICB0aGlzLmxvY2FscyA9IE9iamVjdC5jcmVhdGUobnVsbCk7XG5cbiAgLy8gdG9wLW1vc3QgYXBwIGlzIG1vdW50ZWQgYXQgL1xuICB0aGlzLm1vdW50cGF0aCA9ICcvJztcblxuICAvLyBkZWZhdWx0IGxvY2Fsc1xuICB0aGlzLmxvY2Fscy5zZXR0aW5ncyA9IHRoaXMuc2V0dGluZ3M7XG5cbiAgLy8gZGVmYXVsdCBjb25maWd1cmF0aW9uXG4gIHRoaXMuc2V0KCd2aWV3JywgVmlldyk7XG4gIHRoaXMuc2V0KCd2aWV3cycsIHJlc29sdmUoJ3ZpZXdzJykpO1xuICB0aGlzLnNldCgnanNvbnAgY2FsbGJhY2sgbmFtZScsICdjYWxsYmFjaycpO1xuXG4gIGlmIChlbnYgPT09ICdwcm9kdWN0aW9uJykge1xuICAgIHRoaXMuZW5hYmxlKCd2aWV3IGNhY2hlJyk7XG4gIH1cblxuICBPYmplY3QuZGVmaW5lUHJvcGVydHkodGhpcywgJ3JvdXRlcicsIHtcbiAgICBnZXQ6IGZ1bmN0aW9uKCkge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKCdcXCdhcHAucm91dGVyXFwnIGlzIGRlcHJlY2F0ZWQhXFxuUGxlYXNlIHNlZSB0aGUgMy54IHRvIDQueCBtaWdyYXRpb24gZ3VpZGUgZm9yIGRldGFpbHMgb24gaG93IHRvIHVwZGF0ZSB5b3VyIGFwcC4nKTtcbiAgICB9XG4gIH0pO1xufTtcblxuLyoqXG4gKiBsYXppbHkgYWRkcyB0aGUgYmFzZSByb3V0ZXIgaWYgaXQgaGFzIG5vdCB5ZXQgYmVlbiBhZGRlZC5cbiAqXG4gKiBXZSBjYW5ub3QgYWRkIHRoZSBiYXNlIHJvdXRlciBpbiB0aGUgZGVmYXVsdENvbmZpZ3VyYXRpb24gYmVjYXVzZVxuICogaXQgcmVhZHMgYXBwIHNldHRpbmdzIHdoaWNoIG1pZ2h0IGJlIHNldCBhZnRlciB0aGF0IGhhcyBydW4uXG4gKlxuICogQHByaXZhdGVcbiAqL1xuYXBwLmxhenlyb3V0ZXIgPSBmdW5jdGlvbiBsYXp5cm91dGVyKCkge1xuICBpZiAoIXRoaXMuX3JvdXRlcikge1xuICAgIHRoaXMuX3JvdXRlciA9IG5ldyBSb3V0ZXIoe1xuICAgICAgY2FzZVNlbnNpdGl2ZTogdGhpcy5lbmFibGVkKCdjYXNlIHNlbnNpdGl2ZSByb3V0aW5nJyksXG4gICAgICBzdHJpY3Q6IHRoaXMuZW5hYmxlZCgnc3RyaWN0IHJvdXRpbmcnKVxuICAgIH0pO1xuXG4gICAgdGhpcy5fcm91dGVyLnVzZShxdWVyeSh0aGlzLmdldCgncXVlcnkgcGFyc2VyIGZuJykpKTtcbiAgICB0aGlzLl9yb3V0ZXIudXNlKG1pZGRsZXdhcmUuaW5pdCh0aGlzKSk7XG4gIH1cbn07XG5cbi8qKlxuICogRGlzcGF0Y2ggYSByZXEsIHJlcyBwYWlyIGludG8gdGhlIGFwcGxpY2F0aW9uLiBTdGFydHMgcGlwZWxpbmUgcHJvY2Vzc2luZy5cbiAqXG4gKiBJZiBubyBjYWxsYmFjayBpcyBwcm92aWRlZCwgdGhlbiBkZWZhdWx0IGVycm9yIGhhbmRsZXJzIHdpbGwgcmVzcG9uZFxuICogaW4gdGhlIGV2ZW50IG9mIGFuIGVycm9yIGJ1YmJsaW5nIHRocm91Z2ggdGhlIHN0YWNrLlxuICpcbiAqIEBwcml2YXRlXG4gKi9cblxuYXBwLmhhbmRsZSA9IGZ1bmN0aW9uIGhhbmRsZShyZXEsIHJlcywgY2FsbGJhY2spIHtcbiAgdmFyIHJvdXRlciA9IHRoaXMuX3JvdXRlcjtcblxuICAvLyBmaW5hbCBoYW5kbGVyXG4gIHZhciBkb25lID0gY2FsbGJhY2sgfHwgZmluYWxoYW5kbGVyKHJlcSwgcmVzLCB7XG4gICAgZW52OiB0aGlzLmdldCgnZW52JyksXG4gICAgb25lcnJvcjogbG9nZXJyb3IuYmluZCh0aGlzKVxuICB9KTtcblxuICAvLyBubyByb3V0ZXNcbiAgaWYgKCFyb3V0ZXIpIHtcbiAgICBkZWJ1Zygnbm8gcm91dGVzIGRlZmluZWQgb24gYXBwJyk7XG4gICAgZG9uZSgpO1xuICAgIHJldHVybjtcbiAgfVxuXG4gIHJvdXRlci5oYW5kbGUocmVxLCByZXMsIGRvbmUpO1xufTtcblxuLyoqXG4gKiBQcm94eSBgUm91dGVyI3VzZSgpYCB0byBhZGQgbWlkZGxld2FyZSB0byB0aGUgYXBwIHJvdXRlci5cbiAqIFNlZSBSb3V0ZXIjdXNlKCkgZG9jdW1lbnRhdGlvbiBmb3IgZGV0YWlscy5cbiAqXG4gKiBJZiB0aGUgX2ZuXyBwYXJhbWV0ZXIgaXMgYW4gZXhwcmVzcyBhcHAsIHRoZW4gaXQgd2lsbCBiZVxuICogbW91bnRlZCBhdCB0aGUgX3JvdXRlXyBzcGVjaWZpZWQuXG4gKlxuICogQHB1YmxpY1xuICovXG5cbmFwcC51c2UgPSBmdW5jdGlvbiB1c2UoZm4pIHtcbiAgdmFyIG9mZnNldCA9IDA7XG4gIHZhciBwYXRoID0gJy8nO1xuXG4gIC8vIGRlZmF1bHQgcGF0aCB0byAnLydcbiAgLy8gZGlzYW1iaWd1YXRlIGFwcC51c2UoW2ZuXSlcbiAgaWYgKHR5cGVvZiBmbiAhPT0gJ2Z1bmN0aW9uJykge1xuICAgIHZhciBhcmcgPSBmbjtcblxuICAgIHdoaWxlIChBcnJheS5pc0FycmF5KGFyZykgJiYgYXJnLmxlbmd0aCAhPT0gMCkge1xuICAgICAgYXJnID0gYXJnWzBdO1xuICAgIH1cblxuICAgIC8vIGZpcnN0IGFyZyBpcyB0aGUgcGF0aFxuICAgIGlmICh0eXBlb2YgYXJnICE9PSAnZnVuY3Rpb24nKSB7XG4gICAgICBvZmZzZXQgPSAxO1xuICAgICAgcGF0aCA9IGZuO1xuICAgIH1cbiAgfVxuXG4gIHZhciBmbnMgPSBmbGF0dGVuKHNsaWNlLmNhbGwoYXJndW1lbnRzLCBvZmZzZXQpKTtcblxuICBpZiAoZm5zLmxlbmd0aCA9PT0gMCkge1xuICAgIHRocm93IG5ldyBUeXBlRXJyb3IoJ2FwcC51c2UoKSByZXF1aXJlcyBhIG1pZGRsZXdhcmUgZnVuY3Rpb24nKVxuICB9XG5cbiAgLy8gc2V0dXAgcm91dGVyXG4gIHRoaXMubGF6eXJvdXRlcigpO1xuICB2YXIgcm91dGVyID0gdGhpcy5fcm91dGVyO1xuXG4gIGZucy5mb3JFYWNoKGZ1bmN0aW9uIChmbikge1xuICAgIC8vIG5vbi1leHByZXNzIGFwcFxuICAgIGlmICghZm4gfHwgIWZuLmhhbmRsZSB8fCAhZm4uc2V0KSB7XG4gICAgICByZXR1cm4gcm91dGVyLnVzZShwYXRoLCBmbik7XG4gICAgfVxuXG4gICAgZGVidWcoJy51c2UgYXBwIHVuZGVyICVzJywgcGF0aCk7XG4gICAgZm4ubW91bnRwYXRoID0gcGF0aDtcbiAgICBmbi5wYXJlbnQgPSB0aGlzO1xuXG4gICAgLy8gcmVzdG9yZSAuYXBwIHByb3BlcnR5IG9uIHJlcSBhbmQgcmVzXG4gICAgcm91dGVyLnVzZShwYXRoLCBmdW5jdGlvbiBtb3VudGVkX2FwcChyZXEsIHJlcywgbmV4dCkge1xuICAgICAgdmFyIG9yaWcgPSByZXEuYXBwO1xuICAgICAgZm4uaGFuZGxlKHJlcSwgcmVzLCBmdW5jdGlvbiAoZXJyKSB7XG4gICAgICAgIHNldFByb3RvdHlwZU9mKHJlcSwgb3JpZy5yZXF1ZXN0KVxuICAgICAgICBzZXRQcm90b3R5cGVPZihyZXMsIG9yaWcucmVzcG9uc2UpXG4gICAgICAgIG5leHQoZXJyKTtcbiAgICAgIH0pO1xuICAgIH0pO1xuXG4gICAgLy8gbW91bnRlZCBhbiBhcHBcbiAgICBmbi5lbWl0KCdtb3VudCcsIHRoaXMpO1xuICB9LCB0aGlzKTtcblxuICByZXR1cm4gdGhpcztcbn07XG5cbi8qKlxuICogUHJveHkgdG8gdGhlIGFwcCBgUm91dGVyI3JvdXRlKClgXG4gKiBSZXR1cm5zIGEgbmV3IGBSb3V0ZWAgaW5zdGFuY2UgZm9yIHRoZSBfcGF0aF8uXG4gKlxuICogUm91dGVzIGFyZSBpc29sYXRlZCBtaWRkbGV3YXJlIHN0YWNrcyBmb3Igc3BlY2lmaWMgcGF0aHMuXG4gKiBTZWUgdGhlIFJvdXRlIGFwaSBkb2NzIGZvciBkZXRhaWxzLlxuICpcbiAqIEBwdWJsaWNcbiAqL1xuXG5hcHAucm91dGUgPSBmdW5jdGlvbiByb3V0ZShwYXRoKSB7XG4gIHRoaXMubGF6eXJvdXRlcigpO1xuICByZXR1cm4gdGhpcy5fcm91dGVyLnJvdXRlKHBhdGgpO1xufTtcblxuLyoqXG4gKiBSZWdpc3RlciB0aGUgZ2l2ZW4gdGVtcGxhdGUgZW5naW5lIGNhbGxiYWNrIGBmbmBcbiAqIGFzIGBleHRgLlxuICpcbiAqIEJ5IGRlZmF1bHQgd2lsbCBgcmVxdWlyZSgpYCB0aGUgZW5naW5lIGJhc2VkIG9uIHRoZVxuICogZmlsZSBleHRlbnNpb24uIEZvciBleGFtcGxlIGlmIHlvdSB0cnkgdG8gcmVuZGVyXG4gKiBhIFwiZm9vLmVqc1wiIGZpbGUgRXhwcmVzcyB3aWxsIGludm9rZSB0aGUgZm9sbG93aW5nIGludGVybmFsbHk6XG4gKlxuICogICAgIGFwcC5lbmdpbmUoJ2VqcycsIHJlcXVpcmUoJ2VqcycpLl9fZXhwcmVzcyk7XG4gKlxuICogRm9yIGVuZ2luZXMgdGhhdCBkbyBub3QgcHJvdmlkZSBgLl9fZXhwcmVzc2Agb3V0IG9mIHRoZSBib3gsXG4gKiBvciBpZiB5b3Ugd2lzaCB0byBcIm1hcFwiIGEgZGlmZmVyZW50IGV4dGVuc2lvbiB0byB0aGUgdGVtcGxhdGUgZW5naW5lXG4gKiB5b3UgbWF5IHVzZSB0aGlzIG1ldGhvZC4gRm9yIGV4YW1wbGUgbWFwcGluZyB0aGUgRUpTIHRlbXBsYXRlIGVuZ2luZSB0b1xuICogXCIuaHRtbFwiIGZpbGVzOlxuICpcbiAqICAgICBhcHAuZW5naW5lKCdodG1sJywgcmVxdWlyZSgnZWpzJykucmVuZGVyRmlsZSk7XG4gKlxuICogSW4gdGhpcyBjYXNlIEVKUyBwcm92aWRlcyBhIGAucmVuZGVyRmlsZSgpYCBtZXRob2Qgd2l0aFxuICogdGhlIHNhbWUgc2lnbmF0dXJlIHRoYXQgRXhwcmVzcyBleHBlY3RzOiBgKHBhdGgsIG9wdGlvbnMsIGNhbGxiYWNrKWAsXG4gKiB0aG91Z2ggbm90ZSB0aGF0IGl0IGFsaWFzZXMgdGhpcyBtZXRob2QgYXMgYGVqcy5fX2V4cHJlc3NgIGludGVybmFsbHlcbiAqIHNvIGlmIHlvdSdyZSB1c2luZyBcIi5lanNcIiBleHRlbnNpb25zIHlvdSBkb24ndCBuZWVkIHRvIGRvIGFueXRoaW5nLlxuICpcbiAqIFNvbWUgdGVtcGxhdGUgZW5naW5lcyBkbyBub3QgZm9sbG93IHRoaXMgY29udmVudGlvbiwgdGhlXG4gKiBbQ29uc29saWRhdGUuanNdKGh0dHBzOi8vZ2l0aHViLmNvbS90ai9jb25zb2xpZGF0ZS5qcylcbiAqIGxpYnJhcnkgd2FzIGNyZWF0ZWQgdG8gbWFwIGFsbCBvZiBub2RlJ3MgcG9wdWxhciB0ZW1wbGF0ZVxuICogZW5naW5lcyB0byBmb2xsb3cgdGhpcyBjb252ZW50aW9uLCB0aHVzIGFsbG93aW5nIHRoZW0gdG9cbiAqIHdvcmsgc2VhbWxlc3NseSB3aXRoaW4gRXhwcmVzcy5cbiAqXG4gKiBAcGFyYW0ge1N0cmluZ30gZXh0XG4gKiBAcGFyYW0ge0Z1bmN0aW9ufSBmblxuICogQHJldHVybiB7YXBwfSBmb3IgY2hhaW5pbmdcbiAqIEBwdWJsaWNcbiAqL1xuXG5hcHAuZW5naW5lID0gZnVuY3Rpb24gZW5naW5lKGV4dCwgZm4pIHtcbiAgaWYgKHR5cGVvZiBmbiAhPT0gJ2Z1bmN0aW9uJykge1xuICAgIHRocm93IG5ldyBFcnJvcignY2FsbGJhY2sgZnVuY3Rpb24gcmVxdWlyZWQnKTtcbiAgfVxuXG4gIC8vIGdldCBmaWxlIGV4dGVuc2lvblxuICB2YXIgZXh0ZW5zaW9uID0gZXh0WzBdICE9PSAnLidcbiAgICA/ICcuJyArIGV4dFxuICAgIDogZXh0O1xuXG4gIC8vIHN0b3JlIGVuZ2luZVxuICB0aGlzLmVuZ2luZXNbZXh0ZW5zaW9uXSA9IGZuO1xuXG4gIHJldHVybiB0aGlzO1xufTtcblxuLyoqXG4gKiBQcm94eSB0byBgUm91dGVyI3BhcmFtKClgIHdpdGggb25lIGFkZGVkIGFwaSBmZWF0dXJlLiBUaGUgX25hbWVfIHBhcmFtZXRlclxuICogY2FuIGJlIGFuIGFycmF5IG9mIG5hbWVzLlxuICpcbiAqIFNlZSB0aGUgUm91dGVyI3BhcmFtKCkgZG9jcyBmb3IgbW9yZSBkZXRhaWxzLlxuICpcbiAqIEBwYXJhbSB7U3RyaW5nfEFycmF5fSBuYW1lXG4gKiBAcGFyYW0ge0Z1bmN0aW9ufSBmblxuICogQHJldHVybiB7YXBwfSBmb3IgY2hhaW5pbmdcbiAqIEBwdWJsaWNcbiAqL1xuXG5hcHAucGFyYW0gPSBmdW5jdGlvbiBwYXJhbShuYW1lLCBmbikge1xuICB0aGlzLmxhenlyb3V0ZXIoKTtcblxuICBpZiAoQXJyYXkuaXNBcnJheShuYW1lKSkge1xuICAgIGZvciAodmFyIGkgPSAwOyBpIDwgbmFtZS5sZW5ndGg7IGkrKykge1xuICAgICAgdGhpcy5wYXJhbShuYW1lW2ldLCBmbik7XG4gICAgfVxuXG4gICAgcmV0dXJuIHRoaXM7XG4gIH1cblxuICB0aGlzLl9yb3V0ZXIucGFyYW0obmFtZSwgZm4pO1xuXG4gIHJldHVybiB0aGlzO1xufTtcblxuLyoqXG4gKiBBc3NpZ24gYHNldHRpbmdgIHRvIGB2YWxgLCBvciByZXR1cm4gYHNldHRpbmdgJ3MgdmFsdWUuXG4gKlxuICogICAgYXBwLnNldCgnZm9vJywgJ2JhcicpO1xuICogICAgYXBwLnNldCgnZm9vJyk7XG4gKiAgICAvLyA9PiBcImJhclwiXG4gKlxuICogTW91bnRlZCBzZXJ2ZXJzIGluaGVyaXQgdGhlaXIgcGFyZW50IHNlcnZlcidzIHNldHRpbmdzLlxuICpcbiAqIEBwYXJhbSB7U3RyaW5nfSBzZXR0aW5nXG4gKiBAcGFyYW0geyp9IFt2YWxdXG4gKiBAcmV0dXJuIHtTZXJ2ZXJ9IGZvciBjaGFpbmluZ1xuICogQHB1YmxpY1xuICovXG5cbmFwcC5zZXQgPSBmdW5jdGlvbiBzZXQoc2V0dGluZywgdmFsKSB7XG4gIGlmIChhcmd1bWVudHMubGVuZ3RoID09PSAxKSB7XG4gICAgLy8gYXBwLmdldChzZXR0aW5nKVxuICAgIHZhciBzZXR0aW5ncyA9IHRoaXMuc2V0dGluZ3NcblxuICAgIHdoaWxlIChzZXR0aW5ncyAmJiBzZXR0aW5ncyAhPT0gT2JqZWN0LnByb3RvdHlwZSkge1xuICAgICAgaWYgKGhhc093blByb3BlcnR5LmNhbGwoc2V0dGluZ3MsIHNldHRpbmcpKSB7XG4gICAgICAgIHJldHVybiBzZXR0aW5nc1tzZXR0aW5nXVxuICAgICAgfVxuXG4gICAgICBzZXR0aW5ncyA9IE9iamVjdC5nZXRQcm90b3R5cGVPZihzZXR0aW5ncylcbiAgICB9XG5cbiAgICByZXR1cm4gdW5kZWZpbmVkXG4gIH1cblxuICBkZWJ1Zygnc2V0IFwiJXNcIiB0byAlbycsIHNldHRpbmcsIHZhbCk7XG5cbiAgLy8gc2V0IHZhbHVlXG4gIHRoaXMuc2V0dGluZ3Nbc2V0dGluZ10gPSB2YWw7XG5cbiAgLy8gdHJpZ2dlciBtYXRjaGVkIHNldHRpbmdzXG4gIHN3aXRjaCAoc2V0dGluZykge1xuICAgIGNhc2UgJ2V0YWcnOlxuICAgICAgdGhpcy5zZXQoJ2V0YWcgZm4nLCBjb21waWxlRVRhZyh2YWwpKTtcbiAgICAgIGJyZWFrO1xuICAgIGNhc2UgJ3F1ZXJ5IHBhcnNlcic6XG4gICAgICB0aGlzLnNldCgncXVlcnkgcGFyc2VyIGZuJywgY29tcGlsZVF1ZXJ5UGFyc2VyKHZhbCkpO1xuICAgICAgYnJlYWs7XG4gICAgY2FzZSAndHJ1c3QgcHJveHknOlxuICAgICAgdGhpcy5zZXQoJ3RydXN0IHByb3h5IGZuJywgY29tcGlsZVRydXN0KHZhbCkpO1xuXG4gICAgICAvLyB0cnVzdCBwcm94eSBpbmhlcml0IGJhY2stY29tcGF0XG4gICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodGhpcy5zZXR0aW5ncywgdHJ1c3RQcm94eURlZmF1bHRTeW1ib2wsIHtcbiAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlLFxuICAgICAgICB2YWx1ZTogZmFsc2VcbiAgICAgIH0pO1xuXG4gICAgICBicmVhaztcbiAgfVxuXG4gIHJldHVybiB0aGlzO1xufTtcblxuLyoqXG4gKiBSZXR1cm4gdGhlIGFwcCdzIGFic29sdXRlIHBhdGhuYW1lXG4gKiBiYXNlZCBvbiB0aGUgcGFyZW50KHMpIHRoYXQgaGF2ZVxuICogbW91bnRlZCBpdC5cbiAqXG4gKiBGb3IgZXhhbXBsZSBpZiB0aGUgYXBwbGljYXRpb24gd2FzXG4gKiBtb3VudGVkIGFzIFwiL2FkbWluXCIsIHdoaWNoIGl0c2VsZlxuICogd2FzIG1vdW50ZWQgYXMgXCIvYmxvZ1wiIHRoZW4gdGhlXG4gKiByZXR1cm4gdmFsdWUgd291bGQgYmUgXCIvYmxvZy9hZG1pblwiLlxuICpcbiAqIEByZXR1cm4ge1N0cmluZ31cbiAqIEBwcml2YXRlXG4gKi9cblxuYXBwLnBhdGggPSBmdW5jdGlvbiBwYXRoKCkge1xuICByZXR1cm4gdGhpcy5wYXJlbnRcbiAgICA/IHRoaXMucGFyZW50LnBhdGgoKSArIHRoaXMubW91bnRwYXRoXG4gICAgOiAnJztcbn07XG5cbi8qKlxuICogQ2hlY2sgaWYgYHNldHRpbmdgIGlzIGVuYWJsZWQgKHRydXRoeSkuXG4gKlxuICogICAgYXBwLmVuYWJsZWQoJ2ZvbycpXG4gKiAgICAvLyA9PiBmYWxzZVxuICpcbiAqICAgIGFwcC5lbmFibGUoJ2ZvbycpXG4gKiAgICBhcHAuZW5hYmxlZCgnZm9vJylcbiAqICAgIC8vID0+IHRydWVcbiAqXG4gKiBAcGFyYW0ge1N0cmluZ30gc2V0dGluZ1xuICogQHJldHVybiB7Qm9vbGVhbn1cbiAqIEBwdWJsaWNcbiAqL1xuXG5hcHAuZW5hYmxlZCA9IGZ1bmN0aW9uIGVuYWJsZWQoc2V0dGluZykge1xuICByZXR1cm4gQm9vbGVhbih0aGlzLnNldChzZXR0aW5nKSk7XG59O1xuXG4vKipcbiAqIENoZWNrIGlmIGBzZXR0aW5nYCBpcyBkaXNhYmxlZC5cbiAqXG4gKiAgICBhcHAuZGlzYWJsZWQoJ2ZvbycpXG4gKiAgICAvLyA9PiB0cnVlXG4gKlxuICogICAgYXBwLmVuYWJsZSgnZm9vJylcbiAqICAgIGFwcC5kaXNhYmxlZCgnZm9vJylcbiAqICAgIC8vID0+IGZhbHNlXG4gKlxuICogQHBhcmFtIHtTdHJpbmd9IHNldHRpbmdcbiAqIEByZXR1cm4ge0Jvb2xlYW59XG4gKiBAcHVibGljXG4gKi9cblxuYXBwLmRpc2FibGVkID0gZnVuY3Rpb24gZGlzYWJsZWQoc2V0dGluZykge1xuICByZXR1cm4gIXRoaXMuc2V0KHNldHRpbmcpO1xufTtcblxuLyoqXG4gKiBFbmFibGUgYHNldHRpbmdgLlxuICpcbiAqIEBwYXJhbSB7U3RyaW5nfSBzZXR0aW5nXG4gKiBAcmV0dXJuIHthcHB9IGZvciBjaGFpbmluZ1xuICogQHB1YmxpY1xuICovXG5cbmFwcC5lbmFibGUgPSBmdW5jdGlvbiBlbmFibGUoc2V0dGluZykge1xuICByZXR1cm4gdGhpcy5zZXQoc2V0dGluZywgdHJ1ZSk7XG59O1xuXG4vKipcbiAqIERpc2FibGUgYHNldHRpbmdgLlxuICpcbiAqIEBwYXJhbSB7U3RyaW5nfSBzZXR0aW5nXG4gKiBAcmV0dXJuIHthcHB9IGZvciBjaGFpbmluZ1xuICogQHB1YmxpY1xuICovXG5cbmFwcC5kaXNhYmxlID0gZnVuY3Rpb24gZGlzYWJsZShzZXR0aW5nKSB7XG4gIHJldHVybiB0aGlzLnNldChzZXR0aW5nLCBmYWxzZSk7XG59O1xuXG4vKipcbiAqIERlbGVnYXRlIGAuVkVSQiguLi4pYCBjYWxscyB0byBgcm91dGVyLlZFUkIoLi4uKWAuXG4gKi9cblxubWV0aG9kcy5mb3JFYWNoKGZ1bmN0aW9uKG1ldGhvZCl7XG4gIGFwcFttZXRob2RdID0gZnVuY3Rpb24ocGF0aCl7XG4gICAgaWYgKG1ldGhvZCA9PT0gJ2dldCcgJiYgYXJndW1lbnRzLmxlbmd0aCA9PT0gMSkge1xuICAgICAgLy8gYXBwLmdldChzZXR0aW5nKVxuICAgICAgcmV0dXJuIHRoaXMuc2V0KHBhdGgpO1xuICAgIH1cblxuICAgIHRoaXMubGF6eXJvdXRlcigpO1xuXG4gICAgdmFyIHJvdXRlID0gdGhpcy5fcm91dGVyLnJvdXRlKHBhdGgpO1xuICAgIHJvdXRlW21ldGhvZF0uYXBwbHkocm91dGUsIHNsaWNlLmNhbGwoYXJndW1lbnRzLCAxKSk7XG4gICAgcmV0dXJuIHRoaXM7XG4gIH07XG59KTtcblxuLyoqXG4gKiBTcGVjaWFsLWNhc2VkIFwiYWxsXCIgbWV0aG9kLCBhcHBseWluZyB0aGUgZ2l2ZW4gcm91dGUgYHBhdGhgLFxuICogbWlkZGxld2FyZSwgYW5kIGNhbGxiYWNrIHRvIF9ldmVyeV8gSFRUUCBtZXRob2QuXG4gKlxuICogQHBhcmFtIHtTdHJpbmd9IHBhdGhcbiAqIEBwYXJhbSB7RnVuY3Rpb259IC4uLlxuICogQHJldHVybiB7YXBwfSBmb3IgY2hhaW5pbmdcbiAqIEBwdWJsaWNcbiAqL1xuXG5hcHAuYWxsID0gZnVuY3Rpb24gYWxsKHBhdGgpIHtcbiAgdGhpcy5sYXp5cm91dGVyKCk7XG5cbiAgdmFyIHJvdXRlID0gdGhpcy5fcm91dGVyLnJvdXRlKHBhdGgpO1xuICB2YXIgYXJncyA9IHNsaWNlLmNhbGwoYXJndW1lbnRzLCAxKTtcblxuICBmb3IgKHZhciBpID0gMDsgaSA8IG1ldGhvZHMubGVuZ3RoOyBpKyspIHtcbiAgICByb3V0ZVttZXRob2RzW2ldXS5hcHBseShyb3V0ZSwgYXJncyk7XG4gIH1cblxuICByZXR1cm4gdGhpcztcbn07XG5cbi8vIGRlbCAtPiBkZWxldGUgYWxpYXNcblxuYXBwLmRlbCA9IGRlcHJlY2F0ZS5mdW5jdGlvbihhcHAuZGVsZXRlLCAnYXBwLmRlbDogVXNlIGFwcC5kZWxldGUgaW5zdGVhZCcpO1xuXG4vKipcbiAqIFJlbmRlciB0aGUgZ2l2ZW4gdmlldyBgbmFtZWAgbmFtZSB3aXRoIGBvcHRpb25zYFxuICogYW5kIGEgY2FsbGJhY2sgYWNjZXB0aW5nIGFuIGVycm9yIGFuZCB0aGVcbiAqIHJlbmRlcmVkIHRlbXBsYXRlIHN0cmluZy5cbiAqXG4gKiBFeGFtcGxlOlxuICpcbiAqICAgIGFwcC5yZW5kZXIoJ2VtYWlsJywgeyBuYW1lOiAnVG9iaScgfSwgZnVuY3Rpb24oZXJyLCBodG1sKXtcbiAqICAgICAgLy8gLi4uXG4gKiAgICB9KVxuICpcbiAqIEBwYXJhbSB7U3RyaW5nfSBuYW1lXG4gKiBAcGFyYW0ge09iamVjdHxGdW5jdGlvbn0gb3B0aW9ucyBvciBmblxuICogQHBhcmFtIHtGdW5jdGlvbn0gY2FsbGJhY2tcbiAqIEBwdWJsaWNcbiAqL1xuXG5hcHAucmVuZGVyID0gZnVuY3Rpb24gcmVuZGVyKG5hbWUsIG9wdGlvbnMsIGNhbGxiYWNrKSB7XG4gIHZhciBjYWNoZSA9IHRoaXMuY2FjaGU7XG4gIHZhciBkb25lID0gY2FsbGJhY2s7XG4gIHZhciBlbmdpbmVzID0gdGhpcy5lbmdpbmVzO1xuICB2YXIgb3B0cyA9IG9wdGlvbnM7XG4gIHZhciByZW5kZXJPcHRpb25zID0ge307XG4gIHZhciB2aWV3O1xuXG4gIC8vIHN1cHBvcnQgY2FsbGJhY2sgZnVuY3Rpb24gYXMgc2Vjb25kIGFyZ1xuICBpZiAodHlwZW9mIG9wdGlvbnMgPT09ICdmdW5jdGlvbicpIHtcbiAgICBkb25lID0gb3B0aW9ucztcbiAgICBvcHRzID0ge307XG4gIH1cblxuICAvLyBtZXJnZSBhcHAubG9jYWxzXG4gIG1lcmdlKHJlbmRlck9wdGlvbnMsIHRoaXMubG9jYWxzKTtcblxuICAvLyBtZXJnZSBvcHRpb25zLl9sb2NhbHNcbiAgaWYgKG9wdHMuX2xvY2Fscykge1xuICAgIG1lcmdlKHJlbmRlck9wdGlvbnMsIG9wdHMuX2xvY2Fscyk7XG4gIH1cblxuICAvLyBtZXJnZSBvcHRpb25zXG4gIG1lcmdlKHJlbmRlck9wdGlvbnMsIG9wdHMpO1xuXG4gIC8vIHNldCAuY2FjaGUgdW5sZXNzIGV4cGxpY2l0bHkgcHJvdmlkZWRcbiAgaWYgKHJlbmRlck9wdGlvbnMuY2FjaGUgPT0gbnVsbCkge1xuICAgIHJlbmRlck9wdGlvbnMuY2FjaGUgPSB0aGlzLmVuYWJsZWQoJ3ZpZXcgY2FjaGUnKTtcbiAgfVxuXG4gIC8vIHByaW1lZCBjYWNoZVxuICBpZiAocmVuZGVyT3B0aW9ucy5jYWNoZSkge1xuICAgIHZpZXcgPSBjYWNoZVtuYW1lXTtcbiAgfVxuXG4gIC8vIHZpZXdcbiAgaWYgKCF2aWV3KSB7XG4gICAgdmFyIFZpZXcgPSB0aGlzLmdldCgndmlldycpO1xuXG4gICAgdmlldyA9IG5ldyBWaWV3KG5hbWUsIHtcbiAgICAgIGRlZmF1bHRFbmdpbmU6IHRoaXMuZ2V0KCd2aWV3IGVuZ2luZScpLFxuICAgICAgcm9vdDogdGhpcy5nZXQoJ3ZpZXdzJyksXG4gICAgICBlbmdpbmVzOiBlbmdpbmVzXG4gICAgfSk7XG5cbiAgICBpZiAoIXZpZXcucGF0aCkge1xuICAgICAgdmFyIGRpcnMgPSBBcnJheS5pc0FycmF5KHZpZXcucm9vdCkgJiYgdmlldy5yb290Lmxlbmd0aCA+IDFcbiAgICAgICAgPyAnZGlyZWN0b3JpZXMgXCInICsgdmlldy5yb290LnNsaWNlKDAsIC0xKS5qb2luKCdcIiwgXCInKSArICdcIiBvciBcIicgKyB2aWV3LnJvb3Rbdmlldy5yb290Lmxlbmd0aCAtIDFdICsgJ1wiJ1xuICAgICAgICA6ICdkaXJlY3RvcnkgXCInICsgdmlldy5yb290ICsgJ1wiJ1xuICAgICAgdmFyIGVyciA9IG5ldyBFcnJvcignRmFpbGVkIHRvIGxvb2t1cCB2aWV3IFwiJyArIG5hbWUgKyAnXCIgaW4gdmlld3MgJyArIGRpcnMpO1xuICAgICAgZXJyLnZpZXcgPSB2aWV3O1xuICAgICAgcmV0dXJuIGRvbmUoZXJyKTtcbiAgICB9XG5cbiAgICAvLyBwcmltZSB0aGUgY2FjaGVcbiAgICBpZiAocmVuZGVyT3B0aW9ucy5jYWNoZSkge1xuICAgICAgY2FjaGVbbmFtZV0gPSB2aWV3O1xuICAgIH1cbiAgfVxuXG4gIC8vIHJlbmRlclxuICB0cnlSZW5kZXIodmlldywgcmVuZGVyT3B0aW9ucywgZG9uZSk7XG59O1xuXG4vKipcbiAqIExpc3RlbiBmb3IgY29ubmVjdGlvbnMuXG4gKlxuICogQSBub2RlIGBodHRwLlNlcnZlcmAgaXMgcmV0dXJuZWQsIHdpdGggdGhpc1xuICogYXBwbGljYXRpb24gKHdoaWNoIGlzIGEgYEZ1bmN0aW9uYCkgYXMgaXRzXG4gKiBjYWxsYmFjay4gSWYgeW91IHdpc2ggdG8gY3JlYXRlIGJvdGggYW4gSFRUUFxuICogYW5kIEhUVFBTIHNlcnZlciB5b3UgbWF5IGRvIHNvIHdpdGggdGhlIFwiaHR0cFwiXG4gKiBhbmQgXCJodHRwc1wiIG1vZHVsZXMgYXMgc2hvd24gaGVyZTpcbiAqXG4gKiAgICB2YXIgaHR0cCA9IHJlcXVpcmUoJ2h0dHAnKVxuICogICAgICAsIGh0dHBzID0gcmVxdWlyZSgnaHR0cHMnKVxuICogICAgICAsIGV4cHJlc3MgPSByZXF1aXJlKCdleHByZXNzJylcbiAqICAgICAgLCBhcHAgPSBleHByZXNzKCk7XG4gKlxuICogICAgaHR0cC5jcmVhdGVTZXJ2ZXIoYXBwKS5saXN0ZW4oODApO1xuICogICAgaHR0cHMuY3JlYXRlU2VydmVyKHsgLi4uIH0sIGFwcCkubGlzdGVuKDQ0Myk7XG4gKlxuICogQHJldHVybiB7aHR0cC5TZXJ2ZXJ9XG4gKiBAcHVibGljXG4gKi9cblxuYXBwLmxpc3RlbiA9IGZ1bmN0aW9uIGxpc3RlbigpIHtcbiAgdmFyIHNlcnZlciA9IGh0dHAuY3JlYXRlU2VydmVyKHRoaXMpO1xuICByZXR1cm4gc2VydmVyLmxpc3Rlbi5hcHBseShzZXJ2ZXIsIGFyZ3VtZW50cyk7XG59O1xuXG4vKipcbiAqIExvZyBlcnJvciB1c2luZyBjb25zb2xlLmVycm9yLlxuICpcbiAqIEBwYXJhbSB7RXJyb3J9IGVyclxuICogQHByaXZhdGVcbiAqL1xuXG5mdW5jdGlvbiBsb2dlcnJvcihlcnIpIHtcbiAgLyogaXN0YW5idWwgaWdub3JlIG5leHQgKi9cbiAgaWYgKHRoaXMuZ2V0KCdlbnYnKSAhPT0gJ3Rlc3QnKSBjb25zb2xlLmVycm9yKGVyci5zdGFjayB8fCBlcnIudG9TdHJpbmcoKSk7XG59XG5cbi8qKlxuICogVHJ5IHJlbmRlcmluZyBhIHZpZXcuXG4gKiBAcHJpdmF0ZVxuICovXG5cbmZ1bmN0aW9uIHRyeVJlbmRlcih2aWV3LCBvcHRpb25zLCBjYWxsYmFjaykge1xuICB0cnkge1xuICAgIHZpZXcucmVuZGVyKG9wdGlvbnMsIGNhbGxiYWNrKTtcbiAgfSBjYXRjaCAoZXJyKSB7XG4gICAgY2FsbGJhY2soZXJyKTtcbiAgfVxufVxuIl0sIm5hbWVzIjpbImZpbmFsaGFuZGxlciIsIlJvdXRlciIsIm1ldGhvZHMiLCJtaWRkbGV3YXJlIiwicXVlcnkiLCJkZWJ1ZyIsIlZpZXciLCJodHRwIiwiY29tcGlsZUVUYWciLCJjb21waWxlUXVlcnlQYXJzZXIiLCJjb21waWxlVHJ1c3QiLCJkZXByZWNhdGUiLCJmbGF0dGVuIiwibWVyZ2UiLCJyZXNvbHZlIiwic2V0UHJvdG90eXBlT2YiLCJoYXNPd25Qcm9wZXJ0eSIsIk9iamVjdCIsInByb3RvdHlwZSIsInNsaWNlIiwiQXJyYXkiLCJhcHAiLCJtb2R1bGUiLCJleHBvcnRzIiwidHJ1c3RQcm94eURlZmF1bHRTeW1ib2wiLCJsb2dlcnJvciIsImVyciIsInRoaXMiLCJnZXQiLCJjb25zb2xlIiwiZXJyb3IiLCJzdGFjayIsInRvU3RyaW5nIiwiaW5pdCIsImNhY2hlIiwiZW5naW5lcyIsInNldHRpbmdzIiwiZGVmYXVsdENvbmZpZ3VyYXRpb24iLCJlbnYiLCJlbmFibGUiLCJzZXQiLCJkZWZpbmVQcm9wZXJ0eSIsImNvbmZpZ3VyYWJsZSIsInZhbHVlIiwib24iLCJwYXJlbnQiLCJyZXF1ZXN0IiwicmVzcG9uc2UiLCJsb2NhbHMiLCJjcmVhdGUiLCJtb3VudHBhdGgiLCJFcnJvciIsImxhenlyb3V0ZXIiLCJfcm91dGVyIiwiY2FzZVNlbnNpdGl2ZSIsImVuYWJsZWQiLCJzdHJpY3QiLCJ1c2UiLCJoYW5kbGUiLCJyZXEiLCJyZXMiLCJjYWxsYmFjayIsInJvdXRlciIsImRvbmUiLCJvbmVycm9yIiwiYmluZCIsImZuIiwib2Zmc2V0IiwicGF0aCIsImFyZyIsImlzQXJyYXkiLCJsZW5ndGgiLCJmbnMiLCJjYWxsIiwiYXJndW1lbnRzIiwiVHlwZUVycm9yIiwiZm9yRWFjaCIsIm5leHQiLCJvcmlnIiwiZW1pdCIsInJvdXRlIiwiZW5naW5lIiwiZXh0IiwiZXh0ZW5zaW9uIiwicGFyYW0iLCJuYW1lIiwiaSIsInNldHRpbmciLCJ2YWwiLCJnZXRQcm90b3R5cGVPZiIsIkJvb2xlYW4iLCJkaXNhYmxlZCIsImRpc2FibGUiLCJtZXRob2QiLCJhcHBseSIsImFsbCIsImFyZ3MiLCJkZWwiLCJmdW5jdGlvbiIsImRlbGV0ZSIsInJlbmRlciIsIm9wdGlvbnMiLCJ2aWV3Iiwib3B0cyIsInJlbmRlck9wdGlvbnMiLCJfbG9jYWxzIiwiZGVmYXVsdEVuZ2luZSIsInJvb3QiLCJkaXJzIiwiam9pbiIsInRyeVJlbmRlciIsImxpc3RlbiIsInNlcnZlciIsImNyZWF0ZVNlcnZlciJdLCJzb3VyY2VSb290IjoiIn0=