"use strict";exports.id="mod-node_modules_qs_lib_stringify_js-41273ac1",exports.ids=["mod-node_modules_qs_lib_stringify_js-41273ac1"],exports.modules={"./node_modules/qs/lib/stringify.js":(e,t,r)=>{var o=r("./node_modules/side-channel/index.js"),n=r("./node_modules/qs/lib/utils.js"),i=r("./node_modules/qs/lib/formats.js"),l=Object.prototype.hasOwnProperty,a={brackets:function(e){return e+"[]"},comma:"comma",indices:function(e,t){return e+"["+t+"]"},repeat:function(e){return e}},s=Array.isArray,f=String.prototype.split,c=Array.prototype.push,u=function(e,t){c.apply(e,s(t)?t:[t])},d=Date.prototype.toISOString,p=i.default,y={addQueryPrefix:!1,allowDots:!1,charset:"utf-8",charsetSentinel:!1,delimiter:"&",encode:!0,encoder:n.encode,encodeValuesOnly:!1,format:p,formatter:i.formatters[p],indices:!1,serializeDate:function(e){return d.call(e)},skipNulls:!1,strictNullHandling:!1},m={},v=function e(t,r,i,l,a,c,d,p,v,h,b,g,w,D,j,_){for(var k,N=t,x=_,O=0,S=!1;void 0!==(x=x.get(m))&&!S;){var T=x.get(t);if(O+=1,void 0!==T){if(T===O)throw new RangeError("Cyclic object value");S=!0}void 0===x.get(m)&&(O=0)}if("function"==typeof p?N=p(r,N):N instanceof Date?N=b(N):"comma"===i&&s(N)&&(N=n.maybeMap(N,(function(e){return e instanceof Date?b(e):e}))),null===N){if(a)return d&&!D?d(r,y.encoder,j,"key",g):r;N=""}if("string"==typeof(k=N)||"number"==typeof k||"boolean"==typeof k||"symbol"==typeof k||"bigint"==typeof k||n.isBuffer(N)){if(d){var E=D?r:d(r,y.encoder,j,"key",g);if("comma"===i&&D){for(var P=f.call(String(N),","),z="",H=0;H<P.length;++H)z+=(0===H?"":",")+w(d(P[H],y.encoder,j,"value",g));return[w(E)+(l&&s(N)&&1===P.length?"[]":"")+"="+z]}return[w(E)+"="+w(d(N,y.encoder,j,"value",g))]}return[w(r)+"="+w(String(N))]}var Q,V=[];if(void 0===N)return V;if("comma"===i&&s(N))Q=[{value:N.length>0?N.join(",")||null:void 0}];else if(s(p))Q=p;else{var q=Object.keys(N);Q=v?q.sort(v):q}for(var R=l&&s(N)&&1===N.length?r+"[]":r,A=0;A<Q.length;++A){var B=Q[A],C="object"==typeof B&&void 0!==B.value?B.value:N[B];if(!c||null!==C){var F=s(N)?"function"==typeof i?i(R,B):R:R+(h?"."+B:"["+B+"]");_.set(t,O);var I=o();I.set(m,_),u(V,e(C,F,i,l,a,c,d,p,v,h,b,g,w,D,j,I))}}return V};e.exports=function(e,t){var r,n=e,f=function(e){if(!e)return y;if(null!==e.encoder&&void 0!==e.encoder&&"function"!=typeof e.encoder)throw new TypeError("Encoder has to be a function.");var t=e.charset||y.charset;if(void 0!==e.charset&&"utf-8"!==e.charset&&"iso-8859-1"!==e.charset)throw new TypeError("The charset option must be either utf-8, iso-8859-1, or undefined");var r=i.default;if(void 0!==e.format){if(!l.call(i.formatters,e.format))throw new TypeError("Unknown format option provided.");r=e.format}var o=i.formatters[r],n=y.filter;return("function"==typeof e.filter||s(e.filter))&&(n=e.filter),{addQueryPrefix:"boolean"==typeof e.addQueryPrefix?e.addQueryPrefix:y.addQueryPrefix,allowDots:void 0===e.allowDots?y.allowDots:!!e.allowDots,charset:t,charsetSentinel:"boolean"==typeof e.charsetSentinel?e.charsetSentinel:y.charsetSentinel,delimiter:void 0===e.delimiter?y.delimiter:e.delimiter,encode:"boolean"==typeof e.encode?e.encode:y.encode,encoder:"function"==typeof e.encoder?e.encoder:y.encoder,encodeValuesOnly:"boolean"==typeof e.encodeValuesOnly?e.encodeValuesOnly:y.encodeValuesOnly,filter:n,format:r,formatter:o,serializeDate:"function"==typeof e.serializeDate?e.serializeDate:y.serializeDate,skipNulls:"boolean"==typeof e.skipNulls?e.skipNulls:y.skipNulls,sort:"function"==typeof e.sort?e.sort:null,strictNullHandling:"boolean"==typeof e.strictNullHandling?e.strictNullHandling:y.strictNullHandling}}(t);"function"==typeof f.filter?n=(0,f.filter)("",n):s(f.filter)&&(r=f.filter);var c,d=[];if("object"!=typeof n||null===n)return"";c=t&&t.arrayFormat in a?t.arrayFormat:t&&"indices"in t?t.indices?"indices":"repeat":"indices";var p=a[c];if(t&&"commaRoundTrip"in t&&"boolean"!=typeof t.commaRoundTrip)throw new TypeError("`commaRoundTrip` must be a boolean, or absent");var m="comma"===p&&t&&t.commaRoundTrip;r||(r=Object.keys(n)),f.sort&&r.sort(f.sort);for(var h=o(),b=0;b<r.length;++b){var g=r[b];f.skipNulls&&null===n[g]||u(d,v(n[g],g,p,m,f.strictNullHandling,f.skipNulls,f.encode?f.encoder:null,f.filter,f.sort,f.allowDots,f.serializeDate,f.format,f.formatter,f.encodeValuesOnly,f.charset,h))}var w=d.join(f.delimiter),D=!0===f.addQueryPrefix?"?":"";return f.charsetSentinel&&("iso-8859-1"===f.charset?D+="utf8=%26%2310003%3B&":D+="utf8=%E2%9C%93&"),w.length>0?D+w:""}}};
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoibW9kLW5vZGVfbW9kdWxlc19xc19saWJfc3RyaW5naWZ5X2pzLTQxMjczYWMxLmpzIiwibWFwcGluZ3MiOiJzTUFFQSxJQUFJQSxFQUFpQixFQUFRLHdDQUN6QkMsRUFBUSxFQUFRLGtDQUNoQkMsRUFBVSxFQUFRLG9DQUNsQkMsRUFBTUMsT0FBT0MsVUFBVUMsZUFFdkJDLEVBQXdCLENBQ3hCQyxTQUFVLFNBQWtCQyxHQUN4QixPQUFPQSxFQUFTLElBQ3BCLEVBQ0FDLE1BQU8sUUFDUEMsUUFBUyxTQUFpQkYsRUFBUUcsR0FDOUIsT0FBT0gsRUFBUyxJQUFNRyxFQUFNLEdBQ2hDLEVBQ0FDLE9BQVEsU0FBZ0JKLEdBQ3BCLE9BQU9BLENBQ1gsR0FHQUssRUFBVUMsTUFBTUQsUUFDaEJFLEVBQVFDLE9BQU9aLFVBQVVXLE1BQ3pCRSxFQUFPSCxNQUFNVixVQUFVYSxLQUN2QkMsRUFBYyxTQUFVQyxFQUFLQyxHQUM3QkgsRUFBS0ksTUFBTUYsRUFBS04sRUFBUU8sR0FBZ0JBLEVBQWUsQ0FBQ0EsR0FDNUQsRUFFSUUsRUFBUUMsS0FBS25CLFVBQVVvQixZQUV2QkMsRUFBZ0J4QixFQUFpQixRQUNqQ3lCLEVBQVcsQ0FDWEMsZ0JBQWdCLEVBQ2hCQyxXQUFXLEVBQ1hDLFFBQVMsUUFDVEMsaUJBQWlCLEVBQ2pCQyxVQUFXLElBQ1hDLFFBQVEsRUFDUkMsUUFBU2pDLEVBQU1nQyxPQUNmRSxrQkFBa0IsRUFDbEJDLE9BQVFWLEVBQ1JXLFVBQVduQyxFQUFRb0MsV0FBV1osR0FFOUJmLFNBQVMsRUFDVDRCLGNBQWUsU0FBdUJDLEdBQ2xDLE9BQU9qQixFQUFNa0IsS0FBS0QsRUFDdEIsRUFDQUUsV0FBVyxFQUNYQyxvQkFBb0IsR0FXcEJDLEVBQVcsQ0FBQyxFQUVaQyxFQUFZLFNBQVNBLEVBQ3JCQyxFQUNBckMsRUFDQXNDLEVBQ0FDLEVBQ0FMLEVBQ0FELEVBQ0FSLEVBQ0FlLEVBQ0FDLEVBQ0FyQixFQUNBVSxFQUNBSCxFQUNBQyxFQUNBRixFQUNBTCxFQUNBcUIs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RUFDZEEsRUFBS3BFLFFBQVUsVUFBWSxTQUUzQixVQUdsQixJQUFJb0MsRUFBc0J4QyxFQUFzQjRFLEdBQ2hELEdBQUlKLEdBQVEsbUJBQW9CQSxHQUF1QyxrQkFBeEJBLEVBQUsvQixlQUNoRCxNQUFNLElBQUlpQyxVQUFVLGlEQUV4QixJQUFJakMsRUFBeUMsVUFBeEJELEdBQW1DZ0MsR0FBUUEsRUFBSy9CLGVBRWhFb0IsSUFDREEsRUFBVWhFLE9BQU9tRSxLQUFLbEIsSUFHdEIyQixFQUFROUIsTUFDUmtCLEVBQVFsQixLQUFLOEIsRUFBUTlCLE1BSXpCLElBREEsSUFBSUMsRUFBY25ELElBQ1RrRSxFQUFJLEVBQUdBLEVBQUlFLEVBQVFELFNBQVVELEVBQUcsQ0FDckMsSUFBSXRELEVBQU13RCxFQUFRRixHQUVkYyxFQUFRdEMsV0FBMEIsT0FBYlcsRUFBSXpDLElBRzdCTyxFQUFZb0QsRUFBTTFCLEVBQ2RRLEVBQUl6QyxHQUNKQSxFQUNBbUMsRUFDQUMsRUFDQWdDLEVBQVFyQyxtQkFDUnFDLEVBQVF0QyxVQUNSc0MsRUFBUS9DLE9BQVMrQyxFQUFROUMsUUFBVSxLQUNuQzhDLEVBQVEvQixPQUNSK0IsRUFBUTlCLEtBQ1I4QixFQUFRbkQsVUFDUm1ELEVBQVF6QyxjQUNSeUMsRUFBUTVDLE9BQ1I0QyxFQUFRM0MsVUFDUjJDLEVBQVE3QyxpQkFDUjZDLEVBQVFsRCxRQUNScUIsR0FFUixDQUVBLElBQUlpQyxFQUFTYixFQUFLRCxLQUFLVSxFQUFRaEQsV0FDM0J2QixHQUFvQyxJQUEzQnVFLEVBQVFwRCxlQUEwQixJQUFNLEdBWXJELE9BVklvRCxFQUFRakQsa0JBQ2dCLGVBQXBCaUQsRUFBUWxELFFBRVJyQixHQUFVLHVCQUdWQSxHQUFVLG1CQUlYMkUsRUFBT2pCLE9BQVMsRUFBSTFELEVBQVMyRSxFQUFTLEVBQ2pELEMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9AYmR4eWd5L2V4cHJlc3Mtd2VicGFjay8uL25vZGVfbW9kdWxlcy9xcy9saWIvc3RyaW5naWZ5LmpzIl0sInNvdXJjZXNDb250ZW50IjpbIid1c2Ugc3RyaWN0JztcblxudmFyIGdldFNpZGVDaGFubmVsID0gcmVxdWlyZSgnc2lkZS1jaGFubmVsJyk7XG52YXIgdXRpbHMgPSByZXF1aXJlKCcuL3V0aWxzJyk7XG52YXIgZm9ybWF0cyA9IHJlcXVpcmUoJy4vZm9ybWF0cycpO1xudmFyIGhhcyA9IE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHk7XG5cbnZhciBhcnJheVByZWZpeEdlbmVyYXRvcnMgPSB7XG4gICAgYnJhY2tldHM6IGZ1bmN0aW9uIGJyYWNrZXRzKHByZWZpeCkge1xuICAgICAgICByZXR1cm4gcHJlZml4ICsgJ1tdJztcbiAgICB9LFxuICAgIGNvbW1hOiAnY29tbWEnLFxuICAgIGluZGljZXM6IGZ1bmN0aW9uIGluZGljZXMocHJlZml4LCBrZXkpIHtcbiAgICAgICAgcmV0dXJuIHByZWZpeCArICdbJyArIGtleSArICddJztcbiAgICB9LFxuICAgIHJlcGVhdDogZnVuY3Rpb24gcmVwZWF0KHByZWZpeCkge1xuICAgICAgICByZXR1cm4gcHJlZml4O1xuICAgIH1cbn07XG5cbnZhciBpc0FycmF5ID0gQXJyYXkuaXNBcnJheTtcbnZhciBzcGxpdCA9IFN0cmluZy5wcm90b3R5cGUuc3BsaXQ7XG52YXIgcHVzaCA9IEFycmF5LnByb3RvdHlwZS5wdXNoO1xudmFyIHB1c2hUb0FycmF5ID0gZnVuY3Rpb24gKGFyciwgdmFsdWVPckFycmF5KSB7XG4gICAgcHVzaC5hcHBseShhcnIsIGlzQXJyYXkodmFsdWVPckFycmF5KSA/IHZhbHVlT3JBcnJheSA6IFt2YWx1ZU9yQXJyYXldKTtcbn07XG5cbnZhciB0b0lTTyA9IERhdGUucHJvdG90eXBlLnRvSVNPU3RyaW5nO1xuXG52YXIgZGVmYXVsdEZvcm1hdCA9IGZvcm1hdHNbJ2RlZmF1bHQnXTtcbnZhciBkZWZhdWx0cyA9IHtcbiAgICBhZGRRdWVyeVByZWZpeDogZmFsc2UsXG4gICAgYWxsb3dEb3RzOiBmYWxzZSxcbiAgICBjaGFyc2V0OiAndXRmLTgnLFxuICAgIGNoYXJzZXRTZW50aW5lbDogZmFsc2UsXG4gICAgZGVsaW1pdGVyOiAnJicsXG4gICAgZW5jb2RlOiB0cnVlLFxuICAgIGVuY29kZXI6IHV0aWxzLmVuY29kZSxcbiAgICBlbmNvZGVWYWx1ZXNPbmx5OiBmYWxzZSxcbiAgICBmb3JtYXQ6IGRlZmF1bHRGb3JtYXQsXG4gICAgZm9ybWF0dGVyOiBmb3JtYXRzLmZvcm1hdHRlcnNbZGVmYXVsdEZvcm1hdF0sXG4gICAgLy8gZGVwcmVjYXRlZFxuICAgIGluZGljZXM6IGZhbHNlLFxuICAgIHNlcmlhbGl6ZURhdGU6IGZ1bmN0aW9uIHNlcmlhbGl6ZURhdGUoZGF0ZSkge1xuICAgICAgICByZXR1cm4gdG9JU08uY2FsbChkYXRlKTtcbiAgICB9LFxuICAgIHNraXBOdWxsczogZmFsc2UsXG4gICAgc3RyaWN0TnVsbEhhbmRsaW5nOiBmYWxzZVxufTtcblxudmFyIGlzTm9uTnVsbGlzaFByaW1pdGl2ZSA9IGZ1bmN0aW9uIGlzTm9uTnVsbGlzaFByaW1pdGl2ZSh2KSB7XG4gICAgcmV0dXJuIHR5cGVvZiB2ID09PSAnc3RyaW5nJ1xuICAgICAgICB8fCB0eXBlb2YgdiA9PT0gJ251bWJlcidcbiAgICAgICAgfHwgdHlwZW9mIHYgPT09ICdib29sZWFuJ1xuICAgICAgICB8fCB0eXBlb2YgdiA9PT0gJ3N5bWJvbCdcbiAgICAgICAgfHwgdHlwZW9mIHYgPT09ICdiaWdpbnQnO1xufTtcblxudmFyIHNlbnRpbmVsID0ge307XG5cbnZhciBzdHJpbmdpZnkgPSBmdW5jdGlvbiBzdHJpbmdpZnkoXG4gICAgb2JqZWN0LFxuICAgIHByZWZpeCxcbiAgICBnZW5lcmF0ZUFycmF5UHJlZml4LFxuICAgIGNvbW1hUm91bmRUcmlwLFxuICAgIHN0cmljdE51bGxIYW5kbGluZyxcbiAgICBza2lwTnVsbHMsXG4gICAgZW5jb2RlcixcbiAgICBmaWx0ZXIsXG4gICAgc29ydCxcbiAgICBhbGxvd0RvdHMsXG4gICAgc2VyaWFsaXplRGF0ZSxcbiAgICBmb3JtYXQsXG4gICAgZm9ybWF0dGVyLFxuICAgIGVuY29kZVZhbHVlc09ubHksXG4gICAgY2hhcnNldCxcbiAgICBzaWRlQ2hhbm5lbFxuKSB7XG4gICAgdmFyIG9iaiA9IG9iamVjdDtcblxuICAgIHZhciB0bXBTYyA9IHNpZGVDaGFubmVsO1xuICAgIHZhciBzdGVwID0gMDtcbiAgICB2YXIgZmluZEZsYWcgPSBmYWxzZTtcbiAgICB3aGlsZSAoKHRtcFNjID0gdG1wU2MuZ2V0KHNlbnRpbmVsKSkgIT09IHZvaWQgdW5kZWZpbmVkICYmICFmaW5kRmxhZykge1xuICAgICAgICAvLyBXaGVyZSBvYmplY3QgbGFzdCBhcHBlYXJlZCBpbiB0aGUgcmVmIHRyZWVcbiAgICAgICAgdmFyIHBvcyA9IHRtcFNjLmdldChvYmplY3QpO1xuICAgICAgICBzdGVwICs9IDE7XG4gICAgICAgIGlmICh0eXBlb2YgcG9zICE9PSAndW5kZWZpbmVkJykge1xuICAgICAgICAgICAgaWYgKHBvcyA9PT0gc3RlcCkge1xuICAgICAgICAgICAgICAgIHRocm93IG5ldyBSYW5nZUVycm9yKCdDeWNsaWMgb2JqZWN0IHZhbHVlJyk7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIGZpbmRGbGFnID0gdHJ1ZTsgLy8gQnJlYWsgd2hpbGVcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBpZiAodHlwZW9mIHRtcFNjLmdldChzZW50aW5lbCkgPT09ICd1bmRlZmluZWQnKSB7XG4gICAgICAgICAgICBzdGVwID0gMDtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIGlmICh0eXBlb2YgZmlsdGVyID09PSAnZnVuY3Rpb24nKSB7XG4gICAgICAgIG9iaiA9IGZpbHRlcihwcmVmaXgsIG9iaik7XG4gICAgfSBlbHNlIGlmIChvYmogaW5zdGFuY2VvZiBEYXRlKSB7XG4gICAgICAgIG9iaiA9IHNlcmlhbGl6ZURhdGUob2JqKTtcbiAgICB9IGVsc2UgaWYgKGdlbmVyYXRlQXJyYXlQcmVmaXggPT09ICdjb21tYScgJiYgaXNBcnJheShvYmopKSB7XG4gICAgICAgIG9iaiA9IHV0aWxzLm1heWJlTWFwKG9iaiwgZnVuY3Rpb24gKHZhbHVlKSB7XG4gICAgICAgICAgICBpZiAodmFsdWUgaW5zdGFuY2VvZiBEYXRlKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHNlcmlhbGl6ZURhdGUodmFsdWUpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIHZhbHVlO1xuICAgICAgICB9KTtcbiAgICB9XG5cbiAgICBpZiAob2JqID09PSBudWxsKSB7XG4gICAgICAgIGlmIChzdHJpY3ROdWxsSGFuZGxpbmcpIHtcbiAgICAgICAgICAgIHJldHVybiBlbmNvZGVyICYmICFlbmNvZGVWYWx1ZXNPbmx5ID8gZW5jb2RlcihwcmVmaXgsIGRlZmF1bHRzLmVuY29kZXIsIGNoYXJzZXQsICdrZXknLCBmb3JtYXQpIDogcHJlZml4O1xuICAgICAgICB9XG5cbiAgICAgICAgb2JqID0gJyc7XG4gICAgfVxuXG4gICAgaWYgKGlzTm9uTnVsbGlzaFByaW1pdGl2ZShvYmopIHx8IHV0aWxzLmlzQnVmZmVyKG9iaikpIHtcbiAgICAgICAgaWYgKGVuY29kZXIpIHtcbiAgICAgICAgICAgIHZhciBrZXlWYWx1ZSA9IGVuY29kZVZhbHVlc09ubHkgPyBwcmVmaXggOiBlbmNvZGVyKHByZWZpeCwgZGVmYXVsdHMuZW5jb2RlciwgY2hhcnNldCwgJ2tleScsIGZvcm1hdCk7XG4gICAgICAgICAgICBpZiAoZ2VuZXJhdGVBcnJheVByZWZpeCA9PT0gJ2NvbW1hJyAmJiBlbmNvZGVWYWx1ZXNPbmx5KSB7XG4gICAgICAgICAgICAgICAgdmFyIHZhbHVlc0FycmF5ID0gc3BsaXQuY2FsbChTdHJpbmcob2JqKSwgJywnKTtcbiAgICAgICAgICAgICAgICB2YXIgdmFsdWVzSm9pbmVkID0gJyc7XG4gICAgICAgICAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCB2YWx1ZXNBcnJheS5sZW5ndGg7ICsraSkge1xuICAgICAgICAgICAgICAgICAgICB2YWx1ZXNKb2luZWQgKz0gKGkgPT09IDAgPyAnJyA6ICcsJykgKyBmb3JtYXR0ZXIoZW5jb2Rlcih2YWx1ZXNBcnJheVtpXSwgZGVmYXVsdHMuZW5jb2RlciwgY2hhcnNldCwgJ3ZhbHVlJywgZm9ybWF0KSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHJldHVybiBbZm9ybWF0dGVyKGtleVZhbHVlKSArIChjb21tYVJvdW5kVHJpcCAmJiBpc0FycmF5KG9iaikgJiYgdmFsdWVzQXJyYXkubGVuZ3RoID09PSAxID8gJ1tdJyA6ICcnKSArICc9JyArIHZhbHVlc0pvaW5lZF07XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gW2Zvcm1hdHRlcihrZXlWYWx1ZSkgKyAnPScgKyBmb3JtYXR0ZXIoZW5jb2RlcihvYmosIGRlZmF1bHRzLmVuY29kZXIsIGNoYXJzZXQsICd2YWx1ZScsIGZvcm1hdCkpXTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gW2Zvcm1hdHRlcihwcmVmaXgpICsgJz0nICsgZm9ybWF0dGVyKFN0cmluZyhvYmopKV07XG4gICAgfVxuXG4gICAgdmFyIHZhbHVlcyA9IFtdO1xuXG4gICAgaWYgKHR5cGVvZiBvYmogPT09ICd1bmRlZmluZWQnKSB7XG4gICAgICAgIHJldHVybiB2YWx1ZXM7XG4gICAgfVxuXG4gICAgdmFyIG9iaktleXM7XG4gICAgaWYgKGdlbmVyYXRlQXJyYXlQcmVmaXggPT09ICdjb21tYScgJiYgaXNBcnJheShvYmopKSB7XG4gICAgICAgIC8vIHdlIG5lZWQgdG8gam9pbiBlbGVtZW50cyBpblxuICAgICAgICBvYmpLZXlzID0gW3sgdmFsdWU6IG9iai5sZW5ndGggPiAwID8gb2JqLmpvaW4oJywnKSB8fCBudWxsIDogdm9pZCB1bmRlZmluZWQgfV07XG4gICAgfSBlbHNlIGlmIChpc0FycmF5KGZpbHRlcikpIHtcbiAgICAgICAgb2JqS2V5cyA9IGZpbHRlcjtcbiAgICB9IGVsc2Uge1xuICAgICAgICB2YXIga2V5cyA9IE9iamVjdC5rZXlzKG9iaik7XG4gICAgICAgIG9iaktleXMgPSBzb3J0ID8ga2V5cy5zb3J0KHNvcnQpIDoga2V5cztcbiAgICB9XG5cbiAgICB2YXIgYWRqdXN0ZWRQcmVmaXggPSBjb21tYVJvdW5kVHJpcCAmJiBpc0FycmF5KG9iaikgJiYgb2JqLmxlbmd0aCA9PT0gMSA/IHByZWZpeCArICdbXScgOiBwcmVmaXg7XG5cbiAgICBmb3IgKHZhciBqID0gMDsgaiA8IG9iaktleXMubGVuZ3RoOyArK2opIHtcbiAgICAgICAgdmFyIGtleSA9IG9iaktleXNbal07XG4gICAgICAgIHZhciB2YWx1ZSA9IHR5cGVvZiBrZXkgPT09ICdvYmplY3QnICYmIHR5cGVvZiBrZXkudmFsdWUgIT09ICd1bmRlZmluZWQnID8ga2V5LnZhbHVlIDogb2JqW2tleV07XG5cbiAgICAgICAgaWYgKHNraXBOdWxscyAmJiB2YWx1ZSA9PT0gbnVsbCkge1xuICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgIH1cblxuICAgICAgICB2YXIga2V5UHJlZml4ID0gaXNBcnJheShvYmopXG4gICAgICAgICAgICA/IHR5cGVvZiBnZW5lcmF0ZUFycmF5UHJlZml4ID09PSAnZnVuY3Rpb24nID8gZ2VuZXJhdGVBcnJheVByZWZpeChhZGp1c3RlZFByZWZpeCwga2V5KSA6IGFkanVzdGVkUHJlZml4XG4gICAgICAgICAgICA6IGFkanVzdGVkUHJlZml4ICsgKGFsbG93RG90cyA/ICcuJyArIGtleSA6ICdbJyArIGtleSArICddJyk7XG5cbiAgICAgICAgc2lkZUNoYW5uZWwuc2V0KG9iamVjdCwgc3RlcCk7XG4gICAgICAgIHZhciB2YWx1ZVNpZGVDaGFubmVsID0gZ2V0U2lkZUNoYW5uZWwoKTtcbiAgICAgICAgdmFsdWVTaWRlQ2hhbm5lbC5zZXQoc2VudGluZWwsIHNpZGVDaGFubmVsKTtcbiAgICAgICAgcHVzaFRvQXJyYXkodmFsdWVzLCBzdHJpbmdpZnkoXG4gICAgICAgICAgICB2YWx1ZSxcbiAgICAgICAgICAgIGtleVByZWZpeCxcbiAgICAgICAgICAgIGdlbmVyYXRlQXJyYXlQcmVmaXgsXG4gICAgICAgICAgICBjb21tYVJvdW5kVHJpcCxcbiAgICAgICAgICAgIHN0cmljdE51bGxIYW5kbGluZyxcbiAgICAgICAgICAgIHNraXBOdWxscyxcbiAgICAgICAgICAgIGVuY29kZXIsXG4gICAgICAgICAgICBmaWx0ZXIsXG4gICAgICAgICAgICBzb3J0LFxuICAgICAgICAgICAgYWxsb3dEb3RzLFxuICAgICAgICAgICAgc2VyaWFsaXplRGF0ZSxcbiAgICAgICAgICAgIGZvcm1hdCxcbiAgICAgICAgICAgIGZvcm1hdHRlcixcbiAgICAgICAgICAgIGVuY29kZVZhbHVlc09ubHksXG4gICAgICAgICAgICBjaGFyc2V0LFxuICAgICAgICAgICAgdmFsdWVTaWRlQ2hhbm5lbFxuICAgICAgICApKTtcbiAgICB9XG5cbiAgICByZXR1cm4gdmFsdWVzO1xufTtcblxudmFyIG5vcm1hbGl6ZVN0cmluZ2lmeU9wdGlvbnMgPSBmdW5jdGlvbiBub3JtYWxpemVTdHJpbmdpZnlPcHRpb25zKG9wdHMpIHtcbiAgICBpZiAoIW9wdHMpIHtcbiAgICAgICAgcmV0dXJuIGRlZmF1bHRzO1xuICAgIH1cblxuICAgIGlmIChvcHRzLmVuY29kZXIgIT09IG51bGwgJiYgdHlwZW9mIG9wdHMuZW5jb2RlciAhPT0gJ3VuZGVmaW5lZCcgJiYgdHlwZW9mIG9wdHMuZW5jb2RlciAhPT0gJ2Z1bmN0aW9uJykge1xuICAgICAgICB0aHJvdyBuZXcgVHlwZUVycm9yKCdFbmNvZGVyIGhhcyB0byBiZSBhIGZ1bmN0aW9uLicpO1xuICAgIH1cblxuICAgIHZhciBjaGFyc2V0ID0gb3B0cy5jaGFyc2V0IHx8IGRlZmF1bHRzLmNoYXJzZXQ7XG4gICAgaWYgKHR5cGVvZiBvcHRzLmNoYXJzZXQgIT09ICd1bmRlZmluZWQnICYmIG9wdHMuY2hhcnNldCAhPT0gJ3V0Zi04JyAmJiBvcHRzLmNoYXJzZXQgIT09ICdpc28tODg1OS0xJykge1xuICAgICAgICB0aHJvdyBuZXcgVHlwZUVycm9yKCdUaGUgY2hhcnNldCBvcHRpb24gbXVzdCBiZSBlaXRoZXIgdXRmLTgsIGlzby04ODU5LTEsIG9yIHVuZGVmaW5lZCcpO1xuICAgIH1cblxuICAgIHZhciBmb3JtYXQgPSBmb3JtYXRzWydkZWZhdWx0J107XG4gICAgaWYgKHR5cGVvZiBvcHRzLmZvcm1hdCAhPT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgICAgaWYgKCFoYXMuY2FsbChmb3JtYXRzLmZvcm1hdHRlcnMsIG9wdHMuZm9ybWF0KSkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IFR5cGVFcnJvcignVW5rbm93biBmb3JtYXQgb3B0aW9uIHByb3ZpZGVkLicpO1xuICAgICAgICB9XG4gICAgICAgIGZvcm1hdCA9IG9wdHMuZm9ybWF0O1xuICAgIH1cbiAgICB2YXIgZm9ybWF0dGVyID0gZm9ybWF0cy5mb3JtYXR0ZXJzW2Zvcm1hdF07XG5cbiAgICB2YXIgZmlsdGVyID0gZGVmYXVsdHMuZmlsdGVyO1xuICAgIGlmICh0eXBlb2Ygb3B0cy5maWx0ZXIgPT09ICdmdW5jdGlvbicgfHwgaXNBcnJheShvcHRzLmZpbHRlcikpIHtcbiAgICAgICAgZmlsdGVyID0gb3B0cy5maWx0ZXI7XG4gICAgfVxuXG4gICAgcmV0dXJuIHtcbiAgICAgICAgYWRkUXVlcnlQcmVmaXg6IHR5cGVvZiBvcHRzLmFkZFF1ZXJ5UHJlZml4ID09PSAnYm9vbGVhbicgPyBvcHRzLmFkZFF1ZXJ5UHJlZml4IDogZGVmYXVsdHMuYWRkUXVlcnlQcmVmaXgsXG4gICAgICAgIGFsbG93RG90czogdHlwZW9mIG9wdHMuYWxsb3dEb3RzID09PSAndW5kZWZpbmVkJyA/IGRlZmF1bHRzLmFsbG93RG90cyA6ICEhb3B0cy5hbGxvd0RvdHMsXG4gICAgICAgIGNoYXJzZXQ6IGNoYXJzZXQsXG4gICAgICAgIGNoYXJzZXRTZW50aW5lbDogdHlwZW9mIG9wdHMuY2hhcnNldFNlbnRpbmVsID09PSAnYm9vbGVhbicgPyBvcHRzLmNoYXJzZXRTZW50aW5lbCA6IGRlZmF1bHRzLmNoYXJzZXRTZW50aW5lbCxcbiAgICAgICAgZGVsaW1pdGVyOiB0eXBlb2Ygb3B0cy5kZWxpbWl0ZXIgPT09ICd1bmRlZmluZWQnID8gZGVmYXVsdHMuZGVsaW1pdGVyIDogb3B0cy5kZWxpbWl0ZXIsXG4gICAgICAgIGVuY29kZTogdHlwZW9mIG9wdHMuZW5jb2RlID09PSAnYm9vbGVhbicgPyBvcHRzLmVuY29kZSA6IGRlZmF1bHRzLmVuY29kZSxcbiAgICAgICAgZW5jb2RlcjogdHlwZW9mIG9wdHMuZW5jb2RlciA9PT0gJ2Z1bmN0aW9uJyA/IG9wdHMuZW5jb2RlciA6IGRlZmF1bHRzLmVuY29kZXIsXG4gICAgICAgIGVuY29kZVZhbHVlc09ubHk6IHR5cGVvZiBvcHRzLmVuY29kZVZhbHVlc09ubHkgPT09ICdib29sZWFuJyA/IG9wdHMuZW5jb2RlVmFsdWVzT25seSA6IGRlZmF1bHRzLmVuY29kZVZhbHVlc09ubHksXG4gICAgICAgIGZpbHRlcjogZmlsdGVyLFxuICAgICAgICBmb3JtYXQ6IGZvcm1hdCxcbiAgICAgICAgZm9ybWF0dGVyOiBmb3JtYXR0ZXIsXG4gICAgICAgIHNlcmlhbGl6ZURhdGU6IHR5cGVvZiBvcHRzLnNlcmlhbGl6ZURhdGUgPT09ICdmdW5jdGlvbicgPyBvcHRzLnNlcmlhbGl6ZURhdGUgOiBkZWZhdWx0cy5zZXJpYWxpemVEYXRlLFxuICAgICAgICBza2lwTnVsbHM6IHR5cGVvZiBvcHRzLnNraXBOdWxscyA9PT0gJ2Jvb2xlYW4nID8gb3B0cy5za2lwTnVsbHMgOiBkZWZhdWx0cy5za2lwTnVsbHMsXG4gICAgICAgIHNvcnQ6IHR5cGVvZiBvcHRzLnNvcnQgPT09ICdmdW5jdGlvbicgPyBvcHRzLnNvcnQgOiBudWxsLFxuICAgICAgICBzdHJpY3ROdWxsSGFuZGxpbmc6IHR5cGVvZiBvcHRzLnN0cmljdE51bGxIYW5kbGluZyA9PT0gJ2Jvb2xlYW4nID8gb3B0cy5zdHJpY3ROdWxsSGFuZGxpbmcgOiBkZWZhdWx0cy5zdHJpY3ROdWxsSGFuZGxpbmdcbiAgICB9O1xufTtcblxubW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbiAob2JqZWN0LCBvcHRzKSB7XG4gICAgdmFyIG9iaiA9IG9iamVjdDtcbiAgICB2YXIgb3B0aW9ucyA9IG5vcm1hbGl6ZVN0cmluZ2lmeU9wdGlvbnMob3B0cyk7XG5cbiAgICB2YXIgb2JqS2V5cztcbiAgICB2YXIgZmlsdGVyO1xuXG4gICAgaWYgKHR5cGVvZiBvcHRpb25zLmZpbHRlciA9PT0gJ2Z1bmN0aW9uJykge1xuICAgICAgICBmaWx0ZXIgPSBvcHRpb25zLmZpbHRlcjtcbiAgICAgICAgb2JqID0gZmlsdGVyKCcnLCBvYmopO1xuICAgIH0gZWxzZSBpZiAoaXNBcnJheShvcHRpb25zLmZpbHRlcikpIHtcbiAgICAgICAgZmlsdGVyID0gb3B0aW9ucy5maWx0ZXI7XG4gICAgICAgIG9iaktleXMgPSBmaWx0ZXI7XG4gICAgfVxuXG4gICAgdmFyIGtleXMgPSBbXTtcblxuICAgIGlmICh0eXBlb2Ygb2JqICE9PSAnb2JqZWN0JyB8fCBvYmogPT09IG51bGwpIHtcbiAgICAgICAgcmV0dXJuICcnO1xuICAgIH1cblxuICAgIHZhciBhcnJheUZvcm1hdDtcbiAgICBpZiAob3B0cyAmJiBvcHRzLmFycmF5Rm9ybWF0IGluIGFycmF5UHJlZml4R2VuZXJhdG9ycykge1xuICAgICAgICBhcnJheUZvcm1hdCA9IG9wdHMuYXJyYXlGb3JtYXQ7XG4gICAgfSBlbHNlIGlmIChvcHRzICYmICdpbmRpY2VzJyBpbiBvcHRzKSB7XG4gICAgICAgIGFycmF5Rm9ybWF0ID0gb3B0cy5pbmRpY2VzID8gJ2luZGljZXMnIDogJ3JlcGVhdCc7XG4gICAgfSBlbHNlIHtcbiAgICAgICAgYXJyYXlGb3JtYXQgPSAnaW5kaWNlcyc7XG4gICAgfVxuXG4gICAgdmFyIGdlbmVyYXRlQXJyYXlQcmVmaXggPSBhcnJheVByZWZpeEdlbmVyYXRvcnNbYXJyYXlGb3JtYXRdO1xuICAgIGlmIChvcHRzICYmICdjb21tYVJvdW5kVHJpcCcgaW4gb3B0cyAmJiB0eXBlb2Ygb3B0cy5jb21tYVJvdW5kVHJpcCAhPT0gJ2Jvb2xlYW4nKSB7XG4gICAgICAgIHRocm93IG5ldyBUeXBlRXJyb3IoJ2Bjb21tYVJvdW5kVHJpcGAgbXVzdCBiZSBhIGJvb2xlYW4sIG9yIGFic2VudCcpO1xuICAgIH1cbiAgICB2YXIgY29tbWFSb3VuZFRyaXAgPSBnZW5lcmF0ZUFycmF5UHJlZml4ID09PSAnY29tbWEnICYmIG9wdHMgJiYgb3B0cy5jb21tYVJvdW5kVHJpcDtcblxuICAgIGlmICghb2JqS2V5cykge1xuICAgICAgICBvYmpLZXlzID0gT2JqZWN0LmtleXMob2JqKTtcbiAgICB9XG5cbiAgICBpZiAob3B0aW9ucy5zb3J0KSB7XG4gICAgICAgIG9iaktleXMuc29ydChvcHRpb25zLnNvcnQpO1xuICAgIH1cblxuICAgIHZhciBzaWRlQ2hhbm5lbCA9IGdldFNpZGVDaGFubmVsKCk7XG4gICAgZm9yICh2YXIgaSA9IDA7IGkgPCBvYmpLZXlzLmxlbmd0aDsgKytpKSB7XG4gICAgICAgIHZhciBrZXkgPSBvYmpLZXlzW2ldO1xuXG4gICAgICAgIGlmIChvcHRpb25zLnNraXBOdWxscyAmJiBvYmpba2V5XSA9PT0gbnVsbCkge1xuICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgIH1cbiAgICAgICAgcHVzaFRvQXJyYXkoa2V5cywgc3RyaW5naWZ5KFxuICAgICAgICAgICAgb2JqW2tleV0sXG4gICAgICAgICAgICBrZXksXG4gICAgICAgICAgICBnZW5lcmF0ZUFycmF5UHJlZml4LFxuICAgICAgICAgICAgY29tbWFSb3VuZFRyaXAsXG4gICAgICAgICAgICBvcHRpb25zLnN0cmljdE51bGxIYW5kbGluZyxcbiAgICAgICAgICAgIG9wdGlvbnMuc2tpcE51bGxzLFxuICAgICAgICAgICAgb3B0aW9ucy5lbmNvZGUgPyBvcHRpb25zLmVuY29kZXIgOiBudWxsLFxuICAgICAgICAgICAgb3B0aW9ucy5maWx0ZXIsXG4gICAgICAgICAgICBvcHRpb25zLnNvcnQsXG4gICAgICAgICAgICBvcHRpb25zLmFsbG93RG90cyxcbiAgICAgICAgICAgIG9wdGlvbnMuc2VyaWFsaXplRGF0ZSxcbiAgICAgICAgICAgIG9wdGlvbnMuZm9ybWF0LFxuICAgICAgICAgICAgb3B0aW9ucy5mb3JtYXR0ZXIsXG4gICAgICAgICAgICBvcHRpb25zLmVuY29kZVZhbHVlc09ubHksXG4gICAgICAgICAgICBvcHRpb25zLmNoYXJzZXQsXG4gICAgICAgICAgICBzaWRlQ2hhbm5lbFxuICAgICAgICApKTtcbiAgICB9XG5cbiAgICB2YXIgam9pbmVkID0ga2V5cy5qb2luKG9wdGlvbnMuZGVsaW1pdGVyKTtcbiAgICB2YXIgcHJlZml4ID0gb3B0aW9ucy5hZGRRdWVyeVByZWZpeCA9PT0gdHJ1ZSA/ICc/JyA6ICcnO1xuXG4gICAgaWYgKG9wdGlvbnMuY2hhcnNldFNlbnRpbmVsKSB7XG4gICAgICAgIGlmIChvcHRpb25zLmNoYXJzZXQgPT09ICdpc28tODg1OS0xJykge1xuICAgICAgICAgICAgLy8gZW5jb2RlVVJJQ29tcG9uZW50KCcmIzEwMDAzOycpLCB0aGUgXCJudW1lcmljIGVudGl0eVwiIHJlcHJlc2VudGF0aW9uIG9mIGEgY2hlY2ttYXJrXG4gICAgICAgICAgICBwcmVmaXggKz0gJ3V0Zjg9JTI2JTIzMTAwMDMlM0ImJztcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIC8vIGVuY29kZVVSSUNvbXBvbmVudCgn4pyTJylcbiAgICAgICAgICAgIHByZWZpeCArPSAndXRmOD0lRTIlOUMlOTMmJztcbiAgICAgICAgfVxuICAgIH1cblxuICAgIHJldHVybiBqb2luZWQubGVuZ3RoID4gMCA/IHByZWZpeCArIGpvaW5lZCA6ICcnO1xufTtcbiJdLCJuYW1lcyI6WyJnZXRTaWRlQ2hhbm5lbCIsInV0aWxzIiwiZm9ybWF0cyIsImhhcyIsIk9iamVjdCIsInByb3RvdHlwZSIsImhhc093blByb3BlcnR5IiwiYXJyYXlQcmVmaXhHZW5lcmF0b3JzIiwiYnJhY2tldHMiLCJwcmVmaXgiLCJjb21tYSIsImluZGljZXMiLCJrZXkiLCJyZXBlYXQiLCJpc0FycmF5IiwiQXJyYXkiLCJzcGxpdCIsIlN0cmluZyIsInB1c2giLCJwdXNoVG9BcnJheSIsImFyciIsInZhbHVlT3JBcnJheSIsImFwcGx5IiwidG9JU08iLCJEYXRlIiwidG9JU09TdHJpbmciLCJkZWZhdWx0Rm9ybWF0IiwiZGVmYXVsdHMiLCJhZGRRdWVyeVByZWZpeCIsImFsbG93RG90cyIsImNoYXJzZXQiLCJjaGFyc2V0U2VudGluZWwiLCJkZWxpbWl0ZXIiLCJlbmNvZGUiLCJlbmNvZGVyIiwiZW5jb2RlVmFsdWVzT25seSIsImZvcm1hdCIsImZvcm1hdHRlciIsImZvcm1hdHRlcnMiLCJzZXJpYWxpemVEYXRlIiwiZGF0ZSIsImNhbGwiLCJza2lwTnVsbHMiLCJzdHJpY3ROdWxsSGFuZGxpbmciLCJzZW50aW5lbCIsInN0cmluZ2lmeSIsIm9iamVjdCIsImdlbmVyYXRlQXJyYXlQcmVmaXgiLCJjb21tYVJvdW5kVHJpcCIsImZpbHRlciIsInNvcnQiLCJzaWRlQ2hhbm5lbCIsInYiLCJvYmoiLCJ0bXBTYyIsInN0ZXAiLCJmaW5kRmxhZyIsImdldCIsInBvcyIsIlJhbmdlRXJyb3IiLCJtYXliZU1hcCIsInZhbHVlIiwiaXNCdWZmZXIiLCJrZXlWYWx1ZSIsInZhbHVlc0FycmF5IiwidmFsdWVzSm9pbmVkIiwiaSIsImxlbmd0aCIsIm9iaktleXMiLCJ2YWx1ZXMiLCJqb2luIiwia2V5cyIsImFkanVzdGVkUHJlZml4IiwiaiIsImtleVByZWZpeCIsInNldCIsInZhbHVlU2lkZUNoYW5uZWwiLCJtb2R1bGUiLCJleHBvcnRzIiwib3B0cyIsIm9wdGlvbnMiLCJUeXBlRXJyb3IiLCJub3JtYWxpemVTdHJpbmdpZnlPcHRpb25zIiwiYXJyYXlGb3JtYXQiLCJqb2luZWQiXSwic291cmNlUm9vdCI6IiJ9