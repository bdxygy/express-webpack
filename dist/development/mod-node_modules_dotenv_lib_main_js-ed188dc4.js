exports.id="mod-node_modules_dotenv_lib_main_js-ed188dc4",exports.ids=["mod-node_modules_dotenv_lib_main_js-ed188dc4"],exports.modules={"./node_modules/dotenv/lib/main.js":(e,o,t)=>{const n=t("fs"),r=t("path"),s=t("os"),a=t("crypto"),c=t("./node_modules/dotenv/package.json").version,i=/(?:^|^)\s*(?:export\s+)?([\w.-]+)(?:\s*=\s*?|:\s+?)(\s*'(?:\\'|[^'])*'|\s*"(?:\\"|[^"])*"|\s*`(?:\\`|[^`])*`|[^#\r\n]+)?\s*(?:#.*)?(?:$|$)/gm;function l(e){console.log(`[dotenv@${c}][DEBUG] ${e}`)}function p(){return process.env.DOTENV_KEY&&process.env.DOTENV_KEY.length>0?process.env.DOTENV_KEY:""}function u(e,o){let t;try{t=new URL(o)}catch(e){if("ERR_INVALID_URL"===e.code)throw new Error("INVALID_DOTENV_KEY: Wrong format. Must be in valid uri format like dotenv://:key_1234@dotenv.org/vault/.env.vault?environment=development");throw e}const n=t.password;if(!n)throw new Error("INVALID_DOTENV_KEY: Missing key part");const r=t.searchParams.get("environment");if(!r)throw new Error("INVALID_DOTENV_KEY: Missing environment part");const s=`DOTENV_VAULT_${r.toUpperCase()}`,a=e.parsed[s];if(!a)throw new Error(`NOT_FOUND_DOTENV_ENVIRONMENT: Cannot locate environment ${s} in your .env.vault file.`);return{ciphertext:a,key:n}}function d(e){let o=r.resolve(process.cwd(),".env");return e&&e.path&&e.path.length>0&&(o=e.path),o.endsWith(".vault")?o:`${o}.vault`}const f={configDotenv:function(e){let o=r.resolve(process.cwd(),".env"),t="utf8";const a=Boolean(e&&e.debug);var c;e&&(null!=e.path&&(o="~"===(c=e.path)[0]?r.join(s.homedir(),c.slice(1)):c),null!=e.encoding&&(t=e.encoding));try{const r=f.parse(n.readFileSync(o,{encoding:t}));return f.populate(process.env,r,e),{parsed:r}}catch(e){return a&&l(`Failed to load ${o} ${e.message}`),{error:e}}},_configVault:function(e){var o;o="Loading env from encrypted .env.vault",console.log(`[dotenv@${c}][INFO] ${o}`);const t=f._parseVault(e);return f.populate(process.env,t,e),{parsed:t}},_parseVault:function(e){const o=d(e),t=f.configDotenv({path:o});if(!t.parsed)throw new Error(`MISSING_DATA: Cannot parse ${o} for an unknown reason`);const n=p().split(","),r=n.length;let s;for(let e=0;e<r;e++)try{const o=u(t,n[e].trim());s=f.decrypt(o.ciphertext,o.key);break}catch(o){if(e+1>=r)throw o}return f.parse(s)},config:function(e){const o=d(e);return 0===p().length?f.configDotenv(e):n.existsSync(o)?f._configVault(e):(t=`You set DOTENV_KEY but you are missing a .env.vault file at ${o}. Did you forget to build it?`,console.log(`[dotenv@${c}][WARN] ${t}`),f.configDotenv(e));var t},decrypt:function(e,o){const t=Buffer.from(o.slice(-64),"hex");let n=Buffer.from(e,"base64");const r=n.slice(0,12),s=n.slice(-16);n=n.slice(12,-16);try{const e=a.createDecipheriv("aes-256-gcm",t,r);return e.setAuthTag(s),`${e.update(n)}${e.final()}`}catch(e){const o=e instanceof RangeError,t="Invalid key length"===e.message,n="Unsupported state or unable to authenticate data"===e.message;if(o||t){throw new Error("INVALID_DOTENV_KEY: It must be 64 characters long (or more)")}if(n){throw new Error("DECRYPTION_FAILED: Please check your DOTENV_KEY")}throw console.error("Error: ",e.code),console.error("Error: ",e.message),e}},parse:function(e){const o={};let t,n=e.toString();for(n=n.replace(/\r\n?/gm,"\n");null!=(t=i.exec(n));){const e=t[1];let n=t[2]||"";n=n.trim();const r=n[0];n=n.replace(/^(['"`])([\s\S]*)\1$/gm,"$2"),'"'===r&&(n=n.replace(/\\n/g,"\n"),n=n.replace(/\\r/g,"\r")),o[e]=n}return o},populate:function(e,o,t={}){const n=Boolean(t&&t.debug),r=Boolean(t&&t.override);if("object"!=typeof o)throw new Error("OBJECT_REQUIRED: Please check the processEnv argument being passed to populate");for(const t of Object.keys(o))Object.prototype.hasOwnProperty.call(e,t)?(!0===r&&(e[t]=o[t]),n&&l(!0===r?`"${t}" is already defined and WAS overwritten`:`"${t}" is already defined and was NOT overwritten`)):e[t]=o[t]}};e.exports.configDotenv=f.configDotenv,e.exports._configVault=f._configVault,e.exports._parseVault=f._parseVault,e.exports.config=f.config,e.exports.decrypt=f.decrypt,e.exports.parse=f.parse,e.exports.populate=f.populate,e.exports=f}};
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoibW9kLW5vZGVfbW9kdWxlc19kb3RlbnZfbGliX21haW5fanMtZWQxODhkYzQuanMiLCJtYXBwaW5ncyI6InNMQUFBLE1BQU1BLEVBQUssRUFBUSxNQUNiQyxFQUFPLEVBQVEsUUFDZkMsRUFBSyxFQUFRLE1BQ2JDLEVBQVMsRUFBUSxVQUdqQkMsRUFGYyxFQUFRLHNDQUVBQSxRQUV0QkMsRUFBTywrSUF5RmIsU0FBU0MsRUFBUUMsR0FDZkMsUUFBUUMsSUFBSSxXQUFXTCxhQUFtQkcsSUFDNUMsQ0FFQSxTQUFTRyxJQUNQLE9BQUlDLFFBQVFDLElBQUlDLFlBQWNGLFFBQVFDLElBQUlDLFdBQVdDLE9BQVMsRUFDckRILFFBQVFDLElBQUlDLFdBR2QsRUFDVCxDQUVBLFNBQVNFLEVBQWVDLEVBQVFDLEdBRTlCLElBQUlDLEVBQ0osSUFDRUEsRUFBTSxJQUFJQyxJQUFJRixFQUNoQixDQUFFLE1BQU9HLEdBQ1AsR0FBbUIsb0JBQWZBLEVBQU1DLEtBQ1IsTUFBTSxJQUFJQyxNQUFNLDZJQUdsQixNQUFNRixDQUNSLENBR0EsTUFBTUcsRUFBTUwsRUFBSU0sU0FDaEIsSUFBS0QsRUFDSCxNQUFNLElBQUlELE1BQU0sd0NBSWxCLE1BQU1HLEVBQWNQLEVBQUlRLGFBQWFDLElBQUksZUFDekMsSUFBS0YsRUFDSCxNQUFNLElBQUlILE1BQU0sZ0RBSWxCLE1BQU1NLEVBQWlCLGdCQUFnQkgsRUFBWUksZ0JBQzdDQyxFQUFhZCxFQUFPZSxPQUFPSCxHQUNqQyxJQUFLRSxFQUNILE1BQU0sSUFBSVIsTUFBTSwyREFBMkRNLDhCQUc3RSxNQUFPLENBQUVFLGFBQVlQLE1BQ3ZCLENBRUEsU0FBU1MsRUFBWUMsR0FDbkIsSUFBSUMsRUFBYWpDLEVBQUtrQyxRQUFReEIsUUFBUXlCLE1BQU8sUUFPN0MsT0FMSUgsR0FBV0EsRUFBUWhDLE1BQVFnQyxFQUFRaEMsS0FBS2EsT0FBUyxJQUNuRG9CLEVBQWFELEVBQVFoQyxNQUloQmlDLEVBQVdHLFNBQVMsVUFBWUgsRUFBYSxHQUFH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LEVBQU9DLFFBQVF2RCxhQUFlRCxFQUFhQyxhQUMzQ3NELEVBQU9DLFFBQVEzQyxhQUFlYixFQUFhYSxhQUMzQzBDLEVBQU9DLFFBQVExQyxZQUFjZCxFQUFhYyxZQUMxQ3lDLEVBQU9DLFFBQVFqQyxPQUFTdkIsRUFBYXVCLE9BQ3JDZ0MsRUFBT0MsUUFBUWxDLFFBQVV0QixFQUFhc0IsUUFDdENpQyxFQUFPQyxRQUFRL0MsTUFBUVQsRUFBYVMsTUFDcEM4QyxFQUFPQyxRQUFRN0MsU0FBV1gsRUFBYVcsU0FFdkM0QyxFQUFPQyxRQUFVeEQsQyIsInNvdXJjZXMiOlsid2VicGFjazovL0BiZHh5Z3kvZXhwcmVzcy13ZWJwYWNrLy4vbm9kZV9tb2R1bGVzL2RvdGVudi9saWIvbWFpbi5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJjb25zdCBmcyA9IHJlcXVpcmUoJ2ZzJylcbmNvbnN0IHBhdGggPSByZXF1aXJlKCdwYXRoJylcbmNvbnN0IG9zID0gcmVxdWlyZSgnb3MnKVxuY29uc3QgY3J5cHRvID0gcmVxdWlyZSgnY3J5cHRvJylcbmNvbnN0IHBhY2thZ2VKc29uID0gcmVxdWlyZSgnLi4vcGFja2FnZS5qc29uJylcblxuY29uc3QgdmVyc2lvbiA9IHBhY2thZ2VKc29uLnZlcnNpb25cblxuY29uc3QgTElORSA9IC8oPzpefF4pXFxzKig/OmV4cG9ydFxccyspPyhbXFx3Li1dKykoPzpcXHMqPVxccyo/fDpcXHMrPykoXFxzKicoPzpcXFxcJ3xbXiddKSonfFxccypcIig/OlxcXFxcInxbXlwiXSkqXCJ8XFxzKmAoPzpcXFxcYHxbXmBdKSpgfFteI1xcclxcbl0rKT9cXHMqKD86Iy4qKT8oPzokfCQpL21nXG5cbi8vIFBhcnNlIHNyYyBpbnRvIGFuIE9iamVjdFxuZnVuY3Rpb24gcGFyc2UgKHNyYykge1xuICBjb25zdCBvYmogPSB7fVxuXG4gIC8vIENvbnZlcnQgYnVmZmVyIHRvIHN0cmluZ1xuICBsZXQgbGluZXMgPSBzcmMudG9TdHJpbmcoKVxuXG4gIC8vIENvbnZlcnQgbGluZSBicmVha3MgdG8gc2FtZSBmb3JtYXRcbiAgbGluZXMgPSBsaW5lcy5yZXBsYWNlKC9cXHJcXG4/L21nLCAnXFxuJylcblxuICBsZXQgbWF0Y2hcbiAgd2hpbGUgKChtYXRjaCA9IExJTkUuZXhlYyhsaW5lcykpICE9IG51bGwpIHtcbiAgICBjb25zdCBrZXkgPSBtYXRjaFsxXVxuXG4gICAgLy8gRGVmYXVsdCB1bmRlZmluZWQgb3IgbnVsbCB0byBlbXB0eSBzdHJpbmdcbiAgICBsZXQgdmFsdWUgPSAobWF0Y2hbMl0gfHwgJycpXG5cbiAgICAvLyBSZW1vdmUgd2hpdGVzcGFjZVxuICAgIHZhbHVlID0gdmFsdWUudHJpbSgpXG5cbiAgICAvLyBDaGVjayBpZiBkb3VibGUgcXVvdGVkXG4gICAgY29uc3QgbWF5YmVRdW90ZSA9IHZhbHVlWzBdXG5cbiAgICAvLyBSZW1vdmUgc3Vycm91bmRpbmcgcXVvdGVzXG4gICAgdmFsdWUgPSB2YWx1ZS5yZXBsYWNlKC9eKFsnXCJgXSkoW1xcc1xcU10qKVxcMSQvbWcsICckMicpXG5cbiAgICAvLyBFeHBhbmQgbmV3bGluZXMgaWYgZG91YmxlIHF1b3RlZFxuICAgIGlmIChtYXliZVF1b3RlID09PSAnXCInKSB7XG4gICAgICB2YWx1ZSA9IHZhbHVlLnJlcGxhY2UoL1xcXFxuL2csICdcXG4nKVxuICAgICAgdmFsdWUgPSB2YWx1ZS5yZXBsYWNlKC9cXFxcci9nLCAnXFxyJylcbiAgICB9XG5cbiAgICAvLyBBZGQgdG8gb2JqZWN0XG4gICAgb2JqW2tleV0gPSB2YWx1ZVxuICB9XG5cbiAgcmV0dXJuIG9ialxufVxuXG5mdW5jdGlvbiBfcGFyc2VWYXVsdCAob3B0aW9ucykge1xuICBjb25zdCB2YXVsdFBhdGggPSBfdmF1bHRQYXRoKG9wdGlvbnMpXG5cbiAgLy8gUGFyc2UgLmVudi52YXVsdFxuICBjb25zdCByZXN1bHQgPSBEb3RlbnZNb2R1bGUuY29uZmlnRG90ZW52KHsgcGF0aDogdmF1bHRQYXRoIH0pXG4gIGlmICghcmVzdWx0LnBhcnNlZCkge1xuICAgIHRocm93IG5ldyBFcnJvcihgTUlTU0lOR19EQVRBOiBDYW5ub3QgcGFyc2UgJHt2YXVsdFBhdGh9IGZvciBhbiB1bmtub3duIHJlYXNvbmApXG4gIH1cblxuICAvLyBoYW5kbGUgc2NlbmFyaW8gZm9yIGNvbW1hIHNlcGFyYXRlZCBrZXlzIC0gZm9yIHVzZSB3aXRoIGtleSByb3RhdGlvblxuICAvLyBleGFtcGxlOiBET1RFTlZfS0VZPVwiZG90ZW52Oi8vOmtleV8xMjM0QGRvdGVudi5vcmcvdmF1bHQvLmVudi52YXVsdD9lbnZpcm9ubWVudD1wcm9kLGRvdGVudjovLzprZXlfNzg5MEBkb3RlbnYub3JnL3ZhdWx0Ly5lbnYudmF1bHQ/ZW52aXJvbm1lbnQ9cHJvZFwiXG4gIGNvbnN0IGtleXMgPSBfZG90ZW52S2V5KCkuc3BsaXQoJywnKVxuICBjb25zdCBsZW5ndGggPSBrZXlzLmxlbmd0aFxuXG4gIGxldCBkZWNyeXB0ZWRcbiAgZm9yIChsZXQgaSA9IDA7IGkgPCBsZW5ndGg7IGkrKykge1xuICAgIHRyeSB7XG4gICAgICAvLyBHZXQgZnVsbCBrZXlcbiAgICAgIGNvbnN0IGtleSA9IGtleXNbaV0udHJpbSgpXG5cbiAgICAgIC8vIEdldCBpbnN0cnVjdGlvbnMgZm9yIGRlY3J5cHRcbiAgICAgIGNvbnN0IGF0dHJzID0gX2luc3RydWN0aW9ucyhyZXN1bHQsIGtleSlcblxuICAgICAgLy8gRGVjcnlwdFxuICAgICAgZGVjcnlwdGVkID0gRG90ZW52TW9kdWxlLmRlY3J5cHQoYXR0cnMuY2lwaGVydGV4dCwgYXR0cnMua2V5KVxuXG4gICAgICBicmVha1xuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICAvLyBsYXN0IGtleVxuICAgICAgaWYgKGkgKyAxID49IGxlbmd0aCkge1xuICAgICAgICB0aHJvdyBlcnJvclxuICAgICAgfVxuICAgICAgLy8gdHJ5IG5leHQga2V5XG4gICAgfVxuICB9XG5cbiAgLy8gUGFyc2UgZGVjcnlwdGVkIC5lbnYgc3RyaW5nXG4gIHJldHVybiBEb3RlbnZNb2R1bGUucGFyc2UoZGVjcnlwdGVkKVxufVxuXG5mdW5jdGlvbiBfbG9nIChtZXNzYWdlKSB7XG4gIGNvbnNvbGUubG9nKGBbZG90ZW52QCR7dmVyc2lvbn1dW0lORk9dICR7bWVzc2FnZX1gKVxufVxuXG5mdW5jdGlvbiBfd2FybiAobWVzc2FnZSkge1xuICBjb25zb2xlLmxvZyhgW2RvdGVudkAke3ZlcnNpb259XVtXQVJOXSAke21lc3NhZ2V9YClcbn1cblxuZnVuY3Rpb24gX2RlYnVnIChtZXNzYWdlKSB7XG4gIGNvbnNvbGUubG9nKGBbZG90ZW52QCR7dmVyc2lvbn1dW0RFQlVHXSAke21lc3NhZ2V9YClcbn1cblxuZnVuY3Rpb24gX2RvdGVudktleSAoKSB7XG4gIGlmIChwcm9jZXNzLmVudi5ET1RFTlZfS0VZICYmIHByb2Nlc3MuZW52LkRPVEVOVl9LRVkubGVuZ3RoID4gMCkge1xuICAgIHJldHVybiBwcm9jZXNzLmVudi5ET1RFTlZfS0VZXG4gIH1cblxuICByZXR1cm4gJydcbn1cblxuZnVuY3Rpb24gX2luc3RydWN0aW9ucyAocmVzdWx0LCBkb3RlbnZLZXkpIHtcbiAgLy8gUGFyc2UgRE9URU5WX0tFWS4gRm9ybWF0IGlzIGEgVVJJXG4gIGxldCB1cmlcbiAgdHJ5IHtcbiAgICB1cmkgPSBuZXcgVVJMKGRvdGVudktleSlcbiAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICBpZiAoZXJyb3IuY29kZSA9PT0gJ0VSUl9JTlZBTElEX1VSTCcpIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcignSU5WQUxJRF9ET1RFTlZfS0VZOiBXcm9uZyBmb3JtYXQuIE11c3QgYmUgaW4gdmFsaWQgdXJpIGZvcm1hdCBsaWtlIGRvdGVudjovLzprZXlfMTIzNEBkb3RlbnYub3JnL3ZhdWx0Ly5lbnYudmF1bHQ/ZW52aXJvbm1lbnQ9ZGV2ZWxvcG1lbnQnKVxuICAgIH1cblxuICAgIHRocm93IGVycm9yXG4gIH1cblxuICAvLyBHZXQgZGVjcnlwdCBrZXlcbiAgY29uc3Qga2V5ID0gdXJpLnBhc3N3b3JkXG4gIGlmICgha2V5KSB7XG4gICAgdGhyb3cgbmV3IEVycm9yKCdJTlZBTElEX0RPVEVOVl9LRVk6IE1pc3Npbmcga2V5IHBhcnQnKVxuICB9XG5cbiAgLy8gR2V0IGVudmlyb25tZW50XG4gIGNvbnN0IGVudmlyb25tZW50ID0gdXJpLnNlYXJjaFBhcmFtcy5nZXQoJ2Vudmlyb25tZW50JylcbiAgaWYgKCFlbnZpcm9ubWVudCkge1xuICAgIHRocm93IG5ldyBFcnJvcignSU5WQUxJRF9ET1RFTlZfS0VZOiBNaXNzaW5nIGVudmlyb25tZW50IHBhcnQnKVxuICB9XG5cbiAgLy8gR2V0IGNpcGhlcnRleHQgcGF5bG9hZFxuICBjb25zdCBlbnZpcm9ubWVudEtleSA9IGBET1RFTlZfVkFVTFRfJHtlbnZpcm9ubWVudC50b1VwcGVyQ2FzZSgpfWBcbiAgY29uc3QgY2lwaGVydGV4dCA9IHJlc3VsdC5wYXJzZWRbZW52aXJvbm1lbnRLZXldIC8vIERPVEVOVl9WQVVMVF9QUk9EVUNUSU9OXG4gIGlmICghY2lwaGVydGV4dCkge1xuICAgIHRocm93IG5ldyBFcnJvcihgTk9UX0ZPVU5EX0RPVEVOVl9FTlZJUk9OTUVOVDogQ2Fubm90IGxvY2F0ZSBlbnZpcm9ubWVudCAke2Vudmlyb25tZW50S2V5fSBpbiB5b3VyIC5lbnYudmF1bHQgZmlsZS5gKVxuICB9XG5cbiAgcmV0dXJuIHsgY2lwaGVydGV4dCwga2V5IH1cbn1cblxuZnVuY3Rpb24gX3ZhdWx0UGF0aCAob3B0aW9ucykge1xuICBsZXQgZG90ZW52UGF0aCA9IHBhdGgucmVzb2x2ZShwcm9jZXNzLmN3ZCgpLCAnLmVudicpXG5cbiAgaWYgKG9wdGlvbnMgJiYgb3B0aW9ucy5wYXRoICYmIG9wdGlvbnMucGF0aC5sZW5ndGggPiAwKSB7XG4gICAgZG90ZW52UGF0aCA9IG9wdGlvbnMucGF0aFxuICB9XG5cbiAgLy8gTG9jYXRlIC5lbnYudmF1bHRcbiAgcmV0dXJuIGRvdGVudlBhdGguZW5kc1dpdGgoJy52YXVsdCcpID8gZG90ZW52UGF0aCA6IGAke2RvdGVudlBhdGh9LnZhdWx0YFxufVxuXG5mdW5jdGlvbiBfcmVzb2x2ZUhvbWUgKGVudlBhdGgpIHtcbiAgcmV0dXJuIGVudlBhdGhbMF0gPT09ICd+JyA/IHBhdGguam9pbihvcy5ob21lZGlyKCksIGVudlBhdGguc2xpY2UoMSkpIDogZW52UGF0aFxufVxuXG5mdW5jdGlvbiBfY29uZmlnVmF1bHQgKG9wdGlvbnMpIHtcbiAgX2xvZygnTG9hZGluZyBlbnYgZnJvbSBlbmNyeXB0ZWQgLmVudi52YXVsdCcpXG5cbiAgY29uc3QgcGFyc2VkID0gRG90ZW52TW9kdWxlLl9wYXJzZVZhdWx0KG9wdGlvbnMpXG5cbiAgRG90ZW52TW9kdWxlLnBvcHVsYXRlKHByb2Nlc3MuZW52LCBwYXJzZWQsIG9wdGlvbnMpXG5cbiAgcmV0dXJuIHsgcGFyc2VkIH1cbn1cblxuZnVuY3Rpb24gY29uZmlnRG90ZW52IChvcHRpb25zKSB7XG4gIGxldCBkb3RlbnZQYXRoID0gcGF0aC5yZXNvbHZlKHByb2Nlc3MuY3dkKCksICcuZW52JylcbiAgbGV0IGVuY29kaW5nID0gJ3V0ZjgnXG4gIGNvbnN0IGRlYnVnID0gQm9vbGVhbihvcHRpb25zICYmIG9wdGlvbnMuZGVidWcpXG5cbiAgaWYgKG9wdGlvbnMpIHtcbiAgICBpZiAob3B0aW9ucy5wYXRoICE9IG51bGwpIHtcbiAgICAgIGRvdGVudlBhdGggPSBfcmVzb2x2ZUhvbWUob3B0aW9ucy5wYXRoKVxuICAgIH1cbiAgICBpZiAob3B0aW9ucy5lbmNvZGluZyAhPSBudWxsKSB7XG4gICAgICBlbmNvZGluZyA9IG9wdGlvbnMuZW5jb2RpbmdcbiAgICB9XG4gIH1cblxuICB0cnkge1xuICAgIC8vIFNwZWNpZnlpbmcgYW4gZW5jb2RpbmcgcmV0dXJucyBhIHN0cmluZyBpbnN0ZWFkIG9mIGEgYnVmZmVyXG4gICAgY29uc3QgcGFyc2VkID0gRG90ZW52TW9kdWxlLnBhcnNlKGZzLnJlYWRGaWxlU3luYyhkb3RlbnZQYXRoLCB7IGVuY29kaW5nIH0pKVxuXG4gICAgRG90ZW52TW9kdWxlLnBvcHVsYXRlKHByb2Nlc3MuZW52LCBwYXJzZWQsIG9wdGlvbnMpXG5cbiAgICByZXR1cm4geyBwYXJzZWQgfVxuICB9IGNhdGNoIChlKSB7XG4gICAgaWYgKGRlYnVnKSB7XG4gICAgICBfZGVidWcoYEZhaWxlZCB0byBsb2FkICR7ZG90ZW52UGF0aH0gJHtlLm1lc3NhZ2V9YClcbiAgICB9XG5cbiAgICByZXR1cm4geyBlcnJvcjogZSB9XG4gIH1cbn1cblxuLy8gUG9wdWxhdGVzIHByb2Nlc3MuZW52IGZyb20gLmVudiBmaWxlXG5mdW5jdGlvbiBjb25maWcgKG9wdGlvbnMpIHtcbiAgY29uc3QgdmF1bHRQYXRoID0gX3ZhdWx0UGF0aChvcHRpb25zKVxuXG4gIC8vIGZhbGxiYWNrIHRvIG9yaWdpbmFsIGRvdGVudiBpZiBET1RFTlZfS0VZIGlzIG5vdCBzZXRcbiAgaWYgKF9kb3RlbnZLZXkoKS5sZW5ndGggPT09IDApIHtcbiAgICByZXR1cm4gRG90ZW52TW9kdWxlLmNvbmZpZ0RvdGVudihvcHRpb25zKVxuICB9XG5cbiAgLy8gZG90ZW52S2V5IGV4aXN0cyBidXQgLmVudi52YXVsdCBmaWxlIGRvZXMgbm90IGV4aXN0XG4gIGlmICghZnMuZXhpc3RzU3luYyh2YXVsdFBhdGgpKSB7XG4gICAgX3dhcm4oYFlvdSBzZXQgRE9URU5WX0tFWSBidXQgeW91IGFyZSBtaXNzaW5nIGEgLmVudi52YXVsdCBmaWxlIGF0ICR7dmF1bHRQYXRofS4gRGlkIHlvdSBmb3JnZXQgdG8gYnVpbGQgaXQ/YClcblxuICAgIHJldHVybiBEb3RlbnZNb2R1bGUuY29uZmlnRG90ZW52KG9wdGlvbnMpXG4gIH1cblxuICByZXR1cm4gRG90ZW52TW9kdWxlLl9jb25maWdWYXVsdChvcHRpb25zKVxufVxuXG5mdW5jdGlvbiBkZWNyeXB0IChlbmNyeXB0ZWQsIGtleVN0cikge1xuICBjb25zdCBrZXkgPSBCdWZmZXIuZnJvbShrZXlTdHIuc2xpY2UoLTY0KSwgJ2hleCcpXG4gIGxldCBjaXBoZXJ0ZXh0ID0gQnVmZmVyLmZyb20oZW5jcnlwdGVkLCAnYmFzZTY0JylcblxuICBjb25zdCBub25jZSA9IGNpcGhlcnRleHQuc2xpY2UoMCwgMTIpXG4gIGNvbnN0IGF1dGhUYWcgPSBjaXBoZXJ0ZXh0LnNsaWNlKC0xNilcbiAgY2lwaGVydGV4dCA9IGNpcGhlcnRleHQuc2xpY2UoMTIsIC0xNilcblxuICB0cnkge1xuICAgIGNvbnN0IGFlc2djbSA9IGNyeXB0by5jcmVhdGVEZWNpcGhlcml2KCdhZXMtMjU2LWdjbScsIGtleSwgbm9uY2UpXG4gICAgYWVzZ2NtLnNldEF1dGhUYWcoYXV0aFRhZylcbiAgICByZXR1cm4gYCR7YWVzZ2NtLnVwZGF0ZShjaXBoZXJ0ZXh0KX0ke2Flc2djbS5maW5hbCgpfWBcbiAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICBjb25zdCBpc1JhbmdlID0gZXJyb3IgaW5zdGFuY2VvZiBSYW5nZUVycm9yXG4gICAgY29uc3QgaW52YWxpZEtleUxlbmd0aCA9IGVycm9yLm1lc3NhZ2UgPT09ICdJbnZhbGlkIGtleSBsZW5ndGgnXG4gICAgY29uc3QgZGVjcnlwdGlvbkZhaWxlZCA9IGVycm9yLm1lc3NhZ2UgPT09ICdVbnN1cHBvcnRlZCBzdGF0ZSBvciB1bmFibGUgdG8gYXV0aGVudGljYXRlIGRhdGEnXG5cbiAgICBpZiAoaXNSYW5nZSB8fCBpbnZhbGlkS2V5TGVuZ3RoKSB7XG4gICAgICBjb25zdCBtc2cgPSAnSU5WQUxJRF9ET1RFTlZfS0VZOiBJdCBtdXN0IGJlIDY0IGNoYXJhY3RlcnMgbG9uZyAob3IgbW9yZSknXG4gICAgICB0aHJvdyBuZXcgRXJyb3IobXNnKVxuICAgIH0gZWxzZSBpZiAoZGVjcnlwdGlvbkZhaWxlZCkge1xuICAgICAgY29uc3QgbXNnID0gJ0RFQ1JZUFRJT05fRkFJTEVEOiBQbGVhc2UgY2hlY2sgeW91ciBET1RFTlZfS0VZJ1xuICAgICAgdGhyb3cgbmV3IEVycm9yKG1zZylcbiAgICB9IGVsc2Uge1xuICAgICAgY29uc29sZS5lcnJvcignRXJyb3I6ICcsIGVycm9yLmNvZGUpXG4gICAgICBjb25zb2xlLmVycm9yKCdFcnJvcjogJywgZXJyb3IubWVzc2FnZSlcbiAgICAgIHRocm93IGVycm9yXG4gICAgfVxuICB9XG59XG5cbi8vIFBvcHVsYXRlIHByb2Nlc3MuZW52IHdpdGggcGFyc2VkIHZhbHVlc1xuZnVuY3Rpb24gcG9wdWxhdGUgKHByb2Nlc3NFbnYsIHBhcnNlZCwgb3B0aW9ucyA9IHt9KSB7XG4gIGNvbnN0IGRlYnVnID0gQm9vbGVhbihvcHRpb25zICYmIG9wdGlvbnMuZGVidWcpXG4gIGNvbnN0IG92ZXJyaWRlID0gQm9vbGVhbihvcHRpb25zICYmIG9wdGlvbnMub3ZlcnJpZGUpXG5cbiAgaWYgKHR5cGVvZiBwYXJzZWQgIT09ICdvYmplY3QnKSB7XG4gICAgdGhyb3cgbmV3IEVycm9yKCdPQkpFQ1RfUkVRVUlSRUQ6IFBsZWFzZSBjaGVjayB0aGUgcHJvY2Vzc0VudiBhcmd1bWVudCBiZWluZyBwYXNzZWQgdG8gcG9wdWxhdGUnKVxuICB9XG5cbiAgLy8gU2V0IHByb2Nlc3MuZW52XG4gIGZvciAoY29uc3Qga2V5IG9mIE9iamVjdC5rZXlzKHBhcnNlZCkpIHtcbiAgICBpZiAoT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKHByb2Nlc3NFbnYsIGtleSkpIHtcbiAgICAgIGlmIChvdmVycmlkZSA9PT0gdHJ1ZSkge1xuICAgICAgICBwcm9jZXNzRW52W2tleV0gPSBwYXJzZWRba2V5XVxuICAgICAgfVxuXG4gICAgICBpZiAoZGVidWcpIHtcbiAgICAgICAgaWYgKG92ZXJyaWRlID09PSB0cnVlKSB7XG4gICAgICAgICAgX2RlYnVnKGBcIiR7a2V5fVwiIGlzIGFscmVhZHkgZGVmaW5lZCBhbmQgV0FTIG92ZXJ3cml0dGVuYClcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBfZGVidWcoYFwiJHtrZXl9XCIgaXMgYWxyZWFkeSBkZWZpbmVkIGFuZCB3YXMgTk9UIG92ZXJ3cml0dGVuYClcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH0gZWxzZSB7XG4gICAgICBwcm9jZXNzRW52W2tleV0gPSBwYXJzZWRba2V5XVxuICAgIH1cbiAgfVxufVxuXG5jb25zdCBEb3RlbnZNb2R1bGUgPSB7XG4gIGNvbmZpZ0RvdGVudixcbiAgX2NvbmZpZ1ZhdWx0LFxuICBfcGFyc2VWYXVsdCxcbiAgY29uZmlnLFxuICBkZWNyeXB0LFxuICBwYXJzZSxcbiAgcG9wdWxhdGVcbn1cblxubW9kdWxlLmV4cG9ydHMuY29uZmlnRG90ZW52ID0gRG90ZW52TW9kdWxlLmNvbmZpZ0RvdGVudlxubW9kdWxlLmV4cG9ydHMuX2NvbmZpZ1ZhdWx0ID0gRG90ZW52TW9kdWxlLl9jb25maWdWYXVsdFxubW9kdWxlLmV4cG9ydHMuX3BhcnNlVmF1bHQgPSBEb3RlbnZNb2R1bGUuX3BhcnNlVmF1bHRcbm1vZHVsZS5leHBvcnRzLmNvbmZpZyA9IERvdGVudk1vZHVsZS5jb25maWdcbm1vZHVsZS5leHBvcnRzLmRlY3J5cHQgPSBEb3RlbnZNb2R1bGUuZGVjcnlwdFxubW9kdWxlLmV4cG9ydHMucGFyc2UgPSBEb3RlbnZNb2R1bGUucGFyc2Vcbm1vZHVsZS5leHBvcnRzLnBvcHVsYXRlID0gRG90ZW52TW9kdWxlLnBvcHVsYXRlXG5cbm1vZHVsZS5leHBvcnRzID0gRG90ZW52TW9kdWxlXG4iXSwibmFtZXMiOlsiZnMiLCJwYXRoIiwib3MiLCJjcnlwdG8iLCJ2ZXJzaW9uIiwiTElORSIsIl9kZWJ1ZyIsIm1lc3NhZ2UiLCJjb25zb2xlIiwibG9nIiwiX2RvdGVudktleSIsInByb2Nlc3MiLCJlbnYiLCJET1RFTlZfS0VZIiwibGVuZ3RoIiwiX2luc3RydWN0aW9ucyIsInJlc3VsdCIsImRvdGVudktleSIsInVyaSIsIlVSTCIsImVycm9yIiwiY29kZSIsIkVycm9yIiwia2V5IiwicGFzc3dvcmQiLCJlbnZpcm9ubWVudCIsInNlYXJjaFBhcmFtcyIsImdldCIsImVudmlyb25tZW50S2V5IiwidG9VcHBlckNhc2UiLCJjaXBoZXJ0ZXh0IiwicGFyc2VkIiwiX3ZhdWx0UGF0aCIsIm9wdGlvbnMiLCJkb3RlbnZQYXRoIiwicmVzb2x2ZSIsImN3ZCIsImVuZHNXaXRoIiwiRG90ZW52TW9kdWxlIiwiY29uZmlnRG90ZW52IiwiZW5jb2RpbmciLCJkZWJ1ZyIsIkJvb2xlYW4iLCJlbnZQYXRoIiwiam9pbiIsImhvbWVkaXIiLCJzbGljZSIsInBhcnNlIiwicmVhZEZpbGVTeW5jIiwicG9wdWxhdGUiLCJlIiwiX2NvbmZpZ1ZhdWx0IiwiX3BhcnNlVmF1bHQiLCJ2YXVsdFBhdGgiLCJrZXlzIiwic3BsaXQiLCJkZWNyeXB0ZWQiLCJpIiwiYXR0cnMiLCJ0cmltIiwiZGVjcnlwdCIsImNvbmZpZyIsImV4aXN0c1N5bmMiLCJlbmNyeXB0ZWQiLCJrZXlTdHIiLCJCdWZmZXIiLCJmcm9tIiwibm9uY2UiLCJhdXRoVGFnIiwiYWVzZ2NtIiwiY3JlYXRlRGVjaXBoZXJpdiIsInNldEF1dGhUYWciLCJ1cGRhdGUiLCJmaW5hbCIsImlzUmFuZ2UiLCJSYW5nZUVycm9yIiwiaW52YWxpZEtleUxlbmd0aCIsImRlY3J5cHRpb25GYWlsZWQiLCJzcmMiLCJvYmoiLCJtYXRjaCIsImxpbmVzIiwidG9TdHJpbmciLCJyZXBsYWNlIiwiZXhlYyIsInZhbHVlIiwibWF5YmVRdW90ZSIsInByb2Nlc3NFbnYiLCJvdmVycmlkZSIsIk9iamVjdCIsInByb3RvdHlwZSIsImhhc093blByb3BlcnR5IiwiY2FsbCIsIm1vZHVsZSIsImV4cG9ydHMiXSwic291cmNlUm9vdCI6IiJ9