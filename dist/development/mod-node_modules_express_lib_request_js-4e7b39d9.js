"use strict";exports.id="mod-node_modules_express_lib_request_js-4e7b39d9",exports.ids=["mod-node_modules_express_lib_request_js-4e7b39d9"],exports.modules={"./node_modules/express/lib/request.js":(e,t,r)=>{var s=r("./node_modules/accepts/index.js"),n=r("./node_modules/depd/index.js")("express"),i=r("net").isIP,a=r("./node_modules/type-is/index.js"),o=r("http"),u=r("./node_modules/fresh/index.js"),c=r("./node_modules/range-parser/index.js"),d=r("./node_modules/parseurl/index.js"),p=r("./node_modules/proxy-addr/index.js"),h=Object.create(o.IncomingMessage.prototype);function f(e,t,r){Object.defineProperty(e,t,{configurable:!0,enumerable:!0,get:r})}e.exports=h,h.get=h.header=function(e){if(!e)throw new TypeError("name argument is required to req.get");if("string"!=typeof e)throw new TypeError("name must be a string to req.get");var t=e.toLowerCase();switch(t){case"referer":case"referrer":return this.headers.referrer||this.headers.referer;default:return this.headers[t]}},h.accepts=function(){var e=s(this);return e.types.apply(e,arguments)},h.acceptsEncodings=function(){var e=s(this);return e.encodings.apply(e,arguments)},h.acceptsEncoding=n.function(h.acceptsEncodings,"req.acceptsEncoding: Use acceptsEncodings instead"),h.acceptsCharsets=function(){var e=s(this);return e.charsets.apply(e,arguments)},h.acceptsCharset=n.function(h.acceptsCharsets,"req.acceptsCharset: Use acceptsCharsets instead"),h.acceptsLanguages=function(){var e=s(this);return e.languages.apply(e,arguments)},h.acceptsLanguage=n.function(h.acceptsLanguages,"req.acceptsLanguage: Use acceptsLanguages instead"),h.range=function(e,t){var r=this.get("Range");if(r)return c(e,r,t)},h.param=function(e,t){var r=this.params||{},s=this.body||{},i=this.query||{};return n("req.param("+(1===arguments.length?"name":"name, default")+"): Use req.params, req.body, or req.query instead"),null!=r[e]&&r.hasOwnProperty(e)?r[e]:null!=s[e]?s[e]:null!=i[e]?i[e]:t},h.is=function(e){var t=e;if(!Array.isArray(e)){t=new Array(arguments.length);for(var r=0;r<t.length;r++)t[r]=arguments[r]}return a(this,t)},f(h,"protocol",(function(){var e=this.connection.encrypted?"https":"http";if(!this.app.get("trust proxy fn")(this.connection.remoteAddress,0))return e;var t=this.get("X-Forwarded-Proto")||e,r=t.indexOf(",");return-1!==r?t.substring(0,r).trim():t.trim()})),f(h,"secure",(function(){return"https"===this.protocol})),f(h,"ip",(function(){var e=this.app.get("trust proxy fn");return p(this,e)})),f(h,"ips",(function(){var e=this.app.get("trust proxy fn"),t=p.all(this,e);return t.reverse().pop(),t})),f(h,"subdomains",(function(){var e=this.hostname;if(!e)return[];var t=this.app.get("subdomain offset"),r=i(e)?[e]:e.split(".").reverse();return r.slice(t)})),f(h,"path",(function(){return d(this).pathname})),f(h,"hostname",(function(){var e=this.app.get("trust proxy fn"),t=this.get("X-Forwarded-Host");if(t&&e(this.connection.remoteAddress,0)?-1!==t.indexOf(",")&&(t=t.substring(0,t.indexOf(",")).trimRight()):t=this.get("Host"),t){var r="["===t[0]?t.indexOf("]")+1:0,s=t.indexOf(":",r);return-1!==s?t.substring(0,s):t}})),f(h,"host",n.function((function(){return this.hostname}),"req.host: Use req.hostname instead")),f(h,"fresh",(function(){var e=this.method,t=this.res,r=t.statusCode;return("GET"===e||"HEAD"===e)&&((r>=200&&r<300||304===r)&&u(this.headers,{etag:t.get("ETag"),"last-modified":t.get("Last-Modified")}))})),f(h,"stale",(function(){return!this.fresh})),f(h,"xhr",(function(){return"xmlhttprequest"===(this.get("X-Requested-With")||"").toLowerCase()}))}};
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoibW9kLW5vZGVfbW9kdWxlc19leHByZXNzX2xpYl9yZXF1ZXN0X2pzLTRlN2IzOWQ5LmpzIiwibWFwcGluZ3MiOiIrTUFlQSxJQUFJQSxFQUFVLEVBQVEsbUNBQ2xCQyxFQUFZLEVBQVEsK0JBQVIsQ0FBZ0IsV0FDNUJDLEVBQU8sY0FDUEMsRUFBUyxFQUFRLG1DQUNqQkMsRUFBTyxFQUFRLFFBQ2ZDLEVBQVEsRUFBUSxpQ0FDaEJDLEVBQWEsRUFBUSx3Q0FDckJDLEVBQVEsRUFBUSxvQ0FDaEJDLEVBQVksRUFBUSxzQ0FPcEJDLEVBQU1DLE9BQU9DLE9BQU9QLEVBQUtRLGdCQUFnQkMsV0F3ZTdDLFNBQVNDLEVBQWFDLEVBQUtDLEVBQU1DLEdBQy9CUCxPQUFPUSxlQUFlSCxFQUFLQyxFQUFNLENBQy9CRyxjQUFjLEVBQ2RDLFlBQVksRUFDWkMsSUFBS0osR0FFVCxDQXZlQUssRUFBT0MsUUFBVWQsRUEwQmpCQSxFQUFJWSxJQUNKWixFQUFJZSxPQUFTLFNBQWdCUixHQUMzQixJQUFLQSxFQUNILE1BQU0sSUFBSVMsVUFBVSx3Q0FHdEIsR0FBb0IsaUJBQVRULEVBQ1QsTUFBTSxJQUFJUyxVQUFVLG9DQUd0QixJQUFJQyxFQUFLVixFQUFLVyxjQUVkLE9BQVFELEdBQ04sSUFBSyxVQUNMLElBQUssV0FDSCxPQUFPRSxLQUFLQyxRQUFRQyxVQUNmRixLQUFLQyxRQUFRRSxRQUNwQixRQUNFLE9BQU9ILEtBQUtDLFFBQVFILEdBRTFCLEVBZ0RBakIsRUFBSVQsUUFBVSxXQUNaLElBQUlnQyxFQUFTaEMsRUFBUTRCLE1BQ3JCLE9BQU9JLEVBQU9DLE1BQU1DLE1BQU1GLEVBQVFHLFVBQ3BDLEVBVUExQixFQUFJMkIsaUJBQW1CLFdBQ3JCLElBQUlKLEVBQVNoQyxFQUFRNEIsTUFDckIsT0FBT0ksRUFBT0ssVUFBVUgsTUFBTUYsRUFBUUcsVUFDeEMsRUFFQTFCLEVBQUk2QixnQkFBa0JyQyxFQUFVc0MsU0FBUzlCLEVBQUkyQixpQkFDM0MscURBV0YzQixFQUFJK0Is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SSxrQkFDckI2RCxFQUFPdEQsS0FBS1AsSUFBSSxvQkFVcEIsR0FSSzZELEdBQVNqQixFQUFNckMsS0FBS2tDLFdBQVdJLGNBQWUsSUFFakIsSUFBdkJnQixFQUFLZCxRQUFRLE9BR3RCYyxFQUFPQSxFQUFLYixVQUFVLEVBQUdhLEVBQUtkLFFBQVEsTUFBTWUsYUFKNUNELEVBQU90RCxLQUFLUCxJQUFJLFFBT2I2RCxFQUFMLENBR0EsSUFBSUwsRUFBcUIsTUFBWkssRUFBSyxHQUNkQSxFQUFLZCxRQUFRLEtBQU8sRUFDcEIsRUFDQUQsRUFBUWUsRUFBS2QsUUFBUSxJQUFLUyxHQUU5QixPQUFrQixJQUFYVixFQUNIZSxFQUFLYixVQUFVLEVBQUdGLEdBQ2xCZSxDQVZhLENBV25CLElBSUFwRSxFQUFhTCxFQUFLLE9BQVFSLEVBQVVzQyxVQUFTLFdBQzNDLE9BQU9YLEtBQUtnRCxRQUNkLEdBQUcsdUNBV0g5RCxFQUFhTCxFQUFLLFNBQVMsV0FDekIsSUFBSTJFLEVBQVN4RCxLQUFLd0QsT0FDZEMsRUFBTXpELEtBQUt5RCxJQUNYQyxFQUFTRCxFQUFJRSxXQUdqQixPQUFJLFFBQVVILEdBQVUsU0FBV0EsTUFHOUJFLEdBQVUsS0FBT0EsRUFBUyxLQUFRLE1BQVFBLElBQ3RDakYsRUFBTXVCLEtBQUtDLFFBQVMsQ0FDekIsS0FBUXdELEVBQUloRSxJQUFJLFFBQ2hCLGdCQUFpQmdFLEVBQUloRSxJQUFJLG1CQUsvQixJQVdBUCxFQUFhTCxFQUFLLFNBQVMsV0FDekIsT0FBUW1CLEtBQUt2QixLQUNmLElBU0FTLEVBQWFMLEVBQUssT0FBTyxXQUV2QixNQUE2QixvQkFEbkJtQixLQUFLUCxJQUFJLHFCQUF1QixJQUMvQk0sYUFDYixHIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vQGJkeHlneS9leHByZXNzLXdlYnBhY2svLi9ub2RlX21vZHVsZXMvZXhwcmVzcy9saWIvcmVxdWVzdC5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyIvKiFcbiAqIGV4cHJlc3NcbiAqIENvcHlyaWdodChjKSAyMDA5LTIwMTMgVEogSG9sb3dheWNodWtcbiAqIENvcHlyaWdodChjKSAyMDEzIFJvbWFuIFNodHlsbWFuXG4gKiBDb3B5cmlnaHQoYykgMjAxNC0yMDE1IERvdWdsYXMgQ2hyaXN0b3BoZXIgV2lsc29uXG4gKiBNSVQgTGljZW5zZWRcbiAqL1xuXG4ndXNlIHN0cmljdCc7XG5cbi8qKlxuICogTW9kdWxlIGRlcGVuZGVuY2llcy5cbiAqIEBwcml2YXRlXG4gKi9cblxudmFyIGFjY2VwdHMgPSByZXF1aXJlKCdhY2NlcHRzJyk7XG52YXIgZGVwcmVjYXRlID0gcmVxdWlyZSgnZGVwZCcpKCdleHByZXNzJyk7XG52YXIgaXNJUCA9IHJlcXVpcmUoJ25ldCcpLmlzSVA7XG52YXIgdHlwZWlzID0gcmVxdWlyZSgndHlwZS1pcycpO1xudmFyIGh0dHAgPSByZXF1aXJlKCdodHRwJyk7XG52YXIgZnJlc2ggPSByZXF1aXJlKCdmcmVzaCcpO1xudmFyIHBhcnNlUmFuZ2UgPSByZXF1aXJlKCdyYW5nZS1wYXJzZXInKTtcbnZhciBwYXJzZSA9IHJlcXVpcmUoJ3BhcnNldXJsJyk7XG52YXIgcHJveHlhZGRyID0gcmVxdWlyZSgncHJveHktYWRkcicpO1xuXG4vKipcbiAqIFJlcXVlc3QgcHJvdG90eXBlLlxuICogQHB1YmxpY1xuICovXG5cbnZhciByZXEgPSBPYmplY3QuY3JlYXRlKGh0dHAuSW5jb21pbmdNZXNzYWdlLnByb3RvdHlwZSlcblxuLyoqXG4gKiBNb2R1bGUgZXhwb3J0cy5cbiAqIEBwdWJsaWNcbiAqL1xuXG5tb2R1bGUuZXhwb3J0cyA9IHJlcVxuXG4vKipcbiAqIFJldHVybiByZXF1ZXN0IGhlYWRlci5cbiAqXG4gKiBUaGUgYFJlZmVycmVyYCBoZWFkZXIgZmllbGQgaXMgc3BlY2lhbC1jYXNlZCxcbiAqIGJvdGggYFJlZmVycmVyYCBhbmQgYFJlZmVyZXJgIGFyZSBpbnRlcmNoYW5nZWFibGUuXG4gKlxuICogRXhhbXBsZXM6XG4gKlxuICogICAgIHJlcS5nZXQoJ0NvbnRlbnQtVHlwZScpO1xuICogICAgIC8vID0+IFwidGV4dC9wbGFpblwiXG4gKlxuICogICAgIHJlcS5nZXQoJ2NvbnRlbnQtdHlwZScpO1xuICogICAgIC8vID0+IFwidGV4dC9wbGFpblwiXG4gKlxuICogICAgIHJlcS5nZXQoJ1NvbWV0aGluZycpO1xuICogICAgIC8vID0+IHVuZGVmaW5lZFxuICpcbiAqIEFsaWFzZWQgYXMgYHJlcS5oZWFkZXIoKWAuXG4gKlxuICogQHBhcmFtIHtTdHJpbmd9IG5hbWVcbiAqIEByZXR1cm4ge1N0cmluZ31cbiAqIEBwdWJsaWNcbiAqL1xuXG5yZXEuZ2V0ID1cbnJlcS5oZWFkZXIgPSBmdW5jdGlvbiBoZWFkZXIobmFtZSkge1xuICBpZiAoIW5hbWUpIHtcbiAgICB0aHJvdyBuZXcgVHlwZUVycm9yKCduYW1lIGFyZ3VtZW50IGlzIHJlcXVpcmVkIHRvIHJlcS5nZXQnKTtcbiAgfVxuXG4gIGlmICh0eXBlb2YgbmFtZSAhPT0gJ3N0cmluZycpIHtcbiAgICB0aHJvdyBuZXcgVHlwZUVycm9yKCduYW1lIG11c3QgYmUgYSBzdHJpbmcgdG8gcmVxLmdldCcpO1xuICB9XG5cbiAgdmFyIGxjID0gbmFtZS50b0xvd2VyQ2FzZSgpO1xuXG4gIHN3aXRjaCAobGMpIHtcbiAgICBjYXNlICdyZWZlcmVyJzpcbiAgICBjYXNlICdyZWZlcnJlcic6XG4gICAgICByZXR1cm4gdGhpcy5oZWFkZXJzLnJlZmVycmVyXG4gICAgICAgIHx8IHRoaXMuaGVhZGVycy5yZWZlcmVyO1xuICAgIGRlZmF1bHQ6XG4gICAgICByZXR1cm4gdGhpcy5oZWFkZXJzW2xjXTtcbiAgfVxufTtcblxuLyoqXG4gKiBUbyBkbzogdXBkYXRlIGRvY3MuXG4gKlxuICogQ2hlY2sgaWYgdGhlIGdpdmVuIGB0eXBlKHMpYCBpcyBhY2NlcHRhYmxlLCByZXR1cm5pbmdcbiAqIHRoZSBiZXN0IG1hdGNoIHdoZW4gdHJ1ZSwgb3RoZXJ3aXNlIGB1bmRlZmluZWRgLCBpbiB3aGljaFxuICogY2FzZSB5b3Ugc2hvdWxkIHJlc3BvbmQgd2l0aCA0MDYgXCJOb3QgQWNjZXB0YWJsZVwiLlxuICpcbiAqIFRoZSBgdHlwZWAgdmFsdWUgbWF5IGJlIGEgc2luZ2xlIE1JTUUgdHlwZSBzdHJpbmdcbiAqIHN1Y2ggYXMgXCJhcHBsaWNhdGlvbi9qc29uXCIsIGFuIGV4dGVuc2lvbiBuYW1lXG4gKiBzdWNoIGFzIFwianNvblwiLCBhIGNvbW1hLWRlbGltaXRlZCBsaXN0IHN1Y2ggYXMgXCJqc29uLCBodG1sLCB0ZXh0L3BsYWluXCIsXG4gKiBhbiBhcmd1bWVudCBsaXN0IHN1Y2ggYXMgYFwianNvblwiLCBcImh0bWxcIiwgXCJ0ZXh0L3BsYWluXCJgLFxuICogb3IgYW4gYXJyYXkgYFtcImpzb25cIiwgXCJodG1sXCIsIFwidGV4dC9wbGFpblwiXWAuIFdoZW4gYSBsaXN0XG4gKiBvciBhcnJheSBpcyBnaXZlbiwgdGhlIF9iZXN0XyBtYXRjaCwgaWYgYW55IGlzIHJldHVybmVkLlxuICpcbiAqIEV4YW1wbGVzOlxuICpcbiAqICAgICAvLyBBY2NlcHQ6IHRleHQvaHRtbFxuICogICAgIHJlcS5hY2NlcHRzKCdodG1sJyk7XG4gKiAgICAgLy8gPT4gXCJodG1sXCJcbiAqXG4gKiAgICAgLy8gQWNjZXB0OiB0ZXh0LyosIGFwcGxpY2F0aW9uL2pzb25cbiAqICAgICByZXEuYWNjZXB0cygnaHRtbCcpO1xuICogICAgIC8vID0+IFwiaHRtbFwiXG4gKiAgICAgcmVxLmFjY2VwdHMoJ3RleHQvaHRtbCcpO1xuICogICAgIC8vID0+IFwidGV4dC9odG1sXCJcbiAqICAgICByZXEuYWNjZXB0cygnanNvbiwgdGV4dCcpO1xuICogICAgIC8vID0+IFwianNvblwiXG4gKiAgICAgcmVxLmFjY2VwdHMoJ2FwcGxpY2F0aW9uL2pzb24nKTtcbiAqICAgICAvLyA9PiBcImFwcGxpY2F0aW9uL2pzb25cIlxuICpcbiAqICAgICAvLyBBY2NlcHQ6IHRleHQvKiwgYXBwbGljYXRpb24vanNvblxuICogICAgIHJlcS5hY2NlcHRzKCdpbWFnZS9wbmcnKTtcbiAqICAgICByZXEuYWNjZXB0cygncG5nJyk7XG4gKiAgICAgLy8gPT4gdW5kZWZpbmVkXG4gKlxuICogICAgIC8vIEFjY2VwdDogdGV4dC8qO3E9LjUsIGFwcGxpY2F0aW9uL2pzb25cbiAqICAgICByZXEuYWNjZXB0cyhbJ2h0bWwnLCAnanNvbiddKTtcbiAqICAgICByZXEuYWNjZXB0cygnaHRtbCcsICdqc29uJyk7XG4gKiAgICAgcmVxLmFjY2VwdHMoJ2h0bWwsIGpzb24nKTtcbiAqICAgICAvLyA9PiBcImpzb25cIlxuICpcbiAqIEBwYXJhbSB7U3RyaW5nfEFycmF5fSB0eXBlKHMpXG4gKiBAcmV0dXJuIHtTdHJpbmd8QXJyYXl8Qm9vbGVhbn1cbiAqIEBwdWJsaWNcbiAqL1xuXG5yZXEuYWNjZXB0cyA9IGZ1bmN0aW9uKCl7XG4gIHZhciBhY2NlcHQgPSBhY2NlcHRzKHRoaXMpO1xuICByZXR1cm4gYWNjZXB0LnR5cGVzLmFwcGx5KGFjY2VwdCwgYXJndW1lbnRzKTtcbn07XG5cbi8qKlxuICogQ2hlY2sgaWYgdGhlIGdpdmVuIGBlbmNvZGluZ2BzIGFyZSBhY2NlcHRlZC5cbiAqXG4gKiBAcGFyYW0ge1N0cmluZ30gLi4uZW5jb2RpbmdcbiAqIEByZXR1cm4ge1N0cmluZ3xBcnJheX1cbiAqIEBwdWJsaWNcbiAqL1xuXG5yZXEuYWNjZXB0c0VuY29kaW5ncyA9IGZ1bmN0aW9uKCl7XG4gIHZhciBhY2NlcHQgPSBhY2NlcHRzKHRoaXMpO1xuICByZXR1cm4gYWNjZXB0LmVuY29kaW5ncy5hcHBseShhY2NlcHQsIGFyZ3VtZW50cyk7XG59O1xuXG5yZXEuYWNjZXB0c0VuY29kaW5nID0gZGVwcmVjYXRlLmZ1bmN0aW9uKHJlcS5hY2NlcHRzRW5jb2RpbmdzLFxuICAncmVxLmFjY2VwdHNFbmNvZGluZzogVXNlIGFjY2VwdHNFbmNvZGluZ3MgaW5zdGVhZCcpO1xuXG4vKipcbiAqIENoZWNrIGlmIHRoZSBnaXZlbiBgY2hhcnNldGBzIGFyZSBhY2NlcHRhYmxlLFxuICogb3RoZXJ3aXNlIHlvdSBzaG91bGQgcmVzcG9uZCB3aXRoIDQwNiBcIk5vdCBBY2NlcHRhYmxlXCIuXG4gKlxuICogQHBhcmFtIHtTdHJpbmd9IC4uLmNoYXJzZXRcbiAqIEByZXR1cm4ge1N0cmluZ3xBcnJheX1cbiAqIEBwdWJsaWNcbiAqL1xuXG5yZXEuYWNjZXB0c0NoYXJzZXRzID0gZnVuY3Rpb24oKXtcbiAgdmFyIGFjY2VwdCA9IGFjY2VwdHModGhpcyk7XG4gIHJldHVybiBhY2NlcHQuY2hhcnNldHMuYXBwbHkoYWNjZXB0LCBhcmd1bWVudHMpO1xufTtcblxucmVxLmFjY2VwdHNDaGFyc2V0ID0gZGVwcmVjYXRlLmZ1bmN0aW9uKHJlcS5hY2NlcHRzQ2hhcnNldHMsXG4gICdyZXEuYWNjZXB0c0NoYXJzZXQ6IFVzZSBhY2NlcHRzQ2hhcnNldHMgaW5zdGVhZCcpO1xuXG4vKipcbiAqIENoZWNrIGlmIHRoZSBnaXZlbiBgbGFuZ2BzIGFyZSBhY2NlcHRhYmxlLFxuICogb3RoZXJ3aXNlIHlvdSBzaG91bGQgcmVzcG9uZCB3aXRoIDQwNiBcIk5vdCBBY2NlcHRhYmxlXCIuXG4gKlxuICogQHBhcmFtIHtTdHJpbmd9IC4uLmxhbmdcbiAqIEByZXR1cm4ge1N0cmluZ3xBcnJheX1cbiAqIEBwdWJsaWNcbiAqL1xuXG5yZXEuYWNjZXB0c0xhbmd1YWdlcyA9IGZ1bmN0aW9uKCl7XG4gIHZhciBhY2NlcHQgPSBhY2NlcHRzKHRoaXMpO1xuICByZXR1cm4gYWNjZXB0Lmxhbmd1YWdlcy5hcHBseShhY2NlcHQsIGFyZ3VtZW50cyk7XG59O1xuXG5yZXEuYWNjZXB0c0xhbmd1YWdlID0gZGVwcmVjYXRlLmZ1bmN0aW9uKHJlcS5hY2NlcHRzTGFuZ3VhZ2VzLFxuICAncmVxLmFjY2VwdHNMYW5ndWFnZTogVXNlIGFjY2VwdHNMYW5ndWFnZXMgaW5zdGVhZCcpO1xuXG4vKipcbiAqIFBhcnNlIFJhbmdlIGhlYWRlciBmaWVsZCwgY2FwcGluZyB0byB0aGUgZ2l2ZW4gYHNpemVgLlxuICpcbiAqIFVuc3BlY2lmaWVkIHJhbmdlcyBzdWNoIGFzIFwiMC1cIiByZXF1aXJlIGtub3dsZWRnZSBvZiB5b3VyIHJlc291cmNlIGxlbmd0aC4gSW5cbiAqIHRoZSBjYXNlIG9mIGEgYnl0ZSByYW5nZSB0aGlzIGlzIG9mIGNvdXJzZSB0aGUgdG90YWwgbnVtYmVyIG9mIGJ5dGVzLiBJZiB0aGVcbiAqIFJhbmdlIGhlYWRlciBmaWVsZCBpcyBub3QgZ2l2ZW4gYHVuZGVmaW5lZGAgaXMgcmV0dXJuZWQsIGAtMWAgd2hlbiB1bnNhdGlzZmlhYmxlLFxuICogYW5kIGAtMmAgd2hlbiBzeW50YWN0aWNhbGx5IGludmFsaWQuXG4gKlxuICogV2hlbiByYW5nZXMgYXJlIHJldHVybmVkLCB0aGUgYXJyYXkgaGFzIGEgXCJ0eXBlXCIgcHJvcGVydHkgd2hpY2ggaXMgdGhlIHR5cGUgb2ZcbiAqIHJhbmdlIHRoYXQgaXMgcmVxdWlyZWQgKG1vc3QgY29tbW9ubHksIFwiYnl0ZXNcIikuIEVhY2ggYXJyYXkgZWxlbWVudCBpcyBhbiBvYmplY3RcbiAqIHdpdGggYSBcInN0YXJ0XCIgYW5kIFwiZW5kXCIgcHJvcGVydHkgZm9yIHRoZSBwb3J0aW9uIG9mIHRoZSByYW5nZS5cbiAqXG4gKiBUaGUgXCJjb21iaW5lXCIgb3B0aW9uIGNhbiBiZSBzZXQgdG8gYHRydWVgIGFuZCBvdmVybGFwcGluZyAmIGFkamFjZW50IHJhbmdlc1xuICogd2lsbCBiZSBjb21iaW5lZCBpbnRvIGEgc2luZ2xlIHJhbmdlLlxuICpcbiAqIE5PVEU6IHJlbWVtYmVyIHRoYXQgcmFuZ2VzIGFyZSBpbmNsdXNpdmUsIHNvIGZvciBleGFtcGxlIFwiUmFuZ2U6IHVzZXJzPTAtM1wiXG4gKiBzaG91bGQgcmVzcG9uZCB3aXRoIDQgdXNlcnMgd2hlbiBhdmFpbGFibGUsIG5vdCAzLlxuICpcbiAqIEBwYXJhbSB7bnVtYmVyfSBzaXplXG4gKiBAcGFyYW0ge29iamVjdH0gW29wdGlvbnNdXG4gKiBAcGFyYW0ge2Jvb2xlYW59IFtvcHRpb25zLmNvbWJpbmU9ZmFsc2VdXG4gKiBAcmV0dXJuIHtudW1iZXJ8YXJyYXl9XG4gKiBAcHVibGljXG4gKi9cblxucmVxLnJhbmdlID0gZnVuY3Rpb24gcmFuZ2Uoc2l6ZSwgb3B0aW9ucykge1xuICB2YXIgcmFuZ2UgPSB0aGlzLmdldCgnUmFuZ2UnKTtcbiAgaWYgKCFyYW5nZSkgcmV0dXJuO1xuICByZXR1cm4gcGFyc2VSYW5nZShzaXplLCByYW5nZSwgb3B0aW9ucyk7XG59O1xuXG4vKipcbiAqIFJldHVybiB0aGUgdmFsdWUgb2YgcGFyYW0gYG5hbWVgIHdoZW4gcHJlc2VudCBvciBgZGVmYXVsdFZhbHVlYC5cbiAqXG4gKiAgLSBDaGVja3Mgcm91dGUgcGxhY2Vob2xkZXJzLCBleDogXy91c2VyLzppZF9cbiAqICAtIENoZWNrcyBib2R5IHBhcmFtcywgZXg6IGlkPTEyLCB7XCJpZFwiOjEyfVxuICogIC0gQ2hlY2tzIHF1ZXJ5IHN0cmluZyBwYXJhbXMsIGV4OiA/aWQ9MTJcbiAqXG4gKiBUbyB1dGlsaXplIHJlcXVlc3QgYm9kaWVzLCBgcmVxLmJvZHlgXG4gKiBzaG91bGQgYmUgYW4gb2JqZWN0LiBUaGlzIGNhbiBiZSBkb25lIGJ5IHVzaW5nXG4gKiB0aGUgYGJvZHlQYXJzZXIoKWAgbWlkZGxld2FyZS5cbiAqXG4gKiBAcGFyYW0ge1N0cmluZ30gbmFtZVxuICogQHBhcmFtIHtNaXhlZH0gW2RlZmF1bHRWYWx1ZV1cbiAqIEByZXR1cm4ge1N0cmluZ31cbiAqIEBwdWJsaWNcbiAqL1xuXG5yZXEucGFyYW0gPSBmdW5jdGlvbiBwYXJhbShuYW1lLCBkZWZhdWx0VmFsdWUpIHtcbiAgdmFyIHBhcmFtcyA9IHRoaXMucGFyYW1zIHx8IHt9O1xuICB2YXIgYm9keSA9IHRoaXMuYm9keSB8fCB7fTtcbiAgdmFyIHF1ZXJ5ID0gdGhpcy5xdWVyeSB8fCB7fTtcblxuICB2YXIgYXJncyA9IGFyZ3VtZW50cy5sZW5ndGggPT09IDFcbiAgICA/ICduYW1lJ1xuICAgIDogJ25hbWUsIGRlZmF1bHQnO1xuICBkZXByZWNhdGUoJ3JlcS5wYXJhbSgnICsgYXJncyArICcpOiBVc2UgcmVxLnBhcmFtcywgcmVxLmJvZHksIG9yIHJlcS5xdWVyeSBpbnN0ZWFkJyk7XG5cbiAgaWYgKG51bGwgIT0gcGFyYW1zW25hbWVdICYmIHBhcmFtcy5oYXNPd25Qcm9wZXJ0eShuYW1lKSkgcmV0dXJuIHBhcmFtc1tuYW1lXTtcbiAgaWYgKG51bGwgIT0gYm9keVtuYW1lXSkgcmV0dXJuIGJvZHlbbmFtZV07XG4gIGlmIChudWxsICE9IHF1ZXJ5W25hbWVdKSByZXR1cm4gcXVlcnlbbmFtZV07XG5cbiAgcmV0dXJuIGRlZmF1bHRWYWx1ZTtcbn07XG5cbi8qKlxuICogQ2hlY2sgaWYgdGhlIGluY29taW5nIHJlcXVlc3QgY29udGFpbnMgdGhlIFwiQ29udGVudC1UeXBlXCJcbiAqIGhlYWRlciBmaWVsZCwgYW5kIGl0IGNvbnRhaW5zIHRoZSBnaXZlbiBtaW1lIGB0eXBlYC5cbiAqXG4gKiBFeGFtcGxlczpcbiAqXG4gKiAgICAgIC8vIFdpdGggQ29udGVudC1UeXBlOiB0ZXh0L2h0bWw7IGNoYXJzZXQ9dXRmLThcbiAqICAgICAgcmVxLmlzKCdodG1sJyk7XG4gKiAgICAgIHJlcS5pcygndGV4dC9odG1sJyk7XG4gKiAgICAgIHJlcS5pcygndGV4dC8qJyk7XG4gKiAgICAgIC8vID0+IHRydWVcbiAqXG4gKiAgICAgIC8vIFdoZW4gQ29udGVudC1UeXBlIGlzIGFwcGxpY2F0aW9uL2pzb25cbiAqICAgICAgcmVxLmlzKCdqc29uJyk7XG4gKiAgICAgIHJlcS5pcygnYXBwbGljYXRpb24vanNvbicpO1xuICogICAgICByZXEuaXMoJ2FwcGxpY2F0aW9uLyonKTtcbiAqICAgICAgLy8gPT4gdHJ1ZVxuICpcbiAqICAgICAgcmVxLmlzKCdodG1sJyk7XG4gKiAgICAgIC8vID0+IGZhbHNlXG4gKlxuICogQHBhcmFtIHtTdHJpbmd8QXJyYXl9IHR5cGVzLi4uXG4gKiBAcmV0dXJuIHtTdHJpbmd8ZmFsc2V8bnVsbH1cbiAqIEBwdWJsaWNcbiAqL1xuXG5yZXEuaXMgPSBmdW5jdGlvbiBpcyh0eXBlcykge1xuICB2YXIgYXJyID0gdHlwZXM7XG5cbiAgLy8gc3VwcG9ydCBmbGF0dGVuZWQgYXJndW1lbnRzXG4gIGlmICghQXJyYXkuaXNBcnJheSh0eXBlcykpIHtcbiAgICBhcnIgPSBuZXcgQXJyYXkoYXJndW1lbnRzLmxlbmd0aCk7XG4gICAgZm9yICh2YXIgaSA9IDA7IGkgPCBhcnIubGVuZ3RoOyBpKyspIHtcbiAgICAgIGFycltpXSA9IGFyZ3VtZW50c1tpXTtcbiAgICB9XG4gIH1cblxuICByZXR1cm4gdHlwZWlzKHRoaXMsIGFycik7XG59O1xuXG4vKipcbiAqIFJldHVybiB0aGUgcHJvdG9jb2wgc3RyaW5nIFwiaHR0cFwiIG9yIFwiaHR0cHNcIlxuICogd2hlbiByZXF1ZXN0ZWQgd2l0aCBUTFMuIFdoZW4gdGhlIFwidHJ1c3QgcHJveHlcIlxuICogc2V0dGluZyB0cnVzdHMgdGhlIHNvY2tldCBhZGRyZXNzLCB0aGVcbiAqIFwiWC1Gb3J3YXJkZWQtUHJvdG9cIiBoZWFkZXIgZmllbGQgd2lsbCBiZSB0cnVzdGVkXG4gKiBhbmQgdXNlZCBpZiBwcmVzZW50LlxuICpcbiAqIElmIHlvdSdyZSBydW5uaW5nIGJlaGluZCBhIHJldmVyc2UgcHJveHkgdGhhdFxuICogc3VwcGxpZXMgaHR0cHMgZm9yIHlvdSB0aGlzIG1heSBiZSBlbmFibGVkLlxuICpcbiAqIEByZXR1cm4ge1N0cmluZ31cbiAqIEBwdWJsaWNcbiAqL1xuXG5kZWZpbmVHZXR0ZXIocmVxLCAncHJvdG9jb2wnLCBmdW5jdGlvbiBwcm90b2NvbCgpe1xuICB2YXIgcHJvdG8gPSB0aGlzLmNvbm5lY3Rpb24uZW5jcnlwdGVkXG4gICAgPyAnaHR0cHMnXG4gICAgOiAnaHR0cCc7XG4gIHZhciB0cnVzdCA9IHRoaXMuYXBwLmdldCgndHJ1c3QgcHJveHkgZm4nKTtcblxuICBpZiAoIXRydXN0KHRoaXMuY29ubmVjdGlvbi5yZW1vdGVBZGRyZXNzLCAwKSkge1xuICAgIHJldHVybiBwcm90bztcbiAgfVxuXG4gIC8vIE5vdGU6IFgtRm9yd2FyZGVkLVByb3RvIGlzIG5vcm1hbGx5IG9ubHkgZXZlciBhXG4gIC8vICAgICAgIHNpbmdsZSB2YWx1ZSwgYnV0IHRoaXMgaXMgdG8gYmUgc2FmZS5cbiAgdmFyIGhlYWRlciA9IHRoaXMuZ2V0KCdYLUZvcndhcmRlZC1Qcm90bycpIHx8IHByb3RvXG4gIHZhciBpbmRleCA9IGhlYWRlci5pbmRleE9mKCcsJylcblxuICByZXR1cm4gaW5kZXggIT09IC0xXG4gICAgPyBoZWFkZXIuc3Vic3RyaW5nKDAsIGluZGV4KS50cmltKClcbiAgICA6IGhlYWRlci50cmltKClcbn0pO1xuXG4vKipcbiAqIFNob3J0LWhhbmQgZm9yOlxuICpcbiAqICAgIHJlcS5wcm90b2NvbCA9PT0gJ2h0dHBzJ1xuICpcbiAqIEByZXR1cm4ge0Jvb2xlYW59XG4gKiBAcHVibGljXG4gKi9cblxuZGVmaW5lR2V0dGVyKHJlcSwgJ3NlY3VyZScsIGZ1bmN0aW9uIHNlY3VyZSgpe1xuICByZXR1cm4gdGhpcy5wcm90b2NvbCA9PT0gJ2h0dHBzJztcbn0pO1xuXG4vKipcbiAqIFJldHVybiB0aGUgcmVtb3RlIGFkZHJlc3MgZnJvbSB0aGUgdHJ1c3RlZCBwcm94eS5cbiAqXG4gKiBUaGUgaXMgdGhlIHJlbW90ZSBhZGRyZXNzIG9uIHRoZSBzb2NrZXQgdW5sZXNzXG4gKiBcInRydXN0IHByb3h5XCIgaXMgc2V0LlxuICpcbiAqIEByZXR1cm4ge1N0cmluZ31cbiAqIEBwdWJsaWNcbiAqL1xuXG5kZWZpbmVHZXR0ZXIocmVxLCAnaXAnLCBmdW5jdGlvbiBpcCgpe1xuICB2YXIgdHJ1c3QgPSB0aGlzLmFwcC5nZXQoJ3RydXN0IHByb3h5IGZuJyk7XG4gIHJldHVybiBwcm94eWFkZHIodGhpcywgdHJ1c3QpO1xufSk7XG5cbi8qKlxuICogV2hlbiBcInRydXN0IHByb3h5XCIgaXMgc2V0LCB0cnVzdGVkIHByb3h5IGFkZHJlc3NlcyArIGNsaWVudC5cbiAqXG4gKiBGb3IgZXhhbXBsZSBpZiB0aGUgdmFsdWUgd2VyZSBcImNsaWVudCwgcHJveHkxLCBwcm94eTJcIlxuICogeW91IHdvdWxkIHJlY2VpdmUgdGhlIGFycmF5IGBbXCJjbGllbnRcIiwgXCJwcm94eTFcIiwgXCJwcm94eTJcIl1gXG4gKiB3aGVyZSBcInByb3h5MlwiIGlzIHRoZSBmdXJ0aGVzdCBkb3duLXN0cmVhbSBhbmQgXCJwcm94eTFcIiBhbmRcbiAqIFwicHJveHkyXCIgd2VyZSB0cnVzdGVkLlxuICpcbiAqIEByZXR1cm4ge0FycmF5fVxuICogQHB1YmxpY1xuICovXG5cbmRlZmluZUdldHRlcihyZXEsICdpcHMnLCBmdW5jdGlvbiBpcHMoKSB7XG4gIHZhciB0cnVzdCA9IHRoaXMuYXBwLmdldCgndHJ1c3QgcHJveHkgZm4nKTtcbiAgdmFyIGFkZHJzID0gcHJveHlhZGRyLmFsbCh0aGlzLCB0cnVzdCk7XG5cbiAgLy8gcmV2ZXJzZSB0aGUgb3JkZXIgKHRvIGZhcnRoZXN0IC0+IGNsb3Nlc3QpXG4gIC8vIGFuZCByZW1vdmUgc29ja2V0IGFkZHJlc3NcbiAgYWRkcnMucmV2ZXJzZSgpLnBvcCgpXG5cbiAgcmV0dXJuIGFkZHJzXG59KTtcblxuLyoqXG4gKiBSZXR1cm4gc3ViZG9tYWlucyBhcyBhbiBhcnJheS5cbiAqXG4gKiBTdWJkb21haW5zIGFyZSB0aGUgZG90LXNlcGFyYXRlZCBwYXJ0cyBvZiB0aGUgaG9zdCBiZWZvcmUgdGhlIG1haW4gZG9tYWluIG9mXG4gKiB0aGUgYXBwLiBCeSBkZWZhdWx0LCB0aGUgZG9tYWluIG9mIHRoZSBhcHAgaXMgYXNzdW1lZCB0byBiZSB0aGUgbGFzdCB0d29cbiAqIHBhcnRzIG9mIHRoZSBob3N0LiBUaGlzIGNhbiBiZSBjaGFuZ2VkIGJ5IHNldHRpbmcgXCJzdWJkb21haW4gb2Zmc2V0XCIuXG4gKlxuICogRm9yIGV4YW1wbGUsIGlmIHRoZSBkb21haW4gaXMgXCJ0b2JpLmZlcnJldHMuZXhhbXBsZS5jb21cIjpcbiAqIElmIFwic3ViZG9tYWluIG9mZnNldFwiIGlzIG5vdCBzZXQsIHJlcS5zdWJkb21haW5zIGlzIGBbXCJmZXJyZXRzXCIsIFwidG9iaVwiXWAuXG4gKiBJZiBcInN1YmRvbWFpbiBvZmZzZXRcIiBpcyAzLCByZXEuc3ViZG9tYWlucyBpcyBgW1widG9iaVwiXWAuXG4gKlxuICogQHJldHVybiB7QXJyYXl9XG4gKiBAcHVibGljXG4gKi9cblxuZGVmaW5lR2V0dGVyKHJlcSwgJ3N1YmRvbWFpbnMnLCBmdW5jdGlvbiBzdWJkb21haW5zKCkge1xuICB2YXIgaG9zdG5hbWUgPSB0aGlzLmhvc3RuYW1lO1xuXG4gIGlmICghaG9zdG5hbWUpIHJldHVybiBbXTtcblxuICB2YXIgb2Zmc2V0ID0gdGhpcy5hcHAuZ2V0KCdzdWJkb21haW4gb2Zmc2V0Jyk7XG4gIHZhciBzdWJkb21haW5zID0gIWlzSVAoaG9zdG5hbWUpXG4gICAgPyBob3N0bmFtZS5zcGxpdCgnLicpLnJldmVyc2UoKVxuICAgIDogW2hvc3RuYW1lXTtcblxuICByZXR1cm4gc3ViZG9tYWlucy5zbGljZShvZmZzZXQpO1xufSk7XG5cbi8qKlxuICogU2hvcnQtaGFuZCBmb3IgYHVybC5wYXJzZShyZXEudXJsKS5wYXRobmFtZWAuXG4gKlxuICogQHJldHVybiB7U3RyaW5nfVxuICogQHB1YmxpY1xuICovXG5cbmRlZmluZUdldHRlcihyZXEsICdwYXRoJywgZnVuY3Rpb24gcGF0aCgpIHtcbiAgcmV0dXJuIHBhcnNlKHRoaXMpLnBhdGhuYW1lO1xufSk7XG5cbi8qKlxuICogUGFyc2UgdGhlIFwiSG9zdFwiIGhlYWRlciBmaWVsZCB0byBhIGhvc3RuYW1lLlxuICpcbiAqIFdoZW4gdGhlIFwidHJ1c3QgcHJveHlcIiBzZXR0aW5nIHRydXN0cyB0aGUgc29ja2V0XG4gKiBhZGRyZXNzLCB0aGUgXCJYLUZvcndhcmRlZC1Ib3N0XCIgaGVhZGVyIGZpZWxkIHdpbGxcbiAqIGJlIHRydXN0ZWQuXG4gKlxuICogQHJldHVybiB7U3RyaW5nfVxuICogQHB1YmxpY1xuICovXG5cbmRlZmluZUdldHRlcihyZXEsICdob3N0bmFtZScsIGZ1bmN0aW9uIGhvc3RuYW1lKCl7XG4gIHZhciB0cnVzdCA9IHRoaXMuYXBwLmdldCgndHJ1c3QgcHJveHkgZm4nKTtcbiAgdmFyIGhvc3QgPSB0aGlzLmdldCgnWC1Gb3J3YXJkZWQtSG9zdCcpO1xuXG4gIGlmICghaG9zdCB8fCAhdHJ1c3QodGhpcy5jb25uZWN0aW9uLnJlbW90ZUFkZHJlc3MsIDApKSB7XG4gICAgaG9zdCA9IHRoaXMuZ2V0KCdIb3N0Jyk7XG4gIH0gZWxzZSBpZiAoaG9zdC5pbmRleE9mKCcsJykgIT09IC0xKSB7XG4gICAgLy8gTm90ZTogWC1Gb3J3YXJkZWQtSG9zdCBpcyBub3JtYWxseSBvbmx5IGV2ZXIgYVxuICAgIC8vICAgICAgIHNpbmdsZSB2YWx1ZSwgYnV0IHRoaXMgaXMgdG8gYmUgc2FmZS5cbiAgICBob3N0ID0gaG9zdC5zdWJzdHJpbmcoMCwgaG9zdC5pbmRleE9mKCcsJykpLnRyaW1SaWdodCgpXG4gIH1cblxuICBpZiAoIWhvc3QpIHJldHVybjtcblxuICAvLyBJUHY2IGxpdGVyYWwgc3VwcG9ydFxuICB2YXIgb2Zmc2V0ID0gaG9zdFswXSA9PT0gJ1snXG4gICAgPyBob3N0LmluZGV4T2YoJ10nKSArIDFcbiAgICA6IDA7XG4gIHZhciBpbmRleCA9IGhvc3QuaW5kZXhPZignOicsIG9mZnNldCk7XG5cbiAgcmV0dXJuIGluZGV4ICE9PSAtMVxuICAgID8gaG9zdC5zdWJzdHJpbmcoMCwgaW5kZXgpXG4gICAgOiBob3N0O1xufSk7XG5cbi8vIFRPRE86IGNoYW5nZSByZXEuaG9zdCB0byByZXR1cm4gaG9zdCBpbiBuZXh0IG1ham9yXG5cbmRlZmluZUdldHRlcihyZXEsICdob3N0JywgZGVwcmVjYXRlLmZ1bmN0aW9uKGZ1bmN0aW9uIGhvc3QoKXtcbiAgcmV0dXJuIHRoaXMuaG9zdG5hbWU7XG59LCAncmVxLmhvc3Q6IFVzZSByZXEuaG9zdG5hbWUgaW5zdGVhZCcpKTtcblxuLyoqXG4gKiBDaGVjayBpZiB0aGUgcmVxdWVzdCBpcyBmcmVzaCwgYWthXG4gKiBMYXN0LU1vZGlmaWVkIGFuZC9vciB0aGUgRVRhZ1xuICogc3RpbGwgbWF0Y2guXG4gKlxuICogQHJldHVybiB7Qm9vbGVhbn1cbiAqIEBwdWJsaWNcbiAqL1xuXG5kZWZpbmVHZXR0ZXIocmVxLCAnZnJlc2gnLCBmdW5jdGlvbigpe1xuICB2YXIgbWV0aG9kID0gdGhpcy5tZXRob2Q7XG4gIHZhciByZXMgPSB0aGlzLnJlc1xuICB2YXIgc3RhdHVzID0gcmVzLnN0YXR1c0NvZGVcblxuICAvLyBHRVQgb3IgSEVBRCBmb3Igd2VhayBmcmVzaG5lc3MgdmFsaWRhdGlvbiBvbmx5XG4gIGlmICgnR0VUJyAhPT0gbWV0aG9kICYmICdIRUFEJyAhPT0gbWV0aG9kKSByZXR1cm4gZmFsc2U7XG5cbiAgLy8gMnh4IG9yIDMwNCBhcyBwZXIgcmZjMjYxNiAxNC4yNlxuICBpZiAoKHN0YXR1cyA+PSAyMDAgJiYgc3RhdHVzIDwgMzAwKSB8fCAzMDQgPT09IHN0YXR1cykge1xuICAgIHJldHVybiBmcmVzaCh0aGlzLmhlYWRlcnMsIHtcbiAgICAgICdldGFnJzogcmVzLmdldCgnRVRhZycpLFxuICAgICAgJ2xhc3QtbW9kaWZpZWQnOiByZXMuZ2V0KCdMYXN0LU1vZGlmaWVkJylcbiAgICB9KVxuICB9XG5cbiAgcmV0dXJuIGZhbHNlO1xufSk7XG5cbi8qKlxuICogQ2hlY2sgaWYgdGhlIHJlcXVlc3QgaXMgc3RhbGUsIGFrYVxuICogXCJMYXN0LU1vZGlmaWVkXCIgYW5kIC8gb3IgdGhlIFwiRVRhZ1wiIGZvciB0aGVcbiAqIHJlc291cmNlIGhhcyBjaGFuZ2VkLlxuICpcbiAqIEByZXR1cm4ge0Jvb2xlYW59XG4gKiBAcHVibGljXG4gKi9cblxuZGVmaW5lR2V0dGVyKHJlcSwgJ3N0YWxlJywgZnVuY3Rpb24gc3RhbGUoKXtcbiAgcmV0dXJuICF0aGlzLmZyZXNoO1xufSk7XG5cbi8qKlxuICogQ2hlY2sgaWYgdGhlIHJlcXVlc3Qgd2FzIGFuIF9YTUxIdHRwUmVxdWVzdF8uXG4gKlxuICogQHJldHVybiB7Qm9vbGVhbn1cbiAqIEBwdWJsaWNcbiAqL1xuXG5kZWZpbmVHZXR0ZXIocmVxLCAneGhyJywgZnVuY3Rpb24geGhyKCl7XG4gIHZhciB2YWwgPSB0aGlzLmdldCgnWC1SZXF1ZXN0ZWQtV2l0aCcpIHx8ICcnO1xuICByZXR1cm4gdmFsLnRvTG93ZXJDYXNlKCkgPT09ICd4bWxodHRwcmVxdWVzdCc7XG59KTtcblxuLyoqXG4gKiBIZWxwZXIgZnVuY3Rpb24gZm9yIGNyZWF0aW5nIGEgZ2V0dGVyIG9uIGFuIG9iamVjdC5cbiAqXG4gKiBAcGFyYW0ge09iamVjdH0gb2JqXG4gKiBAcGFyYW0ge1N0cmluZ30gbmFtZVxuICogQHBhcmFtIHtGdW5jdGlvbn0gZ2V0dGVyXG4gKiBAcHJpdmF0ZVxuICovXG5mdW5jdGlvbiBkZWZpbmVHZXR0ZXIob2JqLCBuYW1lLCBnZXR0ZXIpIHtcbiAgT2JqZWN0LmRlZmluZVByb3BlcnR5KG9iaiwgbmFtZSwge1xuICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZSxcbiAgICBlbnVtZXJhYmxlOiB0cnVlLFxuICAgIGdldDogZ2V0dGVyXG4gIH0pO1xufVxuIl0sIm5hbWVzIjpbImFjY2VwdHMiLCJkZXByZWNhdGUiLCJpc0lQIiwidHlwZWlzIiwiaHR0cCIsImZyZXNoIiwicGFyc2VSYW5nZSIsInBhcnNlIiwicHJveHlhZGRyIiwicmVxIiwiT2JqZWN0IiwiY3JlYXRlIiwiSW5jb21pbmdNZXNzYWdlIiwicHJvdG90eXBlIiwiZGVmaW5lR2V0dGVyIiwib2JqIiwibmFtZSIsImdldHRlciIsImRlZmluZVByb3BlcnR5IiwiY29uZmlndXJhYmxlIiwiZW51bWVyYWJsZSIsImdldCIsIm1vZHVsZSIsImV4cG9ydHMiLCJoZWFkZXIiLCJUeXBlRXJyb3IiLCJsYyIsInRvTG93ZXJDYXNlIiwidGhpcyIsImhlYWRlcnMiLCJyZWZlcnJlciIsInJlZmVyZXIiLCJhY2NlcHQiLCJ0eXBlcyIsImFwcGx5IiwiYXJndW1lbnRzIiwiYWNjZXB0c0VuY29kaW5ncyIsImVuY29kaW5ncyIsImFjY2VwdHNFbmNvZGluZyIsImZ1bmN0aW9uIiwiYWNjZXB0c0NoYXJzZXRzIiwiY2hhcnNldHMiLCJhY2NlcHRzQ2hhcnNldCIsImFjY2VwdHNMYW5ndWFnZXMiLCJsYW5ndWFnZXMiLCJhY2NlcHRzTGFuZ3VhZ2UiLCJyYW5nZSIsInNpemUiLCJvcHRpb25zIiwicGFyYW0iLCJkZWZhdWx0VmFsdWUiLCJwYXJhbXMiLCJib2R5IiwicXVlcnkiLCJsZW5ndGgiLCJoYXNPd25Qcm9wZXJ0eSIsImlzIiwiYXJyIiwiQXJyYXkiLCJpc0FycmF5IiwiaSIsInByb3RvIiwiY29ubmVjdGlvbiIsImVuY3J5cHRlZCIsImFwcCIsInRydXN0IiwicmVtb3RlQWRkcmVzcyIsImluZGV4IiwiaW5kZXhPZiIsInN1YnN0cmluZyIsInRyaW0iLCJwcm90b2NvbCIsImFkZHJzIiwiYWxsIiwicmV2ZXJzZSIsInBvcCIsImhvc3RuYW1lIiwib2Zmc2V0Iiwic3ViZG9tYWlucyIsInNwbGl0Iiwic2xpY2UiLCJwYXRobmFtZSIsImhvc3QiLCJ0cmltUmlnaHQiLCJtZXRob2QiLCJyZXMiLCJzdGF0dXMiLCJzdGF0dXNDb2RlIl0sInNvdXJjZVJvb3QiOiIifQ==