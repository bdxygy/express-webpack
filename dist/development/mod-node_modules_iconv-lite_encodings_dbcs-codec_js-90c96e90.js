"use strict";exports.id="mod-node_modules_iconv-lite_encodings_dbcs-codec_js-90c96e90",exports.ids=["mod-node_modules_iconv-lite_encodings_dbcs-codec_js-90c96e90"],exports.modules={"./node_modules/iconv-lite/encodings/dbcs-codec.js":(e,t,o)=>{var i=o("./node_modules/safer-buffer/safer.js").Buffer;t._dbcs=c;for(var r=-1,d=-2,s=-10,n=-1e3,a=new Array(256),h=0;h<256;h++)a[h]=r;function c(e,t){if(this.encodingName=e.encodingName,!e)throw new Error("DBCS codec is called without the data.");if(!e.table)throw new Error("Encoding '"+this.encodingName+"' has no data.");var o=e.table();this.decodeTables=[],this.decodeTables[0]=a.slice(0),this.decodeTableSeq=[];for(var i=0;i<o.length;i++)this._addDecodeChunk(o[i]);this.defaultCharUnicode=t.defaultCharUnicode,this.encodeTable=[],this.encodeTableSeq=[];var s={};if(e.encodeSkipVals)for(i=0;i<e.encodeSkipVals.length;i++){var h=e.encodeSkipVals[i];if("number"==typeof h)s[h]=!0;else for(var c=h.from;c<=h.to;c++)s[c]=!0}if(this._fillEncodeTable(0,0,s),e.encodeAdd)for(var l in e.encodeAdd)Object.prototype.hasOwnProperty.call(e.encodeAdd,l)&&this._setEncodeChar(l.charCodeAt(0),e.encodeAdd[l]);if(this.defCharSB=this.encodeTable[0][t.defaultCharSingleByte.charCodeAt(0)],this.defCharSB===r&&(this.defCharSB=this.encodeTable[0]["?"]),this.defCharSB===r&&(this.defCharSB="?".charCodeAt(0)),"function"==typeof e.gb18030){this.gb18030=e.gb18030();var f=this.decodeTables.length,u=this.decodeTables[f]=a.slice(0),b=this.decodeTables.length,g=this.decodeTables[b]=a.slice(0);for(i=129;i<=254;i++){var v=n-this.decodeTables[0][i],p=this.decodeTables[v];for(c=48;c<=57;c++)p[c]=n-f}for(i=129;i<=254;i++)u[i]=n-b;for(i=48;i<=57;i++)g[i]=d}}function l(e,t){this.leadSurrogate=-1,this.seqObj=void 0,this.encodeTable=t.encodeTable,this.encodeTableSeq=t.encodeTableSeq,this.defaultCharSingleByte=t.defCharSB,this.gb18030=t.gb18030}function f(e,t){this.nodeIdx=0,this.prevBuf=i.alloc(0),this.decodeTables=t.decodeTables,this.decodeTableSeq=t.decodeTableSeq,this.defaultCharUnicode=t.defaultCharUnicode,this.gb18030=t.gb18030}function u(e,t){if(e[0]>t)return-1;for(var o=0,i=e.length;o<i-1;){var r=o+Math.floor((i-o+1)/2);e[r]<=t?o=r:i=r}return o}c.prototype.encoder=l,c.prototype.decoder=f,c.prototype._getDecodeTrieNode=function(e){for(var t=[];e>0;e>>=8)t.push(255&e);0==t.length&&t.push(0);for(var o=this.decodeTables[0],i=t.length-1;i>0;i--){var d=o[t[i]];if(d==r)o[t[i]]=n-this.decodeTables.length,this.decodeTables.push(o=a.slice(0));else{if(!(d<=n))throw new Error("Overwrite byte in "+this.encodingName+", addr: "+e.toString(16));o=this.decodeTables[n-d]}}return o},c.prototype._addDecodeChunk=function(e){var t=parseInt(e[0],16),o=this._getDecodeTrieNode(t);t&=255;for(var i=1;i<e.length;i++){var r=e[i];if("string"==typeof r)for(var d=0;d<r.length;){var n=r.charCodeAt(d++);if(55296<=n&&n<56320){var a=r.charCodeAt(d++);if(!(56320<=a&&a<57344))throw new Error("Incorrect surrogate pair in "+this.encodingName+" at chunk "+e[0]);o[t++]=65536+1024*(n-55296)+(a-56320)}else if(4080<n&&n<=4095){for(var h=4095-n+2,c=[],l=0;l<h;l++)c.push(r.charCodeAt(d++));o[t++]=s-this.decodeTableSeq.length,this.decodeTableSeq.push(c)}else o[t++]=n}else{if("number"!=typeof r)throw new Error("Incorrect type '"+typeof r+"' given in "+this.encodingName+" at chunk "+e[0]);var f=o[t-1]+1;for(d=0;d<r;d++)o[t++]=f++}}if(t>255)throw new Error("Incorrect chunk in "+this.encodingName+" at addr "+e[0]+": too long"+t)},c.prototype._getEncodeBucket=function(e){var t=e>>8;return void 0===this.encodeTable[t]&&(this.encodeTable[t]=a.slice(0)),this.encodeTable[t]},c.prototype._setEncodeChar=function(e,t){var o=this._getEncodeBucket(e),i=255&e;o[i]<=s?this.encodeTableSeq[s-o[i]][-1]=t:o[i]==r&&(o[i]=t)},c.prototype._setEncodeSequence=function(e,t){var o,i=e[0],d=this._getEncodeBucket(i),n=255&i;d[n]<=s?o=this.encodeTableSeq[s-d[n]]:(o={},d[n]!==r&&(o[-1]=d[n]),d[n]=s-this.encodeTableSeq.length,this.encodeTableSeq.push(o));for(var a=1;a<e.length-1;a++){var h=o[i];"object"==typeof h?o=h:(o=o[i]={},void 0!==h&&(o[-1]=h))}o[i=e[e.length-1]]=t},c.prototype._fillEncodeTable=function(e,t,o){for(var i=this.decodeTables[e],r=0;r<256;r++){var d=i[r],a=t+r;o[a]||(d>=0?this._setEncodeChar(d,a):d<=n?this._fillEncodeTable(n-d,a<<8,o):d<=s&&this._setEncodeSequence(this.decodeTableSeq[s-d],a))}},l.prototype.write=function(e){for(var t=i.alloc(e.length*(this.gb18030?4:3)),o=this.leadSurrogate,d=this.seqObj,n=-1,a=0,h=0;;){if(-1===n){if(a==e.length)break;var c=e.charCodeAt(a++)}else{c=n;n=-1}if(55296<=c&&c<57344)if(c<56320){if(-1===o){o=c;continue}o=c,c=r}else-1!==o?(c=65536+1024*(o-55296)+(c-56320),o=-1):c=r;else-1!==o&&(n=c,c=r,o=-1);var l=r;if(void 0!==d&&c!=r){var f=d[c];if("object"==typeof f){d=f;continue}"number"==typeof f?l=f:null==f&&void 0!==(f=d[-1])&&(l=f,n=c),d=void 0}else if(c>=0){var b=this.encodeTable[c>>8];if(void 0!==b&&(l=b[255&c]),l<=s){d=this.encodeTableSeq[s-l];continue}if(l==r&&this.gb18030){var g=u(this.gb18030.uChars,c);if(-1!=g){l=this.gb18030.gbChars[g]+(c-this.gb18030.uChars[g]);t[h++]=129+Math.floor(l/12600),l%=12600,t[h++]=48+Math.floor(l/1260),l%=1260,t[h++]=129+Math.floor(l/10),l%=10,t[h++]=48+l;continue}}}l===r&&(l=this.defaultCharSingleByte),l<256?t[h++]=l:l<65536?(t[h++]=l>>8,t[h++]=255&l):(t[h++]=l>>16,t[h++]=l>>8&255,t[h++]=255&l)}return this.seqObj=d,this.leadSurrogate=o,t.slice(0,h)},l.prototype.end=function(){if(-1!==this.leadSurrogate||void 0!==this.seqObj){var e=i.alloc(10),t=0;if(this.seqObj){var o=this.seqObj[-1];void 0!==o&&(o<256?e[t++]=o:(e[t++]=o>>8,e[t++]=255&o)),this.seqObj=void 0}return-1!==this.leadSurrogate&&(e[t++]=this.defaultCharSingleByte,this.leadSurrogate=-1),e.slice(0,t)}},l.prototype.findIdx=u,f.prototype.write=function(e){var t=i.alloc(2*e.length),o=this.nodeIdx,a=this.prevBuf,h=this.prevBuf.length,c=-this.prevBuf.length;h>0&&(a=i.concat([a,e.slice(0,10)]));for(var l=0,f=0;l<e.length;l++){var b,g=l>=0?e[l]:a[l+h];if((b=this.decodeTables[o][g])>=0);else if(b===r)l=c,b=this.defaultCharUnicode.charCodeAt(0);else if(b===d){var v=c>=0?e.slice(c,l+1):a.slice(c+h,l+1+h),p=12600*(v[0]-129)+1260*(v[1]-48)+10*(v[2]-129)+(v[3]-48),T=u(this.gb18030.gbChars,p);b=this.gb18030.uChars[T]+p-this.gb18030.gbChars[T]}else{if(b<=n){o=n-b;continue}if(!(b<=s))throw new Error("iconv-lite internal error: invalid decoding table value "+b+" at "+o+"/"+g);for(var S=this.decodeTableSeq[s-b],C=0;C<S.length-1;C++)b=S[C],t[f++]=255&b,t[f++]=b>>8;b=S[S.length-1]}if(b>65535){b-=65536;var y=55296+Math.floor(b/1024);t[f++]=255&y,t[f++]=y>>8,b=56320+b%1024}t[f++]=255&b,t[f++]=b>>8,o=0,c=l+1}return this.nodeIdx=o,this.prevBuf=c>=0?e.slice(c):a.slice(c+h),t.slice(0,f).toString("ucs2")},f.prototype.end=function(){for(var e="";this.prevBuf.length>0;){e+=this.defaultCharUnicode;var t=this.prevBuf.slice(1);this.prevBuf=i.alloc(0),this.nodeIdx=0,t.length>0&&(e+=this.write(t))}return this.nodeIdx=0,e}}};
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoibW9kLW5vZGVfbW9kdWxlc19pY29udi1saXRlX2VuY29kaW5nc19kYmNzLWNvZGVjX2pzLTkwYzk2ZTkwLmpzIiwibWFwcGluZ3MiOiJtUEFDQSxJQUFJQSxFQUFTLGlEQU1iQyxFQUFRQyxNQUFRQyxFQVNoQixJQVBBLElBQUlDLEdBQWMsRUFDZEMsR0FBZ0IsRUFDaEJDLEdBQWMsR0FDZEMsR0FBYyxJQUNkQyxFQUFrQixJQUFJQyxNQUFNLEtBR3ZCQyxFQUFJLEVBQUdBLEVBQUksSUFBT0EsSUFDdkJGLEVBQWdCRSxHQUFLTixFQUl6QixTQUFTRCxFQUFVUSxFQUFjQyxHQUU3QixHQURBQyxLQUFLQyxhQUFlSCxFQUFhRyxjQUM1QkgsRUFDRCxNQUFNLElBQUlJLE1BQU0sMENBQ3BCLElBQUtKLEVBQWFLLE1BQ2QsTUFBTSxJQUFJRCxNQUFNLGFBQWVGLEtBQUtDLGFBQWUsa0JBR3ZELElBQUlHLEVBQWVOLEVBQWFLLFFBWWhDSCxLQUFLSyxhQUFlLEdBQ3BCTCxLQUFLSyxhQUFhLEdBQUtWLEVBQWdCVyxNQUFNLEdBRzdDTixLQUFLTyxlQUFpQixHQUd0QixJQUFLLElBQUlWLEVBQUksRUFBR0EsRUFBSU8sRUFBYUksT0FBUVgsSUFDckNHLEtBQUtTLGdCQUFnQkwsRUFBYVAsSUFFdENHLEtBQUtVLG1CQUFxQlgsRUFBTVcsbUJBVWhDVixLQUFLVyxZQUFjLEdBTW5CWCxLQUFLWSxlQUFpQixHQUd0QixJQUFJQyxFQUFrQixDQUFDLEVBQ3ZCLEdBQUlmLEVBQWFnQixlQUNiLElBQVNqQixFQUFJLEVBQUdBLEVBQUlDLEVBQWFnQixlQUFlTixPQUFRWCxJQUFLLENBQ3pELElBQUlrQixFQUFNakIsRUFBYWdCLGVBQWVqQixHQUN0QyxHQUFtQixpQkFBUmtCLEVBQ1BGLEVBQWdCRSxJQUFPLE9BRXZCLElBQUssSUFBSUMsRUFBSUQsRUFBSUUsS0FBTUQsR0FBS0QsRUFBSUcsR0FBSUYsSUFDaENILEVBQWdCRyxJQUFLLENBQ2pDLENBTUosR0FIQWhCLEtBQUtt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QUFNLEdBRzdCTixLQUFLNkMsUUFBVTFELEVBQU8yRCxNQUFNLEdBQzVCOUMsS0FBSzRDLFFBQVUsRUFDWGlELEVBQUlyRixPQUFTLElBQ2I2RixHQUFPckcsS0FBS21GLE1BQU1VLEdBQzFCLENBR0EsT0FEQTdGLEtBQUs0QyxRQUFVLEVBQ1J5RCxDQUNYLEMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9AYmR4eWd5L2V4cHJlc3Mtd2VicGFjay8uL25vZGVfbW9kdWxlcy9pY29udi1saXRlL2VuY29kaW5ncy9kYmNzLWNvZGVjLmpzIl0sInNvdXJjZXNDb250ZW50IjpbIlwidXNlIHN0cmljdFwiO1xudmFyIEJ1ZmZlciA9IHJlcXVpcmUoXCJzYWZlci1idWZmZXJcIikuQnVmZmVyO1xuXG4vLyBNdWx0aWJ5dGUgY29kZWMuIEluIHRoaXMgc2NoZW1lLCBhIGNoYXJhY3RlciBpcyByZXByZXNlbnRlZCBieSAxIG9yIG1vcmUgYnl0ZXMuXG4vLyBPdXIgY29kZWMgc3VwcG9ydHMgVVRGLTE2IHN1cnJvZ2F0ZXMsIGV4dGVuc2lvbnMgZm9yIEdCMTgwMzAgYW5kIHVuaWNvZGUgc2VxdWVuY2VzLlxuLy8gVG8gc2F2ZSBtZW1vcnkgYW5kIGxvYWRpbmcgdGltZSwgd2UgcmVhZCB0YWJsZSBmaWxlcyBvbmx5IHdoZW4gcmVxdWVzdGVkLlxuXG5leHBvcnRzLl9kYmNzID0gREJDU0NvZGVjO1xuXG52YXIgVU5BU1NJR05FRCA9IC0xLFxuICAgIEdCMTgwMzBfQ09ERSA9IC0yLFxuICAgIFNFUV9TVEFSVCAgPSAtMTAsXG4gICAgTk9ERV9TVEFSVCA9IC0xMDAwLFxuICAgIFVOQVNTSUdORURfTk9ERSA9IG5ldyBBcnJheSgweDEwMCksXG4gICAgREVGX0NIQVIgPSAtMTtcblxuZm9yICh2YXIgaSA9IDA7IGkgPCAweDEwMDsgaSsrKVxuICAgIFVOQVNTSUdORURfTk9ERVtpXSA9IFVOQVNTSUdORUQ7XG5cblxuLy8gQ2xhc3MgREJDU0NvZGVjIHJlYWRzIGFuZCBpbml0aWFsaXplcyBtYXBwaW5nIHRhYmxlcy5cbmZ1bmN0aW9uIERCQ1NDb2RlYyhjb2RlY09wdGlvbnMsIGljb252KSB7XG4gICAgdGhpcy5lbmNvZGluZ05hbWUgPSBjb2RlY09wdGlvbnMuZW5jb2RpbmdOYW1lO1xuICAgIGlmICghY29kZWNPcHRpb25zKVxuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJEQkNTIGNvZGVjIGlzIGNhbGxlZCB3aXRob3V0IHRoZSBkYXRhLlwiKVxuICAgIGlmICghY29kZWNPcHRpb25zLnRhYmxlKVxuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJFbmNvZGluZyAnXCIgKyB0aGlzLmVuY29kaW5nTmFtZSArIFwiJyBoYXMgbm8gZGF0YS5cIik7XG5cbiAgICAvLyBMb2FkIHRhYmxlcy5cbiAgICB2YXIgbWFwcGluZ1RhYmxlID0gY29kZWNPcHRpb25zLnRhYmxlKCk7XG5cblxuICAgIC8vIERlY29kZSB0YWJsZXM6IE1CQ1MgLT4gVW5pY29kZS5cblxuICAgIC8vIGRlY29kZVRhYmxlcyBpcyBhIHRyaWUsIGVuY29kZWQgYXMgYW4gYXJyYXkgb2YgYXJyYXlzIG9mIGludGVnZXJzLiBJbnRlcm5hbCBhcnJheXMgYXJlIHRyaWUgbm9kZXMgYW5kIGFsbCBoYXZlIGxlbiA9IDI1Ni5cbiAgICAvLyBUcmllIHJvb3QgaXMgZGVjb2RlVGFibGVzWzBdLlxuICAgIC8vIFZhbHVlczogPj0gIDAgLT4gdW5pY29kZSBjaGFyYWN0ZXIgY29kZS4gY2FuIGJlID4gMHhGRkZGXG4gICAgLy8gICAgICAgICA9PSBVTkFTU0lHTkVEIC0+IHVua25vd24vdW5hc3NpZ25lZCBzZXF1ZW5jZS5cbiAgICAvLyAgICAgICAgID09IEdCMTgwMzBfQ09ERSAtPiB0aGlzIGlzIHRoZSBlbmQgb2YgYSBHQjE4MDMwIDQtYnl0ZSBzZXF1ZW5jZS5cbiAgICAvLyAgICAgICAgIDw9IE5PREVfU1RBUlQgLT4gaW5kZXggb2YgdGhlIG5leHQgbm9kZSBpbiBvdXIgdHJpZSB0byBwcm9jZXNzIG5leHQgYnl0ZS5cbiAgICAvLyAgICAgICAgIDw9IFNFUV9TVEFSVCAgLT4gaW5kZXggb2YgdGhlIHN0YXJ0IG9mIGEgY2hhcmFjdGVyIGNvZGUgc2VxdWVuY2UsIGluIGRlY29kZVRhYmxlU2VxLlxuICAgIHRoaXMuZGVjb2RlVGFibGVzID0gW107XG4gICAgdGhpcy5kZWNvZGVUYWJsZXNbMF0gPSBVTkFTU0lHTkVEX05PREUuc2xpY2UoMCk7IC8vIENyZWF0ZSByb290IG5vZGUuXG5cbiAgICAvLyBTb21ldGltZXMgYSBNQkNTIGNoYXIgY29ycmVzcG9uZHMgdG8gYSBzZXF1ZW5jZSBvZiB1bmljb2RlIGNoYXJzLiBXZSBzdG9yZSB0aGVtIGFzIGFycmF5cyBvZiBpbnRlZ2VycyBoZXJlLiBcbiAgICB0aGlzLmRlY29kZVRhYmxlU2VxID0gW107XG5cbiAgICAvLyBBY3R1YWwgbWFwcGluZyB0YWJsZXMgY29uc2lzdCBvZiBjaHVua3MuIFVzZSB0aGVtIHRvIGZpbGwgdXAgZGVjb2RlIHRhYmxlcy5cbiAgICBmb3IgKHZhciBpID0gMDsgaSA8IG1hcHBpbmdUYWJsZS5sZW5ndGg7IGkrKylcbiAgICAgICAgdGhpcy5fYWRkRGVjb2RlQ2h1bmsobWFwcGluZ1RhYmxlW2ldKTtcblxuICAgIHRoaXMuZGVmYXVsdENoYXJVbmljb2RlID0gaWNvbnYuZGVmYXVsdENoYXJVbmljb2RlO1xuXG4gICAgXG4gICAgLy8gRW5jb2RlIHRhYmxlczogVW5pY29kZSAtPiBEQkNTLlxuXG4gICAgLy8gYGVuY29kZVRhYmxlYCBpcyBhcnJheSBtYXBwaW5nIGZyb20gdW5pY29kZSBjaGFyIHRvIGVuY29kZWQgY2hhci4gQWxsIGl0cyB2YWx1ZXMgYXJlIGludGVnZXJzIGZvciBwZXJmb3JtYW5jZS5cbiAgICAvLyBCZWNhdXNlIGl0IGNhbiBiZSBzcGFyc2UsIGl0IGlzIHJlcHJlc2VudGVkIGFzIGFycmF5IG9mIGJ1Y2tldHMgYnkgMjU2IGNoYXJzIGVhY2guIEJ1Y2tldCBjYW4gYmUgbnVsbC5cbiAgICAvLyBWYWx1ZXM6ID49ICAwIC0+IGl0IGlzIGEgbm9ybWFsIGNoYXIuIFdyaXRlIHRoZSB2YWx1ZSAoaWYgPD0yNTYgdGhlbiAxIGJ5dGUsIGlmIDw9NjU1MzYgdGhlbiAyIGJ5dGVzLCBldGMuKS5cbiAgICAvLyAgICAgICAgID09IFVOQVNTSUdORUQgLT4gbm8gY29udmVyc2lvbiBmb3VuZC4gT3V0cHV0IGEgZGVmYXVsdCBjaGFyLlxuICAgIC8vICAgICAgICAgPD0gU0VRX1NUQVJUICAtPiBpdCdzIGFuIGluZGV4IGluIGVuY29kZVRhYmxlU2VxLCBzZWUgYmVsb3cuIFRoZSBjaGFyYWN0ZXIgc3RhcnRzIGEgc2VxdWVuY2UuXG4gICAgdGhpcy5lbmNvZGVUYWJsZSA9IFtdO1xuICAgIFxuICAgIC8vIGBlbmNvZGVUYWJsZVNlcWAgaXMgdXNlZCB3aGVuIGEgc2VxdWVuY2Ugb2YgdW5pY29kZSBjaGFyYWN0ZXJzIGlzIGVuY29kZWQgYXMgYSBzaW5nbGUgY29kZS4gV2UgdXNlIGEgdHJlZSBvZlxuICAgIC8vIG9iamVjdHMgd2hlcmUga2V5cyBjb3JyZXNwb25kIHRvIGNoYXJhY3RlcnMgaW4gc2VxdWVuY2UgYW5kIGxlYWZzIGFyZSB0aGUgZW5jb2RlZCBkYmNzIHZhbHVlcy4gQSBzcGVjaWFsIERFRl9DSEFSIGtleVxuICAgIC8vIG1lYW5zIGVuZCBvZiBzZXF1ZW5jZSAobmVlZGVkIHdoZW4gb25lIHNlcXVlbmNlIGlzIGEgc3RyaWN0IHN1YnNlcXVlbmNlIG9mIGFub3RoZXIpLlxuICAgIC8vIE9iamVjdHMgYXJlIGtlcHQgc2VwYXJhdGVseSBmcm9tIGVuY29kZVRhYmxlIHRvIGluY3JlYXNlIHBlcmZvcm1hbmNlLlxuICAgIHRoaXMuZW5jb2RlVGFibGVTZXEgPSBbXTtcblxuICAgIC8vIFNvbWUgY2hhcnMgY2FuIGJlIGRlY29kZWQsIGJ1dCBuZWVkIG5vdCBiZSBlbmNvZGVkLlxuICAgIHZhciBza2lwRW5jb2RlQ2hhcnMgPSB7fTtcbiAgICBpZiAoY29kZWNPcHRpb25zLmVuY29kZVNraXBWYWxzKVxuICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IGNvZGVjT3B0aW9ucy5lbmNvZGVTa2lwVmFscy5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgdmFyIHZhbCA9IGNvZGVjT3B0aW9ucy5lbmNvZGVTa2lwVmFsc1tpXTtcbiAgICAgICAgICAgIGlmICh0eXBlb2YgdmFsID09PSAnbnVtYmVyJylcbiAgICAgICAgICAgICAgICBza2lwRW5jb2RlQ2hhcnNbdmFsXSA9IHRydWU7XG4gICAgICAgICAgICBlbHNlXG4gICAgICAgICAgICAgICAgZm9yICh2YXIgaiA9IHZhbC5mcm9tOyBqIDw9IHZhbC50bzsgaisrKVxuICAgICAgICAgICAgICAgICAgICBza2lwRW5jb2RlQ2hhcnNbal0gPSB0cnVlO1xuICAgICAgICB9XG4gICAgICAgIFxuICAgIC8vIFVzZSBkZWNvZGUgdHJpZSB0byByZWN1cnNpdmVseSBmaWxsIG91dCBlbmNvZGUgdGFibGVzLlxuICAgIHRoaXMuX2ZpbGxFbmNvZGVUYWJsZSgwLCAwLCBza2lwRW5jb2RlQ2hhcnMpO1xuXG4gICAgLy8gQWRkIG1vcmUgZW5jb2RpbmcgcGFpcnMgd2hlbiBuZWVkZWQuXG4gICAgaWYgKGNvZGVjT3B0aW9ucy5lbmNvZGVBZGQpIHtcbiAgICAgICAgZm9yICh2YXIgdUNoYXIgaW4gY29kZWNPcHRpb25zLmVuY29kZUFkZClcbiAgICAgICAgICAgIGlmIChPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwoY29kZWNPcHRpb25zLmVuY29kZUFkZCwgdUNoYXIpKVxuICAgICAgICAgICAgICAgIHRoaXMuX3NldEVuY29kZUNoYXIodUNoYXIuY2hhckNvZGVBdCgwKSwgY29kZWNPcHRpb25zLmVuY29kZUFkZFt1Q2hhcl0pO1xuICAgIH1cblxuICAgIHRoaXMuZGVmQ2hhclNCICA9IHRoaXMuZW5jb2RlVGFibGVbMF1baWNvbnYuZGVmYXVsdENoYXJTaW5nbGVCeXRlLmNoYXJDb2RlQXQoMCldO1xuICAgIGlmICh0aGlzLmRlZkNoYXJTQiA9PT0gVU5BU1NJR05FRCkgdGhpcy5kZWZDaGFyU0IgPSB0aGlzLmVuY29kZVRhYmxlWzBdWyc/J107XG4gICAgaWYgKHRoaXMuZGVmQ2hhclNCID09PSBVTkFTU0lHTkVEKSB0aGlzLmRlZkNoYXJTQiA9IFwiP1wiLmNoYXJDb2RlQXQoMCk7XG5cblxuICAgIC8vIExvYWQgJiBjcmVhdGUgR0IxODAzMCB0YWJsZXMgd2hlbiBuZWVkZWQuXG4gICAgaWYgKHR5cGVvZiBjb2RlY09wdGlvbnMuZ2IxODAzMCA9PT0gJ2Z1bmN0aW9uJykge1xuICAgICAgICB0aGlzLmdiMTgwMzAgPSBjb2RlY09wdGlvbnMuZ2IxODAzMCgpOyAvLyBMb2FkIEdCMTgwMzAgcmFuZ2VzLlxuXG4gICAgICAgIC8vIEFkZCBHQjE4MDMwIGRlY29kZSB0YWJsZXMuXG4gICAgICAgIHZhciB0aGlyZEJ5dGVOb2RlSWR4ID0gdGhpcy5kZWNvZGVUYWJsZXMubGVuZ3RoO1xuICAgICAgICB2YXIgdGhpcmRCeXRlTm9kZSA9IHRoaXMuZGVjb2RlVGFibGVzW3RoaXJkQnl0ZU5vZGVJZHhdID0gVU5BU1NJR05FRF9OT0RFLnNsaWNlKDApO1xuXG4gICAgICAgIHZhciBmb3VydGhCeXRlTm9kZUlkeCA9IHRoaXMuZGVjb2RlVGFibGVzLmxlbmd0aDtcbiAgICAgICAgdmFyIGZvdXJ0aEJ5dGVOb2RlID0gdGhpcy5kZWNvZGVUYWJsZXNbZm91cnRoQnl0ZU5vZGVJZHhdID0gVU5BU1NJR05FRF9OT0RFLnNsaWNlKDApO1xuXG4gICAgICAgIGZvciAodmFyIGkgPSAweDgxOyBpIDw9IDB4RkU7IGkrKykge1xuICAgICAgICAgICAgdmFyIHNlY29uZEJ5dGVOb2RlSWR4ID0gTk9ERV9TVEFSVCAtIHRoaXMuZGVjb2RlVGFibGVzWzBdW2ldO1xuICAgICAgICAgICAgdmFyIHNlY29uZEJ5dGVOb2RlID0gdGhpcy5kZWNvZGVUYWJsZXNbc2Vjb25kQnl0ZU5vZGVJZHhdO1xuICAgICAgICAgICAgZm9yICh2YXIgaiA9IDB4MzA7IGogPD0gMHgzOTsgaisrKVxuICAgICAgICAgICAgICAgIHNlY29uZEJ5dGVOb2RlW2pdID0gTk9ERV9TVEFSVCAtIHRoaXJkQnl0ZU5vZGVJZHg7XG4gICAgICAgIH1cbiAgICAgICAgZm9yICh2YXIgaSA9IDB4ODE7IGkgPD0gMHhGRTsgaSsrKVxuICAgICAgICAgICAgdGhpcmRCeXRlTm9kZVtpXSA9IE5PREVfU1RBUlQgLSBmb3VydGhCeXRlTm9kZUlkeDtcbiAgICAgICAgZm9yICh2YXIgaSA9IDB4MzA7IGkgPD0gMHgzOTsgaSsrKVxuICAgICAgICAgICAgZm91cnRoQnl0ZU5vZGVbaV0gPSBHQjE4MDMwX0NPREVcbiAgICB9ICAgICAgICBcbn1cblxuREJDU0NvZGVjLnByb3RvdHlwZS5lbmNvZGVyID0gREJDU0VuY29kZXI7XG5EQkNTQ29kZWMucHJvdG90eXBlLmRlY29kZXIgPSBEQkNTRGVjb2RlcjtcblxuLy8gRGVjb2RlciBoZWxwZXJzXG5EQkNTQ29kZWMucHJvdG90eXBlLl9nZXREZWNvZGVUcmllTm9kZSA9IGZ1bmN0aW9uKGFkZHIpIHtcbiAgICB2YXIgYnl0ZXMgPSBbXTtcbiAgICBmb3IgKDsgYWRkciA+IDA7IGFkZHIgPj49IDgpXG4gICAgICAgIGJ5dGVzLnB1c2goYWRkciAmIDB4RkYpO1xuICAgIGlmIChieXRlcy5sZW5ndGggPT0gMClcbiAgICAgICAgYnl0ZXMucHVzaCgwKTtcblxuICAgIHZhciBub2RlID0gdGhpcy5kZWNvZGVUYWJsZXNbMF07XG4gICAgZm9yICh2YXIgaSA9IGJ5dGVzLmxlbmd0aC0xOyBpID4gMDsgaS0tKSB7IC8vIFRyYXZlcnNlIG5vZGVzIGRlZXBlciBpbnRvIHRoZSB0cmllLlxuICAgICAgICB2YXIgdmFsID0gbm9kZVtieXRlc1tpXV07XG5cbiAgICAgICAgaWYgKHZhbCA9PSBVTkFTU0lHTkVEKSB7IC8vIENyZWF0ZSBuZXcgbm9kZS5cbiAgICAgICAgICAgIG5vZGVbYnl0ZXNbaV1dID0gTk9ERV9TVEFSVCAtIHRoaXMuZGVjb2RlVGFibGVzLmxlbmd0aDtcbiAgICAgICAgICAgIHRoaXMuZGVjb2RlVGFibGVzLnB1c2gobm9kZSA9IFVOQVNTSUdORURfTk9ERS5zbGljZSgwKSk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZiAodmFsIDw9IE5PREVfU1RBUlQpIHsgLy8gRXhpc3Rpbmcgbm9kZS5cbiAgICAgICAgICAgIG5vZGUgPSB0aGlzLmRlY29kZVRhYmxlc1tOT0RFX1NUQVJUIC0gdmFsXTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlXG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJPdmVyd3JpdGUgYnl0ZSBpbiBcIiArIHRoaXMuZW5jb2RpbmdOYW1lICsgXCIsIGFkZHI6IFwiICsgYWRkci50b1N0cmluZygxNikpO1xuICAgIH1cbiAgICByZXR1cm4gbm9kZTtcbn1cblxuXG5EQkNTQ29kZWMucHJvdG90eXBlLl9hZGREZWNvZGVDaHVuayA9IGZ1bmN0aW9uKGNodW5rKSB7XG4gICAgLy8gRmlyc3QgZWxlbWVudCBvZiBjaHVuayBpcyB0aGUgaGV4IG1iY3MgY29kZSB3aGVyZSB3ZSBzdGFydC5cbiAgICB2YXIgY3VyQWRkciA9IHBhcnNlSW50KGNodW5rWzBdLCAxNik7XG5cbiAgICAvLyBDaG9vc2UgdGhlIGRlY29kaW5nIG5vZGUgd2hlcmUgd2UnbGwgd3JpdGUgb3VyIGNoYXJzLlxuICAgIHZhciB3cml0ZVRhYmxlID0gdGhpcy5fZ2V0RGVjb2RlVHJpZU5vZGUoY3VyQWRkcik7XG4gICAgY3VyQWRkciA9IGN1ckFkZHIgJiAweEZGO1xuXG4gICAgLy8gV3JpdGUgYWxsIG90aGVyIGVsZW1lbnRzIG9mIHRoZSBjaHVuayB0byB0aGUgdGFibGUuXG4gICAgZm9yICh2YXIgayA9IDE7IGsgPCBjaHVuay5sZW5ndGg7IGsrKykge1xuICAgICAgICB2YXIgcGFydCA9IGNodW5rW2tdO1xuICAgICAgICBpZiAodHlwZW9mIHBhcnQgPT09IFwic3RyaW5nXCIpIHsgLy8gU3RyaW5nLCB3cml0ZSBhcy1pcy5cbiAgICAgICAgICAgIGZvciAodmFyIGwgPSAwOyBsIDwgcGFydC5sZW5ndGg7KSB7XG4gICAgICAgICAgICAgICAgdmFyIGNvZGUgPSBwYXJ0LmNoYXJDb2RlQXQobCsrKTtcbiAgICAgICAgICAgICAgICBpZiAoMHhEODAwIDw9IGNvZGUgJiYgY29kZSA8IDB4REMwMCkgeyAvLyBEZWNvZGUgc3Vycm9nYXRlXG4gICAgICAgICAgICAgICAgICAgIHZhciBjb2RlVHJhaWwgPSBwYXJ0LmNoYXJDb2RlQXQobCsrKTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKDB4REMwMCA8PSBjb2RlVHJhaWwgJiYgY29kZVRyYWlsIDwgMHhFMDAwKVxuICAgICAgICAgICAgICAgICAgICAgICAgd3JpdGVUYWJsZVtjdXJBZGRyKytdID0gMHgxMDAwMCArIChjb2RlIC0gMHhEODAwKSAqIDB4NDAwICsgKGNvZGVUcmFpbCAtIDB4REMwMCk7XG4gICAgICAgICAgICAgICAgICAgIGVsc2VcbiAgICAgICAgICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihcIkluY29ycmVjdCBzdXJyb2dhdGUgcGFpciBpbiBcIiAgKyB0aGlzLmVuY29kaW5nTmFtZSArIFwiIGF0IGNodW5rIFwiICsgY2h1bmtbMF0pO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIGlmICgweDBGRjAgPCBjb2RlICYmIGNvZGUgPD0gMHgwRkZGKSB7IC8vIENoYXJhY3RlciBzZXF1ZW5jZSAob3VyIG93biBlbmNvZGluZyB1c2VkKVxuICAgICAgICAgICAgICAgICAgICB2YXIgbGVuID0gMHhGRkYgLSBjb2RlICsgMjtcbiAgICAgICAgICAgICAgICAgICAgdmFyIHNlcSA9IFtdO1xuICAgICAgICAgICAgICAgICAgICBmb3IgKHZhciBtID0gMDsgbSA8IGxlbjsgbSsrKVxuICAgICAgICAgICAgICAgICAgICAgICAgc2VxLnB1c2gocGFydC5jaGFyQ29kZUF0KGwrKykpOyAvLyBTaW1wbGUgdmFyaWF0aW9uOiBkb24ndCBzdXBwb3J0IHN1cnJvZ2F0ZXMgb3Igc3Vic2VxdWVuY2VzIGluIHNlcS5cblxuICAgICAgICAgICAgICAgICAgICB3cml0ZVRhYmxlW2N1ckFkZHIrK10gPSBTRVFfU1RBUlQgLSB0aGlzLmRlY29kZVRhYmxlU2VxLmxlbmd0aDtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5kZWNvZGVUYWJsZVNlcS5wdXNoKHNlcSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2VcbiAgICAgICAgICAgICAgICAgICAgd3JpdGVUYWJsZVtjdXJBZGRyKytdID0gY29kZTsgLy8gQmFzaWMgY2hhclxuICAgICAgICAgICAgfVxuICAgICAgICB9IFxuICAgICAgICBlbHNlIGlmICh0eXBlb2YgcGFydCA9PT0gXCJudW1iZXJcIikgeyAvLyBJbnRlZ2VyLCBtZWFuaW5nIGluY3JlYXNpbmcgc2VxdWVuY2Ugc3RhcnRpbmcgd2l0aCBwcmV2IGNoYXJhY3Rlci5cbiAgICAgICAgICAgIHZhciBjaGFyQ29kZSA9IHdyaXRlVGFibGVbY3VyQWRkciAtIDFdICsgMTtcbiAgICAgICAgICAgIGZvciAodmFyIGwgPSAwOyBsIDwgcGFydDsgbCsrKVxuICAgICAgICAgICAgICAgIHdyaXRlVGFibGVbY3VyQWRkcisrXSA9IGNoYXJDb2RlKys7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZVxuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiSW5jb3JyZWN0IHR5cGUgJ1wiICsgdHlwZW9mIHBhcnQgKyBcIicgZ2l2ZW4gaW4gXCIgICsgdGhpcy5lbmNvZGluZ05hbWUgKyBcIiBhdCBjaHVuayBcIiArIGNodW5rWzBdKTtcbiAgICB9XG4gICAgaWYgKGN1ckFkZHIgPiAweEZGKVxuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJJbmNvcnJlY3QgY2h1bmsgaW4gXCIgICsgdGhpcy5lbmNvZGluZ05hbWUgKyBcIiBhdCBhZGRyIFwiICsgY2h1bmtbMF0gKyBcIjogdG9vIGxvbmdcIiArIGN1ckFkZHIpO1xufVxuXG4vLyBFbmNvZGVyIGhlbHBlcnNcbkRCQ1NDb2RlYy5wcm90b3R5cGUuX2dldEVuY29kZUJ1Y2tldCA9IGZ1bmN0aW9uKHVDb2RlKSB7XG4gICAgdmFyIGhpZ2ggPSB1Q29kZSA+PiA4OyAvLyBUaGlzIGNvdWxkIGJlID4gMHhGRiBiZWNhdXNlIG9mIGFzdHJhbCBjaGFyYWN0ZXJzLlxuICAgIGlmICh0aGlzLmVuY29kZVRhYmxlW2hpZ2hdID09PSB1bmRlZmluZWQpXG4gICAgICAgIHRoaXMuZW5jb2RlVGFibGVbaGlnaF0gPSBVTkFTU0lHTkVEX05PREUuc2xpY2UoMCk7IC8vIENyZWF0ZSBidWNrZXQgb24gZGVtYW5kLlxuICAgIHJldHVybiB0aGlzLmVuY29kZVRhYmxlW2hpZ2hdO1xufVxuXG5EQkNTQ29kZWMucHJvdG90eXBlLl9zZXRFbmNvZGVDaGFyID0gZnVuY3Rpb24odUNvZGUsIGRiY3NDb2RlKSB7XG4gICAgdmFyIGJ1Y2tldCA9IHRoaXMuX2dldEVuY29kZUJ1Y2tldCh1Q29kZSk7XG4gICAgdmFyIGxvdyA9IHVDb2RlICYgMHhGRjtcbiAgICBpZiAoYnVja2V0W2xvd10gPD0gU0VRX1NUQVJUKVxuICAgICAgICB0aGlzLmVuY29kZVRhYmxlU2VxW1NFUV9TVEFSVC1idWNrZXRbbG93XV1bREVGX0NIQVJdID0gZGJjc0NvZGU7IC8vIFRoZXJlJ3MgYWxyZWFkeSBhIHNlcXVlbmNlLCBzZXQgYSBzaW5nbGUtY2hhciBzdWJzZXF1ZW5jZSBvZiBpdC5cbiAgICBlbHNlIGlmIChidWNrZXRbbG93XSA9PSBVTkFTU0lHTkVEKVxuICAgICAgICBidWNrZXRbbG93XSA9IGRiY3NDb2RlO1xufVxuXG5EQkNTQ29kZWMucHJvdG90eXBlLl9zZXRFbmNvZGVTZXF1ZW5jZSA9IGZ1bmN0aW9uKHNlcSwgZGJjc0NvZGUpIHtcbiAgICBcbiAgICAvLyBHZXQgdGhlIHJvb3Qgb2YgY2hhcmFjdGVyIHRyZWUgYWNjb3JkaW5nIHRvIGZpcnN0IGNoYXJhY3RlciBvZiB0aGUgc2VxdWVuY2UuXG4gICAgdmFyIHVDb2RlID0gc2VxWzBdO1xuICAgIHZhciBidWNrZXQgPSB0aGlzLl9nZXRFbmNvZGVCdWNrZXQodUNvZGUpO1xuICAgIHZhciBsb3cgPSB1Q29kZSAmIDB4RkY7XG5cbiAgICB2YXIgbm9kZTtcbiAgICBpZiAoYnVja2V0W2xvd10gPD0gU0VRX1NUQVJUKSB7XG4gICAgICAgIC8vIFRoZXJlJ3MgYWxyZWFkeSBhIHNlcXVlbmNlIHdpdGggIC0gdXNlIGl0LlxuICAgICAgICBub2RlID0gdGhpcy5lbmNvZGVUYWJsZVNlcVtTRVFfU1RBUlQtYnVja2V0W2xvd11dO1xuICAgIH1cbiAgICBlbHNlIHtcbiAgICAgICAgLy8gVGhlcmUgd2FzIG5vIHNlcXVlbmNlIG9iamVjdCAtIGFsbG9jYXRlIGEgbmV3IG9uZS5cbiAgICAgICAgbm9kZSA9IHt9O1xuICAgICAgICBpZiAoYnVja2V0W2xvd10gIT09IFVOQVNTSUdORUQpIG5vZGVbREVGX0NIQVJdID0gYnVja2V0W2xvd107IC8vIElmIGEgY2hhciB3YXMgc2V0IGJlZm9yZSAtIG1ha2UgaXQgYSBzaW5nbGUtY2hhciBzdWJzZXF1ZW5jZS5cbiAgICAgICAgYnVja2V0W2xvd10gPSBTRVFfU1RBUlQgLSB0aGlzLmVuY29kZVRhYmxlU2VxLmxlbmd0aDtcbiAgICAgICAgdGhpcy5lbmNvZGVUYWJsZVNlcS5wdXNoKG5vZGUpO1xuICAgIH1cblxuICAgIC8vIFRyYXZlcnNlIHRoZSBjaGFyYWN0ZXIgdHJlZSwgYWxsb2NhdGluZyBuZXcgbm9kZXMgYXMgbmVlZGVkLlxuICAgIGZvciAodmFyIGogPSAxOyBqIDwgc2VxLmxlbmd0aC0xOyBqKyspIHtcbiAgICAgICAgdmFyIG9sZFZhbCA9IG5vZGVbdUNvZGVdO1xuICAgICAgICBpZiAodHlwZW9mIG9sZFZhbCA9PT0gJ29iamVjdCcpXG4gICAgICAgICAgICBub2RlID0gb2xkVmFsO1xuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIG5vZGUgPSBub2RlW3VDb2RlXSA9IHt9XG4gICAgICAgICAgICBpZiAob2xkVmFsICE9PSB1bmRlZmluZWQpXG4gICAgICAgICAgICAgICAgbm9kZVtERUZfQ0hBUl0gPSBvbGRWYWxcbiAgICAgICAgfVxuICAgIH1cblxuICAgIC8vIFNldCB0aGUgbGVhZiB0byBnaXZlbiBkYmNzQ29kZS5cbiAgICB1Q29kZSA9IHNlcVtzZXEubGVuZ3RoLTFdO1xuICAgIG5vZGVbdUNvZGVdID0gZGJjc0NvZGU7XG59XG5cbkRCQ1NDb2RlYy5wcm90b3R5cGUuX2ZpbGxFbmNvZGVUYWJsZSA9IGZ1bmN0aW9uKG5vZGVJZHgsIHByZWZpeCwgc2tpcEVuY29kZUNoYXJzKSB7XG4gICAgdmFyIG5vZGUgPSB0aGlzLmRlY29kZVRhYmxlc1tub2RlSWR4XTtcbiAgICBmb3IgKHZhciBpID0gMDsgaSA8IDB4MTAwOyBpKyspIHtcbiAgICAgICAgdmFyIHVDb2RlID0gbm9kZVtpXTtcbiAgICAgICAgdmFyIG1iQ29kZSA9IHByZWZpeCArIGk7XG4gICAgICAgIGlmIChza2lwRW5jb2RlQ2hhcnNbbWJDb2RlXSlcbiAgICAgICAgICAgIGNvbnRpbnVlO1xuXG4gICAgICAgIGlmICh1Q29kZSA+PSAwKVxuICAgICAgICAgICAgdGhpcy5fc2V0RW5jb2RlQ2hhcih1Q29kZSwgbWJDb2RlKTtcbiAgICAgICAgZWxzZSBpZiAodUNvZGUgPD0gTk9ERV9TVEFSVClcbiAgICAgICAgICAgIHRoaXMuX2ZpbGxFbmNvZGVUYWJsZShOT0RFX1NUQVJUIC0gdUNvZGUsIG1iQ29kZSA8PCA4LCBza2lwRW5jb2RlQ2hhcnMpO1xuICAgICAgICBlbHNlIGlmICh1Q29kZSA8PSBTRVFfU1RBUlQpXG4gICAgICAgICAgICB0aGlzLl9zZXRFbmNvZGVTZXF1ZW5jZSh0aGlzLmRlY29kZVRhYmxlU2VxW1NFUV9TVEFSVCAtIHVDb2RlXSwgbWJDb2RlKTtcbiAgICB9XG59XG5cblxuXG4vLyA9PSBFbmNvZGVyID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxuXG5mdW5jdGlvbiBEQkNTRW5jb2RlcihvcHRpb25zLCBjb2RlYykge1xuICAgIC8vIEVuY29kZXIgc3RhdGVcbiAgICB0aGlzLmxlYWRTdXJyb2dhdGUgPSAtMTtcbiAgICB0aGlzLnNlcU9iaiA9IHVuZGVmaW5lZDtcbiAgICBcbiAgICAvLyBTdGF0aWMgZGF0YVxuICAgIHRoaXMuZW5jb2RlVGFibGUgPSBjb2RlYy5lbmNvZGVUYWJsZTtcbiAgICB0aGlzLmVuY29kZVRhYmxlU2VxID0gY29kZWMuZW5jb2RlVGFibGVTZXE7XG4gICAgdGhpcy5kZWZhdWx0Q2hhclNpbmdsZUJ5dGUgPSBjb2RlYy5kZWZDaGFyU0I7XG4gICAgdGhpcy5nYjE4MDMwID0gY29kZWMuZ2IxODAzMDtcbn1cblxuREJDU0VuY29kZXIucHJvdG90eXBlLndyaXRlID0gZnVuY3Rpb24oc3RyKSB7XG4gICAgdmFyIG5ld0J1ZiA9IEJ1ZmZlci5hbGxvYyhzdHIubGVuZ3RoICogKHRoaXMuZ2IxODAzMCA/IDQgOiAzKSksXG4gICAgICAgIGxlYWRTdXJyb2dhdGUgPSB0aGlzLmxlYWRTdXJyb2dhdGUsXG4gICAgICAgIHNlcU9iaiA9IHRoaXMuc2VxT2JqLCBuZXh0Q2hhciA9IC0xLFxuICAgICAgICBpID0gMCwgaiA9IDA7XG5cbiAgICB3aGlsZSAodHJ1ZSkge1xuICAgICAgICAvLyAwLiBHZXQgbmV4dCBjaGFyYWN0ZXIuXG4gICAgICAgIGlmIChuZXh0Q2hhciA9PT0gLTEpIHtcbiAgICAgICAgICAgIGlmIChpID09IHN0ci5sZW5ndGgpIGJyZWFrO1xuICAgICAgICAgICAgdmFyIHVDb2RlID0gc3RyLmNoYXJDb2RlQXQoaSsrKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIHZhciB1Q29kZSA9IG5leHRDaGFyO1xuICAgICAgICAgICAgbmV4dENoYXIgPSAtMTsgICAgXG4gICAgICAgIH1cblxuICAgICAgICAvLyAxLiBIYW5kbGUgc3Vycm9nYXRlcy5cbiAgICAgICAgaWYgKDB4RDgwMCA8PSB1Q29kZSAmJiB1Q29kZSA8IDB4RTAwMCkgeyAvLyBDaGFyIGlzIG9uZSBvZiBzdXJyb2dhdGVzLlxuICAgICAgICAgICAgaWYgKHVDb2RlIDwgMHhEQzAwKSB7IC8vIFdlJ3ZlIGdvdCBsZWFkIHN1cnJvZ2F0ZS5cbiAgICAgICAgICAgICAgICBpZiAobGVhZFN1cnJvZ2F0ZSA9PT0gLTEpIHtcbiAgICAgICAgICAgICAgICAgICAgbGVhZFN1cnJvZ2F0ZSA9IHVDb2RlO1xuICAgICAgICAgICAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICBsZWFkU3Vycm9nYXRlID0gdUNvZGU7XG4gICAgICAgICAgICAgICAgICAgIC8vIERvdWJsZSBsZWFkIHN1cnJvZ2F0ZSBmb3VuZC5cbiAgICAgICAgICAgICAgICAgICAgdUNvZGUgPSBVTkFTU0lHTkVEO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0gZWxzZSB7IC8vIFdlJ3ZlIGdvdCB0cmFpbCBzdXJyb2dhdGUuXG4gICAgICAgICAgICAgICAgaWYgKGxlYWRTdXJyb2dhdGUgIT09IC0xKSB7XG4gICAgICAgICAgICAgICAgICAgIHVDb2RlID0gMHgxMDAwMCArIChsZWFkU3Vycm9nYXRlIC0gMHhEODAwKSAqIDB4NDAwICsgKHVDb2RlIC0gMHhEQzAwKTtcbiAgICAgICAgICAgICAgICAgICAgbGVhZFN1cnJvZ2F0ZSA9IC0xO1xuICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIC8vIEluY29tcGxldGUgc3Vycm9nYXRlIHBhaXIgLSBvbmx5IHRyYWlsIHN1cnJvZ2F0ZSBmb3VuZC5cbiAgICAgICAgICAgICAgICAgICAgdUNvZGUgPSBVTkFTU0lHTkVEO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmIChsZWFkU3Vycm9nYXRlICE9PSAtMSkge1xuICAgICAgICAgICAgLy8gSW5jb21wbGV0ZSBzdXJyb2dhdGUgcGFpciAtIG9ubHkgbGVhZCBzdXJyb2dhdGUgZm91bmQuXG4gICAgICAgICAgICBuZXh0Q2hhciA9IHVDb2RlOyB1Q29kZSA9IFVOQVNTSUdORUQ7IC8vIFdyaXRlIGFuIGVycm9yLCB0aGVuIGN1cnJlbnQgY2hhci5cbiAgICAgICAgICAgIGxlYWRTdXJyb2dhdGUgPSAtMTtcbiAgICAgICAgfVxuXG4gICAgICAgIC8vIDIuIENvbnZlcnQgdUNvZGUgY2hhcmFjdGVyLlxuICAgICAgICB2YXIgZGJjc0NvZGUgPSBVTkFTU0lHTkVEO1xuICAgICAgICBpZiAoc2VxT2JqICE9PSB1bmRlZmluZWQgJiYgdUNvZGUgIT0gVU5BU1NJR05FRCkgeyAvLyBXZSBhcmUgaW4gdGhlIG1pZGRsZSBvZiB0aGUgc2VxdWVuY2VcbiAgICAgICAgICAgIHZhciByZXNDb2RlID0gc2VxT2JqW3VDb2RlXTtcbiAgICAgICAgICAgIGlmICh0eXBlb2YgcmVzQ29kZSA9PT0gJ29iamVjdCcpIHsgLy8gU2VxdWVuY2UgY29udGludWVzLlxuICAgICAgICAgICAgICAgIHNlcU9iaiA9IHJlc0NvZGU7XG4gICAgICAgICAgICAgICAgY29udGludWU7XG5cbiAgICAgICAgICAgIH0gZWxzZSBpZiAodHlwZW9mIHJlc0NvZGUgPT0gJ251bWJlcicpIHsgLy8gU2VxdWVuY2UgZmluaXNoZWQuIFdyaXRlIGl0LlxuICAgICAgICAgICAgICAgIGRiY3NDb2RlID0gcmVzQ29kZTtcblxuICAgICAgICAgICAgfSBlbHNlIGlmIChyZXNDb2RlID09IHVuZGVmaW5lZCkgeyAvLyBDdXJyZW50IGNoYXJhY3RlciBpcyBub3QgcGFydCBvZiB0aGUgc2VxdWVuY2UuXG5cbiAgICAgICAgICAgICAgICAvLyBUcnkgZGVmYXVsdCBjaGFyYWN0ZXIgZm9yIHRoaXMgc2VxdWVuY2VcbiAgICAgICAgICAgICAgICByZXNDb2RlID0gc2VxT2JqW0RFRl9DSEFSXTtcbiAgICAgICAgICAgICAgICBpZiAocmVzQ29kZSAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICAgICAgICAgIGRiY3NDb2RlID0gcmVzQ29kZTsgLy8gRm91bmQuIFdyaXRlIGl0LlxuICAgICAgICAgICAgICAgICAgICBuZXh0Q2hhciA9IHVDb2RlOyAvLyBDdXJyZW50IGNoYXJhY3RlciB3aWxsIGJlIHdyaXR0ZW4gdG9vIGluIHRoZSBuZXh0IGl0ZXJhdGlvbi5cblxuICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIC8vIFRPRE86IFdoYXQgaWYgd2UgaGF2ZSBubyBkZWZhdWx0PyAocmVzQ29kZSA9PSB1bmRlZmluZWQpXG4gICAgICAgICAgICAgICAgICAgIC8vIFRoZW4sIHdlIHNob3VsZCB3cml0ZSBmaXJzdCBjaGFyIG9mIHRoZSBzZXF1ZW5jZSBhcy1pcyBhbmQgdHJ5IHRoZSByZXN0IHJlY3Vyc2l2ZWx5LlxuICAgICAgICAgICAgICAgICAgICAvLyBEaWRuJ3QgZG8gaXQgZm9yIG5vdyBiZWNhdXNlIG5vIGVuY29kaW5nIGhhcyB0aGlzIHNpdHVhdGlvbiB5ZXQuXG4gICAgICAgICAgICAgICAgICAgIC8vIEN1cnJlbnRseSwganVzdCBza2lwIHRoZSBzZXF1ZW5jZSBhbmQgd3JpdGUgY3VycmVudCBjaGFyLlxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHNlcU9iaiA9IHVuZGVmaW5lZDtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmICh1Q29kZSA+PSAwKSB7ICAvLyBSZWd1bGFyIGNoYXJhY3RlclxuICAgICAgICAgICAgdmFyIHN1YnRhYmxlID0gdGhpcy5lbmNvZGVUYWJsZVt1Q29kZSA+PiA4XTtcbiAgICAgICAgICAgIGlmIChzdWJ0YWJsZSAhPT0gdW5kZWZpbmVkKVxuICAgICAgICAgICAgICAgIGRiY3NDb2RlID0gc3VidGFibGVbdUNvZGUgJiAweEZGXTtcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgaWYgKGRiY3NDb2RlIDw9IFNFUV9TVEFSVCkgeyAvLyBTZXF1ZW5jZSBzdGFydFxuICAgICAgICAgICAgICAgIHNlcU9iaiA9IHRoaXMuZW5jb2RlVGFibGVTZXFbU0VRX1NUQVJULWRiY3NDb2RlXTtcbiAgICAgICAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgaWYgKGRiY3NDb2RlID09IFVOQVNTSUdORUQgJiYgdGhpcy5nYjE4MDMwKSB7XG4gICAgICAgICAgICAgICAgLy8gVXNlIEdCMTgwMzAgYWxnb3JpdGhtIHRvIGZpbmQgY2hhcmFjdGVyKHMpIHRvIHdyaXRlLlxuICAgICAgICAgICAgICAgIHZhciBpZHggPSBmaW5kSWR4KHRoaXMuZ2IxODAzMC51Q2hhcnMsIHVDb2RlKTtcbiAgICAgICAgICAgICAgICBpZiAoaWR4ICE9IC0xKSB7XG4gICAgICAgICAgICAgICAgICAgIHZhciBkYmNzQ29kZSA9IHRoaXMuZ2IxODAzMC5nYkNoYXJzW2lkeF0gKyAodUNvZGUgLSB0aGlzLmdiMTgwMzAudUNoYXJzW2lkeF0pO1xuICAgICAgICAgICAgICAgICAgICBuZXdCdWZbaisrXSA9IDB4ODEgKyBNYXRoLmZsb29yKGRiY3NDb2RlIC8gMTI2MDApOyBkYmNzQ29kZSA9IGRiY3NDb2RlICUgMTI2MDA7XG4gICAgICAgICAgICAgICAgICAgIG5ld0J1ZltqKytdID0gMHgzMCArIE1hdGguZmxvb3IoZGJjc0NvZGUgLyAxMjYwKTsgZGJjc0NvZGUgPSBkYmNzQ29kZSAlIDEyNjA7XG4gICAgICAgICAgICAgICAgICAgIG5ld0J1ZltqKytdID0gMHg4MSArIE1hdGguZmxvb3IoZGJjc0NvZGUgLyAxMCk7IGRiY3NDb2RlID0gZGJjc0NvZGUgJSAxMDtcbiAgICAgICAgICAgICAgICAgICAgbmV3QnVmW2orK10gPSAweDMwICsgZGJjc0NvZGU7XG4gICAgICAgICAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIC8vIDMuIFdyaXRlIGRiY3NDb2RlIGNoYXJhY3Rlci5cbiAgICAgICAgaWYgKGRiY3NDb2RlID09PSBVTkFTU0lHTkVEKVxuICAgICAgICAgICAgZGJjc0NvZGUgPSB0aGlzLmRlZmF1bHRDaGFyU2luZ2xlQnl0ZTtcbiAgICAgICAgXG4gICAgICAgIGlmIChkYmNzQ29kZSA8IDB4MTAwKSB7XG4gICAgICAgICAgICBuZXdCdWZbaisrXSA9IGRiY3NDb2RlO1xuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYgKGRiY3NDb2RlIDwgMHgxMDAwMCkge1xuICAgICAgICAgICAgbmV3QnVmW2orK10gPSBkYmNzQ29kZSA+PiA4OyAgIC8vIGhpZ2ggYnl0ZVxuICAgICAgICAgICAgbmV3QnVmW2orK10gPSBkYmNzQ29kZSAmIDB4RkY7IC8vIGxvdyBieXRlXG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICBuZXdCdWZbaisrXSA9IGRiY3NDb2RlID4+IDE2O1xuICAgICAgICAgICAgbmV3QnVmW2orK10gPSAoZGJjc0NvZGUgPj4gOCkgJiAweEZGO1xuICAgICAgICAgICAgbmV3QnVmW2orK10gPSBkYmNzQ29kZSAmIDB4RkY7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICB0aGlzLnNlcU9iaiA9IHNlcU9iajtcbiAgICB0aGlzLmxlYWRTdXJyb2dhdGUgPSBsZWFkU3Vycm9nYXRlO1xuICAgIHJldHVybiBuZXdCdWYuc2xpY2UoMCwgaik7XG59XG5cbkRCQ1NFbmNvZGVyLnByb3RvdHlwZS5lbmQgPSBmdW5jdGlvbigpIHtcbiAgICBpZiAodGhpcy5sZWFkU3Vycm9nYXRlID09PSAtMSAmJiB0aGlzLnNlcU9iaiA9PT0gdW5kZWZpbmVkKVxuICAgICAgICByZXR1cm47IC8vIEFsbCBjbGVhbi4gTW9zdCBvZnRlbiBjYXNlLlxuXG4gICAgdmFyIG5ld0J1ZiA9IEJ1ZmZlci5hbGxvYygxMCksIGogPSAwO1xuXG4gICAgaWYgKHRoaXMuc2VxT2JqKSB7IC8vIFdlJ3JlIGluIHRoZSBzZXF1ZW5jZS5cbiAgICAgICAgdmFyIGRiY3NDb2RlID0gdGhpcy5zZXFPYmpbREVGX0NIQVJdO1xuICAgICAgICBpZiAoZGJjc0NvZGUgIT09IHVuZGVmaW5lZCkgeyAvLyBXcml0ZSBiZWdpbm5pbmcgb2YgdGhlIHNlcXVlbmNlLlxuICAgICAgICAgICAgaWYgKGRiY3NDb2RlIDwgMHgxMDApIHtcbiAgICAgICAgICAgICAgICBuZXdCdWZbaisrXSA9IGRiY3NDb2RlO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgbmV3QnVmW2orK10gPSBkYmNzQ29kZSA+PiA4OyAgIC8vIGhpZ2ggYnl0ZVxuICAgICAgICAgICAgICAgIG5ld0J1ZltqKytdID0gZGJjc0NvZGUgJiAweEZGOyAvLyBsb3cgYnl0ZVxuICAgICAgICAgICAgfVxuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgLy8gU2VlIHRvZG8gYWJvdmUuXG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5zZXFPYmogPSB1bmRlZmluZWQ7XG4gICAgfVxuXG4gICAgaWYgKHRoaXMubGVhZFN1cnJvZ2F0ZSAhPT0gLTEpIHtcbiAgICAgICAgLy8gSW5jb21wbGV0ZSBzdXJyb2dhdGUgcGFpciAtIG9ubHkgbGVhZCBzdXJyb2dhdGUgZm91bmQuXG4gICAgICAgIG5ld0J1ZltqKytdID0gdGhpcy5kZWZhdWx0Q2hhclNpbmdsZUJ5dGU7XG4gICAgICAgIHRoaXMubGVhZFN1cnJvZ2F0ZSA9IC0xO1xuICAgIH1cbiAgICBcbiAgICByZXR1cm4gbmV3QnVmLnNsaWNlKDAsIGopO1xufVxuXG4vLyBFeHBvcnQgZm9yIHRlc3RpbmdcbkRCQ1NFbmNvZGVyLnByb3RvdHlwZS5maW5kSWR4ID0gZmluZElkeDtcblxuXG4vLyA9PSBEZWNvZGVyID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxuXG5mdW5jdGlvbiBEQkNTRGVjb2RlcihvcHRpb25zLCBjb2RlYykge1xuICAgIC8vIERlY29kZXIgc3RhdGVcbiAgICB0aGlzLm5vZGVJZHggPSAwO1xuICAgIHRoaXMucHJldkJ1ZiA9IEJ1ZmZlci5hbGxvYygwKTtcblxuICAgIC8vIFN0YXRpYyBkYXRhXG4gICAgdGhpcy5kZWNvZGVUYWJsZXMgPSBjb2RlYy5kZWNvZGVUYWJsZXM7XG4gICAgdGhpcy5kZWNvZGVUYWJsZVNlcSA9IGNvZGVjLmRlY29kZVRhYmxlU2VxO1xuICAgIHRoaXMuZGVmYXVsdENoYXJVbmljb2RlID0gY29kZWMuZGVmYXVsdENoYXJVbmljb2RlO1xuICAgIHRoaXMuZ2IxODAzMCA9IGNvZGVjLmdiMTgwMzA7XG59XG5cbkRCQ1NEZWNvZGVyLnByb3RvdHlwZS53cml0ZSA9IGZ1bmN0aW9uKGJ1Zikge1xuICAgIHZhciBuZXdCdWYgPSBCdWZmZXIuYWxsb2MoYnVmLmxlbmd0aCoyKSxcbiAgICAgICAgbm9kZUlkeCA9IHRoaXMubm9kZUlkeCwgXG4gICAgICAgIHByZXZCdWYgPSB0aGlzLnByZXZCdWYsIHByZXZCdWZPZmZzZXQgPSB0aGlzLnByZXZCdWYubGVuZ3RoLFxuICAgICAgICBzZXFTdGFydCA9IC10aGlzLnByZXZCdWYubGVuZ3RoLCAvLyBpZHggb2YgdGhlIHN0YXJ0IG9mIGN1cnJlbnQgcGFyc2VkIHNlcXVlbmNlLlxuICAgICAgICB1Q29kZTtcblxuICAgIGlmIChwcmV2QnVmT2Zmc2V0ID4gMCkgLy8gTWFrZSBwcmV2IGJ1ZiBvdmVybGFwIGEgbGl0dGxlIHRvIG1ha2UgaXQgZWFzaWVyIHRvIHNsaWNlIGxhdGVyLlxuICAgICAgICBwcmV2QnVmID0gQnVmZmVyLmNvbmNhdChbcHJldkJ1ZiwgYnVmLnNsaWNlKDAsIDEwKV0pO1xuICAgIFxuICAgIGZvciAodmFyIGkgPSAwLCBqID0gMDsgaSA8IGJ1Zi5sZW5ndGg7IGkrKykge1xuICAgICAgICB2YXIgY3VyQnl0ZSA9IChpID49IDApID8gYnVmW2ldIDogcHJldkJ1ZltpICsgcHJldkJ1Zk9mZnNldF07XG5cbiAgICAgICAgLy8gTG9va3VwIGluIGN1cnJlbnQgdHJpZSBub2RlLlxuICAgICAgICB2YXIgdUNvZGUgPSB0aGlzLmRlY29kZVRhYmxlc1tub2RlSWR4XVtjdXJCeXRlXTtcblxuICAgICAgICBpZiAodUNvZGUgPj0gMCkgeyBcbiAgICAgICAgICAgIC8vIE5vcm1hbCBjaGFyYWN0ZXIsIGp1c3QgdXNlIGl0LlxuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYgKHVDb2RlID09PSBVTkFTU0lHTkVEKSB7IC8vIFVua25vd24gY2hhci5cbiAgICAgICAgICAgIC8vIFRPRE86IENhbGxiYWNrIHdpdGggc2VxLlxuICAgICAgICAgICAgLy92YXIgY3VyU2VxID0gKHNlcVN0YXJ0ID49IDApID8gYnVmLnNsaWNlKHNlcVN0YXJ0LCBpKzEpIDogcHJldkJ1Zi5zbGljZShzZXFTdGFydCArIHByZXZCdWZPZmZzZXQsIGkrMSArIHByZXZCdWZPZmZzZXQpO1xuICAgICAgICAgICAgaSA9IHNlcVN0YXJ0OyAvLyBUcnkgdG8gcGFyc2UgYWdhaW4sIGFmdGVyIHNraXBwaW5nIGZpcnN0IGJ5dGUgb2YgdGhlIHNlcXVlbmNlICgnaScgd2lsbCBiZSBpbmNyZW1lbnRlZCBieSAnZm9yJyBjeWNsZSkuXG4gICAgICAgICAgICB1Q29kZSA9IHRoaXMuZGVmYXVsdENoYXJVbmljb2RlLmNoYXJDb2RlQXQoMCk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZiAodUNvZGUgPT09IEdCMTgwMzBfQ09ERSkge1xuICAgICAgICAgICAgdmFyIGN1clNlcSA9IChzZXFTdGFydCA+PSAwKSA/IGJ1Zi5zbGljZShzZXFTdGFydCwgaSsxKSA6IHByZXZCdWYuc2xpY2Uoc2VxU3RhcnQgKyBwcmV2QnVmT2Zmc2V0LCBpKzEgKyBwcmV2QnVmT2Zmc2V0KTtcbiAgICAgICAgICAgIHZhciBwdHIgPSAoY3VyU2VxWzBdLTB4ODEpKjEyNjAwICsgKGN1clNlcVsxXS0weDMwKSoxMjYwICsgKGN1clNlcVsyXS0weDgxKSoxMCArIChjdXJTZXFbM10tMHgzMCk7XG4gICAgICAgICAgICB2YXIgaWR4ID0gZmluZElkeCh0aGlzLmdiMTgwMzAuZ2JDaGFycywgcHRyKTtcbiAgICAgICAgICAgIHVDb2RlID0gdGhpcy5nYjE4MDMwLnVDaGFyc1tpZHhdICsgcHRyIC0gdGhpcy5nYjE4MDMwLmdiQ2hhcnNbaWR4XTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIGlmICh1Q29kZSA8PSBOT0RFX1NUQVJUKSB7IC8vIEdvIHRvIG5leHQgdHJpZSBub2RlLlxuICAgICAgICAgICAgbm9kZUlkeCA9IE5PREVfU1RBUlQgLSB1Q29kZTtcbiAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICB9XG4gICAgICAgIGVsc2UgaWYgKHVDb2RlIDw9IFNFUV9TVEFSVCkgeyAvLyBPdXRwdXQgYSBzZXF1ZW5jZSBvZiBjaGFycy5cbiAgICAgICAgICAgIHZhciBzZXEgPSB0aGlzLmRlY29kZVRhYmxlU2VxW1NFUV9TVEFSVCAtIHVDb2RlXTtcbiAgICAgICAgICAgIGZvciAodmFyIGsgPSAwOyBrIDwgc2VxLmxlbmd0aCAtIDE7IGsrKykge1xuICAgICAgICAgICAgICAgIHVDb2RlID0gc2VxW2tdO1xuICAgICAgICAgICAgICAgIG5ld0J1ZltqKytdID0gdUNvZGUgJiAweEZGO1xuICAgICAgICAgICAgICAgIG5ld0J1ZltqKytdID0gdUNvZGUgPj4gODtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHVDb2RlID0gc2VxW3NlcS5sZW5ndGgtMV07XG4gICAgICAgIH1cbiAgICAgICAgZWxzZVxuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiaWNvbnYtbGl0ZSBpbnRlcm5hbCBlcnJvcjogaW52YWxpZCBkZWNvZGluZyB0YWJsZSB2YWx1ZSBcIiArIHVDb2RlICsgXCIgYXQgXCIgKyBub2RlSWR4ICsgXCIvXCIgKyBjdXJCeXRlKTtcblxuICAgICAgICAvLyBXcml0ZSB0aGUgY2hhcmFjdGVyIHRvIGJ1ZmZlciwgaGFuZGxpbmcgaGlnaGVyIHBsYW5lcyB1c2luZyBzdXJyb2dhdGUgcGFpci5cbiAgICAgICAgaWYgKHVDb2RlID4gMHhGRkZGKSB7IFxuICAgICAgICAgICAgdUNvZGUgLT0gMHgxMDAwMDtcbiAgICAgICAgICAgIHZhciB1Q29kZUxlYWQgPSAweEQ4MDAgKyBNYXRoLmZsb29yKHVDb2RlIC8gMHg0MDApO1xuICAgICAgICAgICAgbmV3QnVmW2orK10gPSB1Q29kZUxlYWQgJiAweEZGO1xuICAgICAgICAgICAgbmV3QnVmW2orK10gPSB1Q29kZUxlYWQgPj4gODtcblxuICAgICAgICAgICAgdUNvZGUgPSAweERDMDAgKyB1Q29kZSAlIDB4NDAwO1xuICAgICAgICB9XG4gICAgICAgIG5ld0J1ZltqKytdID0gdUNvZGUgJiAweEZGO1xuICAgICAgICBuZXdCdWZbaisrXSA9IHVDb2RlID4+IDg7XG5cbiAgICAgICAgLy8gUmVzZXQgdHJpZSBub2RlLlxuICAgICAgICBub2RlSWR4ID0gMDsgc2VxU3RhcnQgPSBpKzE7XG4gICAgfVxuXG4gICAgdGhpcy5ub2RlSWR4ID0gbm9kZUlkeDtcbiAgICB0aGlzLnByZXZCdWYgPSAoc2VxU3RhcnQgPj0gMCkgPyBidWYuc2xpY2Uoc2VxU3RhcnQpIDogcHJldkJ1Zi5zbGljZShzZXFTdGFydCArIHByZXZCdWZPZmZzZXQpO1xuICAgIHJldHVybiBuZXdCdWYuc2xpY2UoMCwgaikudG9TdHJpbmcoJ3VjczInKTtcbn1cblxuREJDU0RlY29kZXIucHJvdG90eXBlLmVuZCA9IGZ1bmN0aW9uKCkge1xuICAgIHZhciByZXQgPSAnJztcblxuICAgIC8vIFRyeSB0byBwYXJzZSBhbGwgcmVtYWluaW5nIGNoYXJzLlxuICAgIHdoaWxlICh0aGlzLnByZXZCdWYubGVuZ3RoID4gMCkge1xuICAgICAgICAvLyBTa2lwIDEgY2hhcmFjdGVyIGluIHRoZSBidWZmZXIuXG4gICAgICAgIHJldCArPSB0aGlzLmRlZmF1bHRDaGFyVW5pY29kZTtcbiAgICAgICAgdmFyIGJ1ZiA9IHRoaXMucHJldkJ1Zi5zbGljZSgxKTtcblxuICAgICAgICAvLyBQYXJzZSByZW1haW5pbmcgYXMgdXN1YWwuXG4gICAgICAgIHRoaXMucHJldkJ1ZiA9IEJ1ZmZlci5hbGxvYygwKTtcbiAgICAgICAgdGhpcy5ub2RlSWR4ID0gMDtcbiAgICAgICAgaWYgKGJ1Zi5sZW5ndGggPiAwKVxuICAgICAgICAgICAgcmV0ICs9IHRoaXMud3JpdGUoYnVmKTtcbiAgICB9XG5cbiAgICB0aGlzLm5vZGVJZHggPSAwO1xuICAgIHJldHVybiByZXQ7XG59XG5cbi8vIEJpbmFyeSBzZWFyY2ggZm9yIEdCMTgwMzAuIFJldHVybnMgbGFyZ2VzdCBpIHN1Y2ggdGhhdCB0YWJsZVtpXSA8PSB2YWwuXG5mdW5jdGlvbiBmaW5kSWR4KHRhYmxlLCB2YWwpIHtcbiAgICBpZiAodGFibGVbMF0gPiB2YWwpXG4gICAgICAgIHJldHVybiAtMTtcblxuICAgIHZhciBsID0gMCwgciA9IHRhYmxlLmxlbmd0aDtcbiAgICB3aGlsZSAobCA8IHItMSkgeyAvLyBhbHdheXMgdGFibGVbbF0gPD0gdmFsIDwgdGFibGVbcl1cbiAgICAgICAgdmFyIG1pZCA9IGwgKyBNYXRoLmZsb29yKChyLWwrMSkvMik7XG4gICAgICAgIGlmICh0YWJsZVttaWRdIDw9IHZhbClcbiAgICAgICAgICAgIGwgPSBtaWQ7XG4gICAgICAgIGVsc2VcbiAgICAgICAgICAgIHIgPSBtaWQ7XG4gICAgfVxuICAgIHJldHVybiBsO1xufVxuXG4iXSwibmFtZXMiOlsiQnVmZmVyIiwiZXhwb3J0cyIsIl9kYmNzIiwiREJDU0NvZGVjIiwiVU5BU1NJR05FRCIsIkdCMTgwMzBfQ09ERSIsIlNFUV9TVEFSVCIsIk5PREVfU1RBUlQiLCJVTkFTU0lHTkVEX05PREUiLCJBcnJheSIsImkiLCJjb2RlY09wdGlvbnMiLCJpY29udiIsInRoaXMiLCJlbmNvZGluZ05hbWUiLCJFcnJvciIsInRhYmxlIiwibWFwcGluZ1RhYmxlIiwiZGVjb2RlVGFibGVzIiwic2xpY2UiLCJkZWNvZGVUYWJsZVNlcSIsImxlbmd0aCIsIl9hZGREZWNvZGVDaHVuayIsImRlZmF1bHRDaGFyVW5pY29kZSIsImVuY29kZVRhYmxlIiwiZW5jb2RlVGFibGVTZXEiLCJza2lwRW5jb2RlQ2hhcnMiLCJlbmNvZGVTa2lwVmFscyIsInZhbCIsImoiLCJmcm9tIiwidG8iLCJfZmlsbEVuY29kZVRhYmxlIiwiZW5jb2RlQWRkIiwidUNoYXIiLCJPYmplY3QiLCJwcm90b3R5cGUiLCJoYXNPd25Qcm9wZXJ0eSIsImNhbGwiLCJfc2V0RW5jb2RlQ2hhciIsImNoYXJDb2RlQXQiLCJkZWZDaGFyU0IiLCJkZWZhdWx0Q2hhclNpbmdsZUJ5dGUiLCJnYjE4MDMwIiwidGhpcmRCeXRlTm9kZUlkeCIsInRoaXJkQnl0ZU5vZGUiLCJmb3VydGhCeXRlTm9kZUlkeCIsImZvdXJ0aEJ5dGVOb2RlIiwic2Vjb25kQnl0ZU5vZGVJZHgiLCJzZWNvbmRCeXRlTm9kZSIsIkRCQ1NFbmNvZGVyIiwib3B0aW9ucyIsImNvZGVjIiwibGVhZFN1cnJvZ2F0ZSIsInNlcU9iaiIsInVuZGVmaW5lZCIsIkRCQ1NEZWNvZGVyIiwibm9kZUlkeCIsInByZXZCdWYiLCJhbGxvYyIsImZpbmRJZHgiLCJsIiwiciIsIm1pZCIsIk1hdGgiLCJmbG9vciIsImVuY29kZXIiLCJkZWNvZGVyIiwiX2dldERlY29kZVRyaWVOb2RlIiwiYWRkciIsImJ5dGVzIiwicHVzaCIsIm5vZGUiLCJ0b1N0cmluZyIsImNodW5rIiwiY3VyQWRkciIsInBhcnNlSW50Iiwid3JpdGVUYWJsZSIsImsiLCJwYXJ0IiwiY29kZSIsImNvZGVUcmFpbCIsImxlbiIsInNlcSIsIm0iLCJjaGFyQ29kZSIsIl9nZXRFbmNvZGVCdWNrZXQiLCJ1Q29kZSIsImhpZ2giLCJkYmNzQ29kZSIsImJ1Y2tldCIsImxvdyIsIl9zZXRFbmNvZGVTZXF1ZW5jZSIsIm9sZFZhbCIsInByZWZpeCIsIm1iQ29kZSIsIndyaXRlIiwic3RyIiwibmV3QnVmIiwibmV4dENoYXIiLCJyZXNDb2RlIiwic3VidGFibGUiLCJpZHgiLCJ1Q2hhcnMiLCJnYkNoYXJzIiwiZW5kIiwiYnVmIiwicHJldkJ1Zk9mZnNldCIsInNlcVN0YXJ0IiwiY29uY2F0IiwiY3VyQnl0ZSIsImN1clNlcSIsInB0ciIsInVDb2RlTGVhZCIsInJldCJdLCJzb3VyY2VSb290IjoiIn0=